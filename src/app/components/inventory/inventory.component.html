<app-spin></app-spin>
<div class="wrapper wrapper-content animated fadeInRight">
  <div class="row">
    <div class="col-lg-3 col-sm-3 col-md-3">
      <h3 style="font-size: 20px">{{ "Inventory" | translate }}</h3>
    </div>
    <div
      class="col-lg-9 col-sm-9 col-md-9"
      style="
        text-align: -webkit-right;
        text-align: -moz-right;
        margin-top: 2%;
        margin-bottom: 2%;
        overflow: auto;
      "
    >
      <!-- <div *ngIf="!allow_create">
        <a href="javascript:" (click)="event_handler('create')">
          <button class="btn btn-primary createjobcard">
            {{ "Create" | translate }}
          </button>
        </a>
      </div> -->
      <div
        class="d-flex flex-row justify-content-end mb-2"
        style="float: right"
        *ngIf="allow_create"
      >
        <div
          class="col-lg-4 col-sm-4 col-md-4 create-btns"
          data-toggle="modal"
          data-target="#add_spares"
        >
          <a href="javascript:" (click)="openSparepopup()">
            <button class="btn btn-primary createjobcard">
              {{ "Create Spare" | translate }} (S)
            </button>
          </a>
        </div>
        <div class="col-lg-4 col-sm-4 col-md-4 create-btns">
          <a
            href="javascript:"
            (click)="openLubepopup()"
            data-toggle="modal"
            data-target="#add_lubes"
          >
            <button class="btn btn-primary createjobcard">
              {{ "Create Lube" | translate }} (L)
            </button>
          </a>
        </div>
        <div class="col-lg-4 col-sm-4 col-md-4 create-btns">
          <a
            href="javascript:"
            (click)="openJobpopup()"
            data-toggle="modal"
            data-target="#add_jobs"
          >
            <button class="btn btn-primary createjobcard">
              {{ "Create Job" | translate }} (J)
            </button>
          </a>
        </div>
        <!-- <div class="col-lg-4 col-sm-4 col-md-4 create-btns">
          <a
            href="javascript:"
            (click)="openGrouppopup()"
            data-toggle="modal"
            data-target="#add_groups"
          >
            <button class="btn btn-primary createjobcard">
              {{ "Create Group" | translate }}
            </button>
          </a>
        </div> -->
      </div>
    </div>
  </div>
  <div class="row" style="padding: 0px 0px 13px">
    <div
      (click)="checkStatus('spare', 'pen')"
      class="col-lg-2 col-sm-3 col-md-3"
      data-toggle="tooltip"
      title="Spare"
      style="cursor: pointer"
    >
      <div class="card-tab-size">
        <div [class]="pendingMainClass">
          <div class="totaljobb">
            <button
              style="background-color: #c30707 !important"
              class="countbuttonn"
            >
              {{ totalspare }}
            </button>
          </div>
          <div class="namejob">
            <label
              style="
                color: #4d4f5c !important;
                font-family: open Sans;
                font-size: 13px;
              "
              >{{ "Spare" | translate }}</label
            >
          </div>
          <div class="lineadd"></div>
          <div class="amountofjob">
            <label
              class="control-label txt_lbl countt"
              style="
                color: #aaaaaa !important;
                font-family: open Sans;
                font-size: 13px;
              "
              >₹ {{ total_spares_amount }}</label
            >
          </div>
        </div>
      </div>
    </div>
    <div
      (click)="checkStatus('lube', 'com')"
      class="col-lg-2 col-sm-3 col-md-3"
      data-toggle="tooltip"
      title="Lube"
      style="cursor: pointer"
    >
      <div class="card-tab-size">
        <div [class]="completeMainClass">
          <div class="totaljobb">
            <button style="background-color: #cead06" class="countbuttonn">
              {{ totallube }}
            </button>
          </div>
          <div class="namejob">
            <label
              style="
                color: #4d4f5c !important;
                font-family: open Sans;
                font-size: 13px;
              "
              >{{ "Lubes" | translate }}</label
            >
          </div>
          <div class="lineadd"></div>
          <div class="amountofjob">
            <label
              class="control-label txt_lbl countt"
              style="
                color: #aaaaaa !important;
                font-family: open Sans;
                font-size: 13px;
              "
              >₹ {{ total_lubes_amount }}</label
            >
          </div>
        </div>
      </div>
    </div>
    <div
    
    (click)="checkStatus('job', 'clo')"
      class="col-lg-2 col-sm-3 col-md-3"
      data-toggle="tooltip"
      title="Job"
      style="cursor: pointer"
    >
      <div class="card-tab-size">
        <div [class]="closedMainClass">
          <div class="totaljobb">
            <button style="background-color: #10a71a" class="countbuttonn">
              {{ totaljobs }}
            </button>
          </div>
          <div class="namejob">
            <label
              style="
                color: #4d4f5c !important;
                font-family: open Sans;
                font-size: 13px;
              "
              >{{ "Jobs" | translate }}</label
            >
          </div>
          <div class="lineadd"></div>
          <!-- <div class="amountofjob">
                    <label class="control-label txt_lbl countt" style="color: #AAAAAA !important;
                    font-family: open Sans;
                    font-size: 13px;">₹ {{total_jobs_amount}}</label>
                </div> -->
        </div>
      </div>
    </div>

    <!-- <div
      (click)="checkStatusGroup()"
      class="col-lg-2 col-sm-3 col-md-3"
      data-toggle="tooltip"
      title="Group"
      style="cursor: pointer"
    >
      <div class="card-tab-size">
        <div [class]="groupMainClass">
          <div class="totaljobb">
            <button
              style="background-color: #544545 !important"
              class="countbuttonn"
            >
              {{ groupCount }}
            </button>
          </div>
          <div class="namejob">
            <label
              style="
                color: #4d4f5c !important;
                font-family: open Sans;
                font-size: 13px;
              "
              >{{ "Groups" | translate }}</label
            >
          </div>
          <div class="lineadd"></div>
          <div class="amountofjob"></div>
        </div>
      </div>
    </div> -->

    <!-- <div class="col-lg-4">
            <div class="totliventory" style="padding: 6px 0px;">
                <span style="font-weight: bold;font-size: 16px;">
                    Total Inventory: 
                    <span *ngIf='total_quantity!=0' style="color: #c30707;">
                        ₹{{total_quantity}}
                    </span>
                    <span *ngIf='total_quantity==0' style="color: #c30707;" >
                        ₹ 0
                    </span>
                </span>
                &nbsp;
                <span style="font-weight: bold;font-size: 16px;">
                    Total Quantity: 
                    <span *ngIf='total_quantity_of_inven!=0' style="color: #c30707;">
                        {{total_quantity_of_inven}}
                    </span>
                    <span *ngIf='total_quantity_of_inven==0' style="color: #c30707;" >
                        0
                    </span>
                </span>
            </div>
        </div> -->
  </div>
  <div class="row">
    <div class="col-lg-6 col-sm-6 col-md-6">
      <div class="input-group m-b">
        <span
          class="input-group-addon"
          style="
            padding: 0 15px;
            border-top-left-radius: 5px;
            border-bottom-left-radius: 5px;
          "
        >
          <i class="fa fa-search fa-1x" aria-hidden="true"></i>
        </span>
        <span class="jobcard-dash data">
          <ng-autocomplete
            *ngIf="!showgroupsdata"
            [(ngModel)]="selectedvaluefoprsearch"
            placeHolder="{{
              'Search Inventory by Part Name, Part Number' | translate
            }}"
            [data]="states"
            (selected)="selectedResult($event)"
            (input)="searchBar($event.target.value)"
            [itemTemplate]="itemTemplate"
            [notFoundTemplate]="notFoundTemplate"
          >
          </ng-autocomplete>
          <ng-autocomplete
            *ngIf="showgroupsdata"
            matInput
            (keyup)="doFilter($event.target.value)"
            placeHolder="{{ 'Search Group by Name' | translate }} "
          >
          </ng-autocomplete>

          <ng-template #itemTemplate let-item>
            <a [innerHTML]="item"></a>
          </ng-template>

          <ng-template #notFoundTemplate let-notFound>
            <div [innerHTML]="notFound"></div>
          </ng-template>
          <span
            style="font-size: 30px; margin-left: -55px; cursor: pointer"
            *ngIf="showsearchcnacel == true"
          >
            <i
              class="fa fa-times"
              aria-hidden="true"
              (click)="clearSearch()"
            ></i>
          </span>
        </span>
      </div>
    </div>
    <div class="col-lg-6 col-sm-6 col-md-6">
      <div 
      class="col-lg-6 col-sm-6 col-md-6"
      style="text-align: -webkit-left">
        <!-- <mat-form-field appearance="outline">
          <mat-label style="font-weight: bold"
            >Quantity</mat-label
          >
          <mat-select
          [(value)] = "selectedQty"
          (selectionChange)="getFilteredInventory($event.value)"
           
          >
          <mat-option *ngFor="let filterQty of filterQuantities" [value]="filterQty.value">
            {{ filterQty.viewValue }}
          </mat-option>
            
          </mat-select>
        </mat-form-field>
         -->
         <!-- <label style="margin-right:1rem">
          {{ "Quantity" | translate }}</label
        > -->
        <select
          class="report-select"
          (change)="getFilteredInventory($event.target.value)"
          [ngModelOptions]="{ standalone: true }"
          [(ngModel)]="selectedQty"
        >
          <option
          *ngFor="let filterQty of filterQuantities" 
          [value]="filterQty.value">
          {{ filterQty.viewValue }}
          </option>
          </select>
     
        </div>
      <div  *ngIf="selectedQty != ''" class="col-lg-6 col-sm-6 col-md-6"
      style="text-align: -webkit-right">
      <a href="javascript:" (click)="downloadFile()">
        <button class="btn btn-primary createjobcard">
          {{ "Download" | translate }}
        </button>
      </a>
      </div>
    </div>

  </div>
  <div class="row">
    <div class="col-lg-12 col-sm-12 col-md-12">
      <div
        class="mat-elevation-z8"
        (scroll)="onScroll($event)"
        *ngIf="tabelData != undefined"
        style="
          box-shadow: 0px 0px 0px 0px rgba(0, 0, 0, 0.2),
            0px 0px 2px 2px rgba(0, 0, 0, 0.14),
            0px 0px 4px 4px rgba(0, 0, 0, 0.12);
          border-radius: 8px;
        "
      >
        <table
          mat-table
          [dataSource]="dataSource"
          matSort
          class="mat-elevation-z12"
          style="font-family: Open sans; width: 100%"
          *ngIf="!showgroupsdata"
        >
          <!-- Name Column -->
          <ng-container matColumnDef="part_name" *ngIf="showjobsdata == false">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <span class="mat-title-ctm"> {{ "Part Name" | translate }}</span>
            </th>
            <td mat-cell *matCellDef="let element">
              <span class="mobile-label">Part Name:</span>
              {{ element.part_name }}
            </td>
          </ng-container>
          <ng-container matColumnDef="part_name" *ngIf="showjobsdata == true">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <span class="mat-title-ctm"> {{ "Job Name" | translate }} </span>
            </th>
            <td mat-cell *matCellDef="let element">
              <span class="mobile-label">Job Name:</span>
              {{ element.part_name }}
            </td>
          </ng-container>

          <!-- Weight Column -->
          <ng-container
            matColumnDef="part_number"
            *ngIf="showjobsdata == false"
          >
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <span class="mat-title-ctm">
                {{ "Part Number" | translate }}
              </span>
            </th>
            <td mat-cell *matCellDef="let element">
              <span class="mobile-label">Part Number:</span>
              {{ element.part_number }}
            </td>
          </ng-container>
          <ng-container matColumnDef="part_number" *ngIf="showjobsdata == true">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              class="web-show"
            >
              <span class="mat-title-ctm"> {{ "Job Code" | translate }}</span>
            </th>
            <td mat-cell *matCellDef="let element" class="web-show">
              {{ element.part_number }}
            </td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container
            matColumnDef="company_name"
            *ngIf="showjobsdata == false"
          >
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              class="web-show"
            >
              <span class="mat-title-ctm"> {{ "Company" | translate }}</span>
            </th>
            <td mat-cell *matCellDef="let element" class="web-show">
              <span *ngIf="element.company_name == ''"> - </span>
              <span *ngIf="element.company_name != ''">
                {{ element.company_name }}
              </span>
            </td>
          </ng-container>

          <ng-container matColumnDef="sub_category">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              class="web-show"
            >
              <span class="mat-title-ctm">
                {{ "Sub Category" | translate }}</span
              >
            </th>
            <td mat-cell *matCellDef="let element" class="web-show">
              <span *ngIf="element.category == 'spare'">
                {{ element.spare_subcategory }}
              </span>
              <span *ngIf="element.category == 'lube'">
                {{ element.lube_subcategory }}
              </span>
              <span *ngIf="element.category == 'job'">
                {{ element.job_subcategory }}
              </span>
            </td>
          </ng-container>

          <ng-container matColumnDef="quantity" *ngIf="showjobsdata == false">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <span class="mat-title-ctm"> {{ "Qty" | translate }}</span>
            </th>
            <td mat-cell *matCellDef="let element" style="text-align: center">
              <span class="mobile-label">Qty:</span>
              <span>{{ element.current_quantity | number: "1.0-0" }}</span>
            </td>
          </ng-container>

          <ng-container matColumnDef="units">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              class="web-show"
            >
              <span class="mat-title-ctm"> {{ "Units" | translate }}</span>
            </th>
            <td mat-cell *matCellDef="let element" class="web-show">
              {{ element.unit }}
            </td>
          </ng-container>
          <ng-container matColumnDef="rackno" *ngIf="showjobsdata == false">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              class="web-show"
            >
              <span class="mat-title-ctm"> {{ "Rack No" | translate }}</span>
            </th>
            <td mat-cell *matCellDef="let element" class="web-show">
              <span *ngIf="element.rack_no == ''">0</span>
              <span *ngIf="element.rack_no == null">0</span>
              <span *ngIf="element.rack_no != ''">{{ element.rack_no }} </span>
            </td>
          </ng-container>

          <ng-container
            matColumnDef="selling_price"
            *ngIf="showjobsdata == false"
          >
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <span class="mat-title-ctm">
                {{ "Selling Price" | translate }}
              </span>
            </th>
            <td mat-cell *matCellDef="let element">
              <span class="mobile-label">Selling Price:</span>
              ₹ {{ element.unit_sale_price }}
            </td>
          </ng-container>
          <ng-container
            matColumnDef="selling_price"
            *ngIf="showjobsdata == true"
          >
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <span class="mat-title-ctm">
                {{ "Unit Price" | translate }}
              </span>
            </th>
            <td mat-cell *matCellDef="let element">
              <span class="mobile-label">Unit Price:</span>
              ₹ {{ element.unit_sale_price }}
            </td>
          </ng-container>
          <ng-container
            *ngIf="
              allBillingData != undefined && allBillingData.gst_number != ''
            "
            matColumnDef="hsn_no"
          >
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              class="web-show"
            >
              <span class="mat-title-ctm"> {{ "HSN No" | translate }}</span>
            </th>
            <td mat-cell *matCellDef="let element" class="web-show">
              <span
                *ngIf="
                  allBillingData != undefined && allBillingData.gst_number != ''
                "
              >
                <span *ngIf="element.hsn_no == ''"> - </span>
                <span *ngIf="element.hsn_no != ''">
                  {{ element.hsn_no }}
                </span>
              </span>
            </td>
          </ng-container>
          <ng-container
            *ngIf="
              allBillingData != undefined && allBillingData.gst_number != ''
            "
            matColumnDef="gst(%)"
          >
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              class="web-show"
            >
              <span class="mat-title-ctm"> {{ "GST" | translate }}(%)</span>
            </th>
            <td
              mat-cell
              *matCellDef="let element"
              style="color: #2f2fe2"
              class="web-show"
            >
              <span
                *ngIf="
                  allBillingData != undefined && allBillingData.gst_number != ''
                "
              >
                {{ element.sale_gst_rate }}&nbsp;{{
                  element.sale_tax_type | slice: 0:4
                }}
              </span>
            </td>
          </ng-container>

          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef>
              <span class="mat-title-ctm"> {{ "Action" | translate }}</span>
            </th>
            <td
              mat-cell
              *matCellDef="let element"
              style="color: #c30707; font-weight: bold"
            >
              <span class="mobile-label">Action:</span>

              <span *ngIf="!allow_edit">
                <span style="cursor: pointer">
                  <i
                    matTooltip="Edit "
                    (click)="event_handler_edit()"
                    class="fa fa-pencil"
                    aria-hidden="true"
                    style="cursor: pointer; padding: 9px"
                  ></i>
                  <i
                    matTooltip="Delete "
                    (click)="event_handler_delete()"
                    class="fa fa-times"
                    aria-hidden="true"
                    style="cursor: pointer"
                  ></i>
                </span>
              </span>

              <span *ngIf="allow_edit">
                <span
                  *ngIf="element.category == 'spare'"
                  style="cursor: pointer"
                >
                  <i
                    matTooltip="Edit Spare"
                    (click)="
                      editjobsparelube(
                        element.category,
                        element.part_number,
                        1,
                        element
                      )
                    "
                    data-toggle="modal"
                    data-target="#add_spares"
                    class="fa fa-pencil"
                    aria-hidden="true"
                    style="cursor: pointer; padding: 9px"
                  ></i>
                  <i
                    matTooltip="Delete Spare"
                    (click)="
                      event_handler_delete() &&
                        removesparejoblube(
                          element.category,
                          element.part_number,
                          '1'
                        )
                    "
                    class="fa fa-times"
                    aria-hidden="true"
                    style="cursor: pointer"
                  ></i>
                </span>
                <span
                  *ngIf="element.category == 'lube'"
                  style="cursor: pointer"
                >
                  <i
                    matTooltip="Edit Lube"
                    (click)="
                      editjobsparelube(
                        element.category,
                        element.part_number,
                        1,
                        element
                      )
                    "
                    data-toggle="modal"
                    data-target="#add_lubes"
                    class="fa fa-pencil"
                    aria-hidden="true"
                    style="cursor: pointer; padding: 9px"
                  ></i>
                  <i
                    matTooltip="Delete Lube"
                    (click)="
                      event_handler_delete() &&
                        removesparejoblube(
                          element.category,
                          element.part_number,
                          '1'
                        )
                    "
                    class="fa fa-times"
                    aria-hidden="true"
                    style="cursor: pointer"
                  ></i>
                </span>
                <span *ngIf="element.category == 'job'" style="cursor: pointer">
                  <i
                    matTooltip="Edit Job"
                    (click)="
                      editjobsparelube(
                        element.category,
                        element.part_number,
                        1,
                        element
                      )
                    "
                    data-toggle="modal"
                    data-target="#add_jobs"
                    class="fa fa-pencil"
                    aria-hidden="true"
                    style="cursor: pointer; padding: 9px"
                  ></i>
                  <i
                    matTooltip="Delete Job"
                    (click)="
                      event_handler_delete() &&
                        removesparejoblube(
                          element.category,
                          element.part_number,
                          '1'
                        )
                    "
                    class="fa fa-times"
                    aria-hidden="true"
                    style="cursor: pointer"
                  ></i>
                </span>
              </span>
            </td>
          </ng-container>

          <tr
            mat-header-row
            *matHeaderRowDef="displayedColumns; sticky: true"
          ></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>

        <table
          mat-table
          [dataSource]="dataSource"
          matSort
          class="mat-elevation-z12"
          style="font-family: Open sans; width: 100%"
          *ngIf="showgroupsdata"
        >
          <!-- Name Column -->
          <ng-container matColumnDef="group_name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <span class="mat-title-ctm"> {{ "Group Name" | translate }}</span>
            </th>
            <td mat-cell *matCellDef="let element">
              <span class="mobile-label">Group Name:</span>
              {{ element.group_name }}
            </td>
          </ng-container>

          <!-- Weight Column -->

          <ng-container matColumnDef="total_amount">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              class="web-show"
            >
              <span class="mat-title-ctm">
                {{ "Total Amount" | translate }}</span
              >
            </th>
            <td mat-cell *matCellDef="let element" class="web-show">
              {{ element.total_amount }}
            </td>
          </ng-container>
          <ng-container matColumnDef="make">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <span class="mat-title-ctm">
                {{ "Make it Supports" | translate }}</span
              >
            </th>
            <td mat-cell *matCellDef="let element">
              <span class="mobile-label">Make:</span>
              {{ element.make }}
            </td>
          </ng-container>

          <ng-container matColumnDef="created_at">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <span class="mat-title-ctm"> {{ "Created On" | translate }}</span>
            </th>
            <td mat-cell *matCellDef="let element">
              <span class="mobile-label">Created On:</span>
              {{ element.created_at | date: "MMM d, y" }}
            </td>
          </ng-container>

          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef>
              <span class="mat-title-ctm"> {{ "Action" | translate }}</span>
            </th>
            <td
              mat-cell
              *matCellDef="let element"
              style="color: #c30707; font-weight: bold"
            >
              <span class="mobile-label">Action:</span>

              <span>
                <span style="cursor: pointer">
                  <i
                    matTooltip="Edit "
                    (click)="event_handler_edit() && editgroup(element)"
                    data-toggle="modal"
                    data-target="#add_groups"
                    class="fa fa-pencil"
                    aria-hidden="true"
                    style="cursor: pointer; padding: 9px"
                  ></i>
                  <i
                    matTooltip="Delete Spare"
                    (click)="event_handler_delete() && removeGroup(element)"
                    class="fa fa-times"
                    aria-hidden="true"
                    style="cursor: pointer"
                  ></i>
                </span>
              </span>
            </td>
          </ng-container>

          <tr
            mat-header-row
            *matHeaderRowDef="displayedColumns; sticky: true"
          ></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
        <!-- <mat-paginator [pageSizeOptions]="[15]"></mat-paginator> -->
      </div>
      <div
        class="mat-elevation-z8"
        *ngIf="tabelData == undefined"
        style="
          box-shadow: 0px 0px 0px 0px rgba(0, 0, 0, 0.2),
            0px 0px 2px 2px rgba(0, 0, 0, 0.14),
            0px 0px 4px 4px rgba(0, 0, 0, 0.12);
          overflow-x: hidden;
          border-radius: 8px;
        "
      >
        <div
          class="col-lg-12 col-sm-12 col-md-12 text-center"
          *ngIf="tabelData == undefined"
          style="
            font-weight: bold;
            padding: 10px 0px 10px 0px;
            font-size: 29px;
            color: black;
          "
        >
          <span>
            {{ "No Records Found" | translate }}
          </span>
        </div>
        <!-- <mat-paginator [pageSizeOptions]="[15]"></mat-paginator> -->
      </div>
    </div>
  </div>
  <div
    class="modal inmodal"
    id="add_spares"
    tabindex="-1"
    role="dialog"
    aria-hidden="true"
    style="background: rgba(0, 0, 0, 0.5)"
  >
    <div class="modal-dialog">
      <div class="modal-content animated">
        <div class="modal-header" style="padding: 0px">
          <div
            class="ibox-title"
            style="
              background-color: #f1f1f1;
              padding: 8px 23px 8px;
              border: none;
              border-bottom: 1px solid #4d4f5c;
            "
          >
            <div class="row">
              <div class="col-lg-6 col-sm-6 col-md-6">
                <h1 style="font-size: 22px; float: left">
                  {{ "Add Spare" | translate }}
                </h1>
              </div>

              <div
                class="col-lg-2 col-sm-2 col-md-2"
                style="margin-top: 1%; float: right"
              >
                <label
                  data-dismiss="modal"
                  class="btn btn-white cir"
                  style="
                    padding: 1px 4px;

                    background: none;
                    border: none;
                  "
                  ><i class="fa fa-times fa-2x" aria-hidden="true"></i
                ></label>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-body" style="padding-top: 0">
          <div class="ibox-content">
            <form
              [formGroup]="CreateSpareForm"
              novalidate
              class="form-horizontal"
            >
              <div class="row">
                <div class="col-lg-9 col-sm-9 col-md-9">
                  <label
                    class="control-label"
                    style="
                      font-size: 16px;
                      border-bottom: 1px solid #ce0e17;
                      margin-bottom: 1%;
                    "
                    ><b>{{ "Part Details" | translate }}</b></label
                  >
                  <div class="form-group">
                    <div class="col-lg-5 col-sm-5 col-md-5">
                      <label class="control-label txt_lbl">{{
                        "Part Number" | translate
                      }}</label>
                      <div class="input-group m-b">
                        <!-- <span class="input-group-addon cir" style="padding: 5%;width: 20%;">
                                                    <i class="fa fa-search fa-1x" aria-hidden="true"></i>
                                                </span>  -->
                        <span class="search_invenall">
                          <ng-autocomplete
                            [disabled]="showSpareUpdate"
                            formControlName="partnumber"
                            [(ngModel)]="sparemodelforcreate"
                            (scrolledToEnd)="loadMoreDataspare()"
                            placeHolder=""
                            [data]="searchSpareData"
                            (selected)="addselectedSpareResultsearch($event)"
                            (input)="searchSpareInputnew($event.target.value)"
                            [itemTemplate]="itemTemplate"
                            [notFoundTemplate]="notFoundTemplate"
                          >
                          </ng-autocomplete>

                          <ng-template #itemTemplate let-item>
                            <a [innerHTML]="item"></a>
                          </ng-template>

                          <ng-template #notFoundTemplate let-notFound>
                            <div [innerHTML]="notFound"></div>
                          </ng-template>
                        </span>

                        <!-- <div *ngIf="CreateSpareForm.controls['partnumber'].invalid && (CreateSpareForm.controls['partnumber'].dirty || CreateSpareForm.controls['partnumber'].touched)" class="text-danger">
                                                                <div *ngIf="CreateSpareForm.controls['partnumber'].errors.required">
                                                                Part Number is required.
                                                              </div>
                                                            </div> -->
                      </div>
                    </div>
                    <div class="col-lg-5 col-sm-5 col-md-5">
                      <label class="control-label txt_lbl"
                        >{{ "Part Name" | translate
                        }}<span style="color: #c30707; font-weight: bold"
                          ><span style="color: #c30707; font-weight: bold"
                            >*</span
                          ></span
                        ></label
                      >
                      <input
                        id="part_name_spare"
                        type="text"
                        class="form-control cir"
                        formControlName="partname"
                      />
                      <div
                        *ngIf="CreateSpareForm.controls['partname'].invalid"
                        class="text-danger"
                      >
                        <div
                          *ngIf="
                            CreateSpareForm.controls['partname'].errors.required
                          "
                        >
                          {{ "Part Name is required" | translate }}.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-sm-6 jobcard">
                      <label class="control-label txt_lbl">{{
                        "Spare Company" | translate
                      }}</label>
                      <!-- <input id="company_name_sapre" type="text" class="form-control cir" formControlName="companynameSpare"> -->
                      <ng-autocomplete
                        id="spare_company_search"
                        formControlName="companynameSpare"
                        [(ngModel)]="sparecompanyname"
                        placeHolder="{{ 'Search Spare Company' | translate }}"
                        [data]="searchSpareCompany"
                        (selected)="selectedcomapny($event, 'spare')"
                        (input)="
                          searchBarForCompany($event.target.value, 'spare')
                        "
                        [itemTemplate]="itemTemplate"
                        [notFoundTemplate]="notFoundTemplate"
                      >
                      </ng-autocomplete>

                      <ng-template #itemTemplate let-item>
                        <a [innerHTML]="item"></a>
                      </ng-template>

                      <ng-template #notFoundTemplate let-notFound>
                        <div [innerHTML]="notFound"></div>
                      </ng-template>
                      <div
                        *ngIf="
                          CreateSpareForm.controls['companynameSpare'].invalid
                        "
                        class="text-danger"
                      >
                        <div
                          *ngIf="
                            CreateSpareForm.controls['companynameSpare'].errors
                              .required
                          "
                        >
                          {{ "Spare Company is required" | translate }}.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-lg-4 col-sm-4 col-md-4">
                      <label class="control-label txt_lbl">{{
                        "Unit" | translate
                      }}</label>
                      <select
                        id="unit_spare"
                        class="form-control cir"
                        formControlName="unit"
                      >
                        <option *ngFor="let data of units" value="{{ data }}">
                          {{ data }}
                        </option>
                      </select>
                    </div>
                    <div class="col-lg-4 col-sm-4 col-md-4">
                      <label class="control-label txt_lbl">{{
                        "Sub Category" | translate
                      }}</label>
                      <select
                        id="sub_category"
                        class="form-control cir"
                        formControlName="subcategory"
                      >
                        <option
                          *ngFor="let data of spareCategory"
                          value="{{ data }}"
                          id="{{ data }}"
                        >
                          {{ data }}
                        </option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="col-sm-3" style="text-align: right">
                  <label class="control-label"
                    ><b>{{ "Total Amount" | translate }}</b></label
                  >
                  <br />
                  <label class="control-label"
                    ><h2
                      style="
                        color: #54545e;
                        padding-top: 0;
                        font-size: 20px;
                        margin: 0;
                      "
                    >
                      <b>{{ "Rs" | translate }}. {{ totalamountonform }}</b>
                    </h2></label
                  >
                  <br />
                  <label
                    *ngIf="
                      allBillingData != undefined &&
                      allBillingData.gst_number != ''
                    "
                    class="control-label"
                    style="margin: 0; font-weight: 500; padding-top: 0"
                    >{{ "CGST" | translate }} {{ toShowcgst }}</label
                  >
                  <br />
                  <label
                    *ngIf="
                      allBillingData != undefined &&
                      allBillingData.gst_number != ''
                    "
                    class="control-label"
                    style="margin: 0; font-weight: 500; padding-top: 0"
                    >{{ "SGST" | translate }} {{ toShowsgst }}</label
                  >
                  <br />
                  <label
                    *ngIf="
                      allBillingData != undefined &&
                      allBillingData.gst_number != ''
                    "
                    class="control-label"
                    style="margin: 0; font-weight: 500; padding-top: 0"
                    >{{ "GST" | translate }} {{ toShowtotal_gst }}</label
                  >
                  <br />
                </div>
              </div>
              <div class="col-sm-12">
                <label
                  class="control-label"
                  style="
                    font-size: 16px;
                    border-bottom: 1px solid #ce0e17;
                    margin-bottom: 1%;
                  "
                  ><b>{{ "Compatible For" | translate }}</b></label
                >
                <span class="for_all" style="margin-left: 43px">
                  <label class="control-label txt_lbl">{{
                    "For All Vehicles" | translate
                  }}</label>
                  <input
                    *ngIf="foralltrue == false"
                    style="margin-left: 6px"
                    type="checkbox"
                    data-toggle="toggle"
                    (change)="forAllVehicles($event)"
                  />
                  <input
                    *ngIf="foralltrue == true"
                    checked
                    style="margin-left: 6px"
                    type="checkbox"
                    data-toggle="toggle"
                    (change)="forAllVehicles($event)"
                  />
                </span>
              </div>
              <div class="form-group">
                <div class="col-sm-6" *ngIf="foralltrue == true">
                  <label class="control-label txt_lbl">{{
                    "Selected Vehicle" | translate
                  }}</label>
                  <span
                    class="form-control"
                    style="background: none; border: none"
                  >
                    <label
                      style="
                        background: linear-gradient(
                          to bottom,
                          #ff0000 0%,
                          #563b3b 100%
                        );
                        width: 100px;
                        height: 26px;
                        text-align: center;
                        padding: 3px;
                        color: white;
                        border-top-left-radius: 5px;
                        border-bottom-left-radius: 5px;
                      "
                      >{{ "All" | translate }}</label
                    >
                    <label
                      style="
                        background-color: #52524f;
                        width: 90px;
                        height: 26px;
                        text-align: center;
                        padding: 3px;
                        color: white;
                      "
                      >{{ "All" | translate }}</label
                    >
                    <label
                      style="
                        background-color: #52524f;
                        width: auto;
                        height: 26px;
                        text-align: center;
                        padding: 3px;
                        color: white;
                        border-top-right-radius: 5px;
                        border-bottom-right-radius: 5px;
                      "
                      >{{ "All" | translate }}</label
                    >
                  </span>
                </div>
                <!-- <div class="col-sm-6 jobcard">
                                    <label class="control-label txt_lbl">Search and Select Vehicle<span style="color: #c30707; font-weight: bold;"><span style="color: #c30707; font-weight: bold;">*</span></span></label>
                                    <ng-autocomplete
                                        id="spare_search"
                                        formControlName="searchspareVehicle"
                                        [disabled]="foralltrue"
                                        [(ngModel)]="vehiclesearchmodelspl" 
                                        placeHolder	="Search Vehicle by Make, Model, Varraint"  
                                        [data]="searchVehicleDataSpl"
                                        (selected)='selectedResultForVechilespl($event)'
                                        (input)='searchBarForVechilespl($event.target.value)'
                                        [itemTemplate]="itemTemplate"
                                        [notFoundTemplate]="notFoundTemplate">                                 
                                        </ng-autocomplete>
                                        
                                        <ng-template #itemTemplate let-item>
                                        <a [innerHTML]="item"></a>
                                        </ng-template>
                                        
                                        <ng-template #notFoundTemplate let-notFound>
                                        <div [innerHTML]="notFound"></div>
                                        </ng-template>
                                </div>
                                <div class="col-sm-6" *ngIf="SelectedDataarrOfVehiclespl!=undefined">
                                    <label class="control-label txt_lbl">Selected Vehicle</label>
                                    <span class="form-control" style="background: none;border: none;">
                                        <label style="    background: linear-gradient(to bottom, #FF0000 0% , #563b3b 100%);
                                        width: 100px;
                                        height: 26px;
                                        text-align: center;
                                        padding: 3px;
                                        color: white;border-top-left-radius: 5px;border-bottom-left-radius: 5px">{{SelectedDataarrOfVehiclespl.make}}</label>
                                        <label style="background-color: #52524f;
                                        width: 90px;
                                        height: 26px;
                                        text-align: center;
                                        padding: 3px;
                                        color: white;">{{SelectedDataarrOfVehiclespl.model}}</label>
                                        <label *ngIf="SelectedDataarrOfVehiclespl.variant" style="background-color: #52524f;
                                        width: auto;
                                        height: 26px;
                                        text-align: center;
                                        padding: 3px;
                                        color: white;border-top-right-radius: 5px;border-bottom-right-radius: 5px">{{SelectedDataarrOfVehiclespl.variant}}</label>
                                    </span>
                                </div> -->
                <div class="col-sm-12" *ngIf="foralltrue == false">
                  <table
                    class="table table_left table-bordered"
                    style="background-color: #fff"
                  >
                    <thead>
                      <tr>
                        <th style="background-color: #61605d; color: #fff">
                          {{ "Make,Model & Variants" | translate }}
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>
                          <div>
                            <div style="display: flex">
                              <span
                                class="input-group-addon"
                                style="
                                  padding: 0 15px 0 5px;
                                  border-top-left-radius: 5px;
                                  border-bottom-left-radius: 5px;
                                "
                              >
                                <i
                                  style="margin-top: 9px; margin-right: 1rem"
                                  class="fa fa-search fa-1x"
                                  aria-hidden="true"
                                ></i>
                              </span>
                              <span style="width: 100%; text-align: left">
                                <ng-select
                                  id="spare_search_make"
                                  style="width: 100%; text-align: left"
                                  formControlName="searchspareVehicle"
                                  [closeOnSelect]="false"
                                  [virtualScroll]="true"
                                  [multiple]="true"
                                  placeHolder="Search & Add Model, Variants"
                                  (focus)="searchModelVariforCompfo($event)"
                                  (scrollToEnd)="loadMoreDataveh()"
                                  [items]="searchModelvari"
                                  (search)="searchModelVariforComp($event)"
                                  (add)="onAdd($event)"
                                  (remove)="onRemove($event)"
                                >
                                  <ng-template
                                    ng-option-tmp
                                    let-item="item"
                                    let-item$="item$"
                                    let-index="index"
                                  >
                                    <input
                                      id="item-{{ index }}"
                                      type="checkbox"
                                      [ngModel]="item$.selected"
                                      [ngModelOptions]="{
                                        standalone: true
                                      }"
                                    />
                                    {{ item }}
                                  </ng-template>
                                </ng-select>
                              </span>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <label
                class="control-label"
                style="
                  font-size: 16px;
                  border-bottom: 1px solid #ce0e17;
                  margin-bottom: 1%;
                "
                ><b>{{ "Stock Details" | translate }}</b></label
              >
              <div class="form-group">
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "Quantity" | translate
                  }}</label>
                  <input
                    id="qty_spare"
                    type="text"
                    class="form-control cir"
                    formControlName="quantity"
                  />
                  <div
                    *ngIf="
                      CreateSpareForm.controls['quantity'].invalid &&
                      (CreateSpareForm.controls['quantity'].dirty ||
                        CreateSpareForm.controls['quantity'].touched)
                    "
                    class="text-danger"
                  >
                    <div
                      *ngIf="
                        CreateSpareForm.controls['quantity'].errors.pattern
                      "
                    >
                      {{ "Enter a Valid Quantity" | translate }}.
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "Lower Limit" | translate
                  }}</label>
                  <input
                    id="lower_limit_spare"
                    type="text"
                    class="form-control cir"
                    formControlName="lowerlimit"
                  />
                  <div
                    *ngIf="
                      CreateSpareForm.controls['lowerlimit'].invalid &&
                      (CreateSpareForm.controls['lowerlimit'].dirty ||
                        CreateSpareForm.controls['lowerlimit'].touched)
                    "
                    class="text-danger"
                  >
                    <div
                      *ngIf="
                        CreateSpareForm.controls['lowerlimit'].errors.pattern
                      "
                    >
                      {{ "Enter a Valid Lower Limit" | translate }}.
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "Rack Number" | translate
                  }}</label>
                  <input
                    id="rack_no_spare"
                    type="text"
                    class="form-control cir"
                    formControlName="rackno"
                  />
                </div>
              </div>
              <label
                class="control-label"
                style="
                  font-size: 16px;
                  border-bottom: 1px solid #ce0e17;
                  margin-bottom: 1%;
                "
                ><b>{{ "Pricing Details" | translate }}</b></label
              >
              <div class="form-group">
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "Purchase Price" | translate
                  }}</label>
                  <input
                    id="purchase_price_spare"
                    type="text"
                    class="form-control cir"
                    (input)="
                      checkpricefortotal(
                        CreateSpareForm.value.purchaseprice,
                        CreateSpareForm.value.gstslab,
                        CreateSpareForm.value.gsttype
                      )
                    "
                    formControlName="purchaseprice"
                  />
                  <div
                    *ngIf="
                      CreateSpareForm.controls['purchaseprice'].invalid &&
                      (CreateSpareForm.controls['purchaseprice'].dirty ||
                        CreateSpareForm.controls['purchaseprice'].touched)
                    "
                    class="text-danger"
                  >
                    <div
                      *ngIf="
                        CreateSpareForm.controls['purchaseprice'].errors.pattern
                      "
                    >
                      {{ "Enter a Valid Purchase Price" | translate }}.
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl"
                    >{{ "Selling Price" | translate
                    }}<span style="color: #c30707; font-weight: bold"
                      ><span style="color: #c30707; font-weight: bold"
                        >*</span
                      ></span
                    ></label
                  >
                  <input
                    id="selling_price_spare"
                    type="text"
                    class="form-control cir"
                    formControlName="sellingprice"
                  />
                  <div
                    *ngIf="CreateSpareForm.controls['sellingprice'].invalid"
                    class="text-danger"
                  >
                    <div
                      *ngIf="
                        CreateSpareForm.controls['sellingprice'].errors.required
                      "
                    >
                      {{ "Selling Price is required" | translate }}.
                    </div>
                    <div
                      *ngIf="
                        CreateSpareForm.controls['sellingprice'].errors.pattern
                      "
                    >
                      {{ "Enter a Valid Selling Price" | translate }}.
                    </div>
                  </div>
                </div>
              </div>
              <label
                *ngIf="
                  allBillingData != undefined && allBillingData.gst_number != ''
                "
                class="control-label"
                style="
                  font-size: 16px;
                  border-bottom: 1px solid #ce0e17;
                  margin-bottom: 1%;
                "
                ><b>{{ "Tax Details" | translate }}</b></label
              >
              <div
                class="form-group"
                *ngIf="
                  allBillingData != undefined && allBillingData.gst_number != ''
                "
              >
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "HSN Number" | translate
                  }}</label>
                  <input
                    id="gst_no_spare"
                    type="text"
                    class="form-control cir"
                    formControlName="hsnno"
                  />
                </div>
                <div
                  class="col-lg-4 col-sm-4 col-md-4"
                  *ngIf="
                    allBillingData != undefined &&
                    allBillingData.gst_number != ''
                  "
                >
                  <label class="control-label txt_lbl">{{
                    "GST Slab" | translate
                  }}</label>
                  <select
                    id="gst_slab_spare"
                    class="form-control cir"
                    formControlName="gstslab"
                    (change)="
                      checkpricefortotal(
                        CreateSpareForm.value.purchaseprice,
                        CreateSpareForm.value.gstslab,
                        CreateSpareForm.value.gsttype
                      )
                    "
                  >
                    <option
                      *ngFor="let data of gstNumberArr"
                      value="{{ data }}"
                      id="{{ data }}"
                    >
                      {{ data }}
                    </option>
                  </select>
                </div>
                <div
                  class="col-lg-4 col-sm-4 col-md-4"
                  *ngIf="
                    allBillingData != undefined &&
                    allBillingData.gst_number != ''
                  "
                >
                  <label class="control-label txt_lbl">{{
                    "GST Type" | translate
                  }}</label>
                  <select
                    id="gst_type_spare"
                    class="form-control cir"
                    formControlName="gsttype"
                    (change)="
                      checkpricefortotal(
                        CreateSpareForm.value.purchaseprice,
                        CreateSpareForm.value.gstslab,
                        CreateSpareForm.value.gsttype
                      )
                    "
                  >
                    <option
                      *ngFor="let data of gsttype"
                      value="{{ data }}"
                      id="{{ data }}"
                    >
                      {{ data }}
                    </option>
                  </select>
                </div>
              </div>

              <div class="form-group">
                <div class="col-lg-offset-4 col-lg-4">
                  <button
                    type="submit"
                    *ngIf="showSpareUpdate == false"
                    data-dismiss="modal"
                    [disabled]="
                      allSelectedMake == undefined ||
                      CreateSpareForm.pristine ||
                      CreateSpareForm.invalid
                    "
                    (click)="
                      event_handler_create() && createSpareByAPI('create')
                    "
                    class="btn btn-primary cir cir_btn"
                    style="
                      font-size: 12px;
                      margin: 7% 0 0 0;
                      background: linear-gradient(
                        to bottom,
                        #ff0000 0%,
                        #563b3b 100%
                      );
                      border-color: #c30707;
                      font-weight: bold;
                      width: 90%;
                    "
                  >
                    {{ "Create Spare" | translate }}
                  </button>
                  <button
                    type="submit"
                    *ngIf="showSpareUpdate == true"
                    data-dismiss="modal"
                    [disabled]="
                      allSelectedMake == undefined ||
                      CreateSpareForm.pristine ||
                      CreateSpareForm.invalid
                    "
                    (click)="event_handler_edit() && createSpareByAPI('update')"
                    class="btn btn-primary cir cir_btn"
                    style="
                      font-size: 12px;
                      margin: 7% 0 0 0;
                      background: linear-gradient(
                        to bottom,
                        #ff0000 0%,
                        #563b3b 100%
                      );
                      border-color: #c30707;
                      font-weight: bold;
                      width: 90%;
                    "
                  >
                    {{ "Update Spare" | translate }}
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    class="modal inmodal"
    id="add_lubes"
    tabindex="-1"
    role="dialog"
    aria-hidden="true"
    style="background: rgba(0, 0, 0, 0.5)"
  >
    <div class="modal-dialog">
      <div class="modal-content animated">
        <div class="modal-header" style="padding: 0px">
          <div
            class="ibox-title"
            style="
              background-color: #f1f1f1;
              padding: 8px 23px 8px;
              border: none;
              border-bottom: 1px solid #4d4f5c;
            "
          >
            <div class="row">
              <div class="col-lg-6 col-sm-6 col-md-6">
                <h1 style="font-size: 22px; float: left; cursor: pointer">
                  {{ "Add Lubes" | translate }}
                </h1>
              </div>
              <div
                class="col-lg-2 col-sm-2 col-md-2"
                style="margin-top: 1%; float: right"
              >
                <label
                  data-dismiss="modal"
                  class="btn btn-white cir"
                  style="padding: 1px 4px; background: none; border: none"
                  ><i class="fa fa-times fa-2x" aria-hidden="true"></i
                ></label>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-body" style="padding-top: 0">
          <div class="ibox-content">
            <form
              [formGroup]="CreateLubeForm"
              novalidate
              class="form-horizontal"
            >
              <div class="row">
                <div class="col-lg-9 col-sm-9 col-md-9">
                  <label
                    class="control-label"
                    style="
                      font-size: 16px;
                      border-bottom: 1px solid #ce0e17;
                      margin-bottom: 1%;
                    "
                    ><b>{{ "Part Details" | translate }}</b></label
                  >
                  <div class="form-group">
                    <div class="col-lg-5 col-sm-5 col-md-5">
                      <label class="control-label txt_lbl">{{
                        "Lube Number" | translate
                      }}</label>
                      <div class="input-group m-b">
                        <!-- <span class="input-group-addon cir" style="padding: 5%;width: 20%;">
                                                <i class="fa fa-search fa-1x" aria-hidden="true"></i>
                                            </span> 
                                            <input
                                                        type="text"
                                                        id="lube_search"
                                                        class="form-control cir"
                                                        style="border-left: none;"
                                                        placeholder="To Select Spare Search By Part Number"
                                                        formControlName="partnumber"
                                                        [(ngModel)]="lubemodelforcreate"
                                                        [ngbTypeahead]="searchLubeToCreate"
                                                        (ngModelChange)="addselectedLubeResult($event,undefined)"
                                                        #instance="ngbTypeahead"
                                                        disabled
                                                        (input)="searchLubeInputToCreate($event.target.value)"
                                                        /> -->
                        <span class="search_invenall">
                          <ng-autocomplete
                            [disabled]="showLubeUpdate"
                            formControlName="partnumber"
                            (scrolledToEnd)="loadMoreDatalube()"
                            [(ngModel)]="lubemodelforcreate"
                            placeHolder=""
                            [data]="searchLubeData"
                            (selected)="addselectedLubeResultlube($event)"
                            (input)="searchLubeInputnew($event.target.value)"
                            [itemTemplate]="itemTemplate"
                            [notFoundTemplate]="notFoundTemplate"
                          >
                          </ng-autocomplete>

                          <ng-template #itemTemplate let-item>
                            <a [innerHTML]="item"></a>
                          </ng-template>

                          <ng-template #notFoundTemplate let-notFound>
                            <div [innerHTML]="notFound"></div>
                          </ng-template>
                        </span>
                      </div>
                    </div>
                    <div class="col-lg-5 col-sm-5 col-md-5">
                      <label class="control-label txt_lbl"
                        >{{ "Lube Name" | translate
                        }}<span style="color: #c30707; font-weight: bold"
                          ><span style="color: #c30707; font-weight: bold"
                            >*</span
                          ></span
                        ></label
                      >
                      <input
                        id="lube_name"
                        type="text"
                        class="form-control cir"
                        formControlName="partname"
                      />
                      <div
                        *ngIf="CreateLubeForm.controls['partname'].invalid"
                        class="text-danger"
                      >
                        <div
                          *ngIf="
                            CreateLubeForm.controls['partname'].errors.required
                          "
                        >
                          {{ "Part Name is required" | translate }}.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-sm-6 jobcard">
                      <label class="control-label txt_lbl">{{
                        "Lube Company" | translate
                      }}</label>
                      <!-- <input id="company_name_lube" type="text" class="form-control cir" formControlName="companynameLube"> -->
                      <ng-autocomplete
                        id="lube_company_search"
                        formControlName="companynameLube"
                        [(ngModel)]="lubecompanyname"
                        placeHolder="{{ 'Search Lube Company' | translate }}"
                        [data]="searchLubeCompany"
                        (selected)="selectedcomapny($event, 'lube')"
                        (input)="
                          searchBarForCompanyLube($event.target.value, 'lube')
                        "
                        [itemTemplate]="itemTemplate"
                        [notFoundTemplate]="notFoundTemplate"
                      >
                      </ng-autocomplete>

                      <ng-template #itemTemplate let-item>
                        <a [innerHTML]="item"></a>
                      </ng-template>

                      <ng-template #notFoundTemplate let-notFound>
                        <div [innerHTML]="notFound"></div>
                      </ng-template>
                      <div
                        *ngIf="
                          CreateLubeForm.controls['companynameLube'].invalid
                        "
                        class="text-danger"
                      >
                        <div
                          *ngIf="
                            CreateLubeForm.controls['companynameLube'].errors
                              .required
                          "
                        >
                          {{ "Lube Company is required" | translate }}.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-sm-8">
                      <label class="control-label txt_lbl">{{
                        "Unit" | translate
                      }}</label>
                      <select
                        id="unit_lube"
                        class="form-control cir"
                        formControlName="unit"
                      >
                        <option *ngFor="let data of units" value="{{ data }}">
                          {{ data }}
                        </option>
                      </select>
                    </div>
                    <!-- <div class="col-lg-4 col-sm-4 col-md-4">
                                        <label class="control-label txt_lbl">Sub Category</label>
                                        <select class="form-control cir" formControlName="subcategory">
                                            <option *ngFor="let data of spareCategory" value="{{data}}">
                                                {{data}}
                                            </option>
                                        </select>
                                    </div> -->
                  </div>
                </div>
                <div class="col-sm-3" style="text-align: right">
                  <label class="control-label"
                    ><b>{{ "Total Amount" | translate }}</b></label
                  >
                  <br />
                  <label class="control-label"
                    ><h2
                      style="
                        color: #54545e;
                        padding-top: 0;
                        font-size: 20px;
                        margin: 0;
                      "
                    >
                      <b>{{ "Rs" | translate }}. {{ totalamountonform }}</b>
                    </h2></label
                  >
                  <br />
                  <label
                    *ngIf="
                      allBillingData != undefined &&
                      allBillingData.gst_number != ''
                    "
                    class="control-label"
                    style="margin: 0; font-weight: 500; padding-top: 0"
                    >{{ "CGST" | translate }} {{ toShowcgst }}</label
                  >
                  <br />
                  <label
                    *ngIf="
                      allBillingData != undefined &&
                      allBillingData.gst_number != ''
                    "
                    class="control-label"
                    style="margin: 0; font-weight: 500; padding-top: 0"
                    >{{ "SGST" | translate }} {{ toShowsgst }}</label
                  >
                  <br />
                  <label
                    *ngIf="
                      allBillingData != undefined &&
                      allBillingData.gst_number != ''
                    "
                    class="control-label"
                    style="margin: 0; font-weight: 500; padding-top: 0"
                    >{{ "GST" | translate }} {{ toShowtotal_gst }}</label
                  >
                  <br />
                </div>
              </div>
              <div class="col-sm-12">
                <label
                  class="control-label"
                  style="
                    font-size: 16px;
                    border-bottom: 1px solid #ce0e17;
                    margin-bottom: 1%;
                  "
                  ><b>{{ "Compatible For" | translate }}</b></label
                >
                <span class="for_all" style="margin-left: 43px">
                  <label class="control-label txt_lbl">{{
                    "For All Vehicles" | translate
                  }}</label>
                  <input
                    *ngIf="foralltrue == false"
                    style="margin-left: 6px"
                    type="checkbox"
                    data-toggle="toggle"
                    (change)="forAllVehicles($event)"
                  />
                  <input
                    *ngIf="foralltrue == true"
                    checked
                    style="margin-left: 6px"
                    type="checkbox"
                    data-toggle="toggle"
                    (change)="forAllVehicles($event)"
                  />
                </span>
              </div>
              <div class="form-group">
                <div class="col-sm-6" *ngIf="foralltrue == true">
                  <label class="control-label txt_lbl">{{
                    "Selected Vehicle" | translate
                  }}</label>
                  <span
                    class="form-control"
                    style="background: none; border: none"
                  >
                    <label
                      style="
                        background: linear-gradient(
                          to bottom,
                          #ff0000 0%,
                          #563b3b 100%
                        );
                        width: 100px;
                        height: 26px;
                        text-align: center;
                        padding: 3px;
                        color: white;
                        border-top-left-radius: 5px;
                        border-bottom-left-radius: 5px;
                      "
                      >{{ "All" | translate }}</label
                    >
                    <label
                      style="
                        background-color: #52524f;
                        width: 90px;
                        height: 26px;
                        text-align: center;
                        padding: 3px;
                        color: white;
                      "
                      >{{ "All" | translate }}</label
                    >
                    <label
                      style="
                        background-color: #52524f;
                        width: auto;
                        height: 26px;
                        text-align: center;
                        padding: 3px;
                        color: white;
                        border-top-right-radius: 5px;
                        border-bottom-right-radius: 5px;
                      "
                      >{{ "All" | translate }}</label
                    >
                  </span>
                </div>
                <!-- <div class="col-sm-6 jobcard">
                                <label class="control-label txt_lbl">Search and Select Vehicle<span style="color: #c30707; font-weight: bold;"><span style="color: #c30707; font-weight: bold;">*</span></span></label>
                                <ng-autocomplete
                                    id="spare_search"
                                    formControlName="searchspareVehicle"
                                    [disabled]="foralltrue"
                                    [(ngModel)]="vehiclesearchmodelspl" 
                                    placeHolder	="Search Vehicle by Make, Model, Varraint"  
                                    [data]="searchVehicleDataSpl"
                                    (selected)='selectedResultForVechilespl($event)'
                                    (input)='searchBarForVechilespl($event.target.value)'
                                    [itemTemplate]="itemTemplate"
                                    [notFoundTemplate]="notFoundTemplate">                                 
                                    </ng-autocomplete>
                                    
                                    <ng-template #itemTemplate let-item>
                                    <a [innerHTML]="item"></a>
                                    </ng-template>
                                    
                                    <ng-template #notFoundTemplate let-notFound>
                                    <div [innerHTML]="notFound"></div>
                                    </ng-template>
                            </div>
                            <div class="col-sm-6" *ngIf="SelectedDataarrOfVehiclespl!=undefined">
                                <label class="control-label txt_lbl">Selected Vehicle</label>
                                <span class="form-control" style="background: none;border: none;">
                                    <label style="    background: linear-gradient(to bottom, #FF0000 0% , #563b3b 100%);
                                    width: 100px;
                                    height: 26px;
                                    text-align: center;
                                    padding: 3px;
                                    color: white;border-top-left-radius: 5px;border-bottom-left-radius: 5px">{{SelectedDataarrOfVehiclespl.make}}</label>
                                    <label style="background-color: #52524f;
                                    width: 90px;
                                    height: 26px;
                                    text-align: center;
                                    padding: 3px;
                                    color: white;">{{SelectedDataarrOfVehiclespl.model}}</label>
                                    <label *ngIf="SelectedDataarrOfVehiclespl.variant" style="background-color: #52524f;
                                    width: auto;
                                    height: 26px;
                                    text-align: center;
                                    padding: 3px;
                                    color: white;border-top-right-radius: 5px;border-bottom-right-radius: 5px">{{SelectedDataarrOfVehiclespl.variant}}</label>
                                </span>
                            </div> -->
                <div class="col-sm-12" *ngIf="foralltrue == false">
                  <table
                    class="table table_left table-bordered"
                    style="background-color: #fff"
                  >
                    <thead>
                      <tr>
                        <th style="background-color: #61605d; color: #fff">
                          {{ "Make,Model & Variants" | translate }}
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>
                          <div>
                            <div style="display: flex">
                              <span
                                class="input-group-addon"
                                style="
                                  padding: 0 15px 0 5px;
                                  border-top-left-radius: 5px;
                                  border-bottom-left-radius: 5px;
                                "
                              >
                                <i
                                  style="margin-top: 9px; margin-right: 1rem"
                                  class="fa fa-search fa-1x"
                                  aria-hidden="true"
                                ></i>
                              </span>
                              <span style="width: 100%; text-align: left">
                                <ng-select
                                  id="spare_search_make"
                                  style="width: 100%; text-align: left"
                                  formControlName="searchspareVehicle"
                                  [closeOnSelect]="false"
                                  [virtualScroll]="true"
                                  [multiple]="true"
                                  placeHolder="Search & Add Model, Variants"
                                  (focus)="searchModelVariforCompfo($event)"
                                  (scrollToEnd)="loadMoreDataveh()"
                                  [items]="searchModelvari"
                                  (search)="searchModelVariforComp($event)"
                                  (add)="onAdd($event)"
                                  (remove)="onRemove($event)"
                                >
                                  <ng-template
                                    ng-option-tmp
                                    let-item="item"
                                    let-item$="item$"
                                    let-index="index"
                                  >
                                    <input
                                      id="item-{{ index }}"
                                      type="checkbox"
                                      [ngModel]="item$.selected"
                                      [ngModelOptions]="{
                                        standalone: true
                                      }"
                                    />
                                    {{ item }}
                                  </ng-template>
                                </ng-select>
                              </span>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <label
                class="control-label"
                style="
                  font-size: 16px;
                  border-bottom: 1px solid #ce0e17;
                  margin-bottom: 1%;
                "
                ><b>{{ "Stock Details" | translate }}</b></label
              >
              <div class="form-group">
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "Quantity" | translate
                  }}</label>
                  <input
                    id="lube_qty"
                    type="text"
                    class="form-control cir"
                    formControlName="quantity"
                  />
                  <div
                    *ngIf="
                      CreateLubeForm.controls['quantity'].invalid &&
                      (CreateLubeForm.controls['quantity'].dirty ||
                        CreateLubeForm.controls['quantity'].touched)
                    "
                    class="text-danger"
                  >
                    <div
                      *ngIf="CreateLubeForm.controls['quantity'].errors.pattern"
                    >
                      {{ "Enter a Valid Quantity" | translate }}.
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "Lower Limit" | translate
                  }}</label>
                  <input
                    id="lube_lower_limit"
                    type="text"
                    class="form-control cir"
                    formControlName="lowerlimit"
                  />
                  <div
                    *ngIf="
                      CreateLubeForm.controls['lowerlimit'].invalid &&
                      (CreateLubeForm.controls['lowerlimit'].dirty ||
                        CreateLubeForm.controls['lowerlimit'].touched)
                    "
                    class="text-danger"
                  >
                    <div
                      *ngIf="
                        CreateLubeForm.controls['lowerlimit'].errors.pattern
                      "
                    >
                      {{ "Enter a Valid Lower Limit" | translate }}.
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "Rack Number" | translate
                  }}</label>
                  <input
                    id="rack_no_lube"
                    type="text"
                    class="form-control cir"
                    formControlName="rackno"
                  />
                </div>
              </div>
              <label
                class="control-label"
                style="
                  font-size: 16px;
                  border-bottom: 1px solid #ce0e17;
                  margin-bottom: 1%;
                "
                ><b>{{ "Pricing Details" | translate }}</b></label
              >
              <div class="form-group">
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "Purchase Price" | translate
                  }}</label>
                  <input
                    id="purchase_price_lube"
                    type="text"
                    class="form-control cir"
                    (input)="
                      checkpricefortotal(
                        CreateLubeForm.value.purchaseprice,
                        CreateLubeForm.value.gstslab,
                        CreateLubeForm.value.gsttype
                      )
                    "
                    formControlName="purchaseprice"
                  />
                  <div
                    *ngIf="
                      CreateLubeForm.controls['purchaseprice'].invalid &&
                      (CreateLubeForm.controls['purchaseprice'].dirty ||
                        CreateLubeForm.controls['purchaseprice'].touched)
                    "
                    class="text-danger"
                  >
                    <div
                      *ngIf="
                        CreateLubeForm.controls['purchaseprice'].errors.pattern
                      "
                    >
                      {{ "Enter a Valid Purchase Price" | translate }}.
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl"
                    >{{ "Selling Price" | translate
                    }}<span style="color: #c30707; font-weight: bold"
                      ><span style="color: #c30707; font-weight: bold"
                        >*</span
                      ></span
                    ></label
                  >
                  <input
                    id="selling_price_lube"
                    type="text"
                    class="form-control cir"
                    formControlName="sellingprice"
                  />
                  <div
                    *ngIf="CreateLubeForm.controls['sellingprice'].invalid"
                    class="text-danger"
                  >
                    <div
                      *ngIf="
                        CreateLubeForm.controls['sellingprice'].errors.required
                      "
                    >
                      {{ "Selling Price is required" | translate }}.
                    </div>
                    <div
                      *ngIf="
                        CreateLubeForm.controls['sellingprice'].errors.pattern
                      "
                    >
                      {{ "Enter a Valid Selling Price" | translate }}.
                    </div>
                  </div>
                </div>
              </div>
              <label
                *ngIf="
                  allBillingData != undefined && allBillingData.gst_number != ''
                "
                class="control-label"
                style="
                  font-size: 16px;
                  border-bottom: 1px solid #ce0e17;
                  margin-bottom: 1%;
                "
                ><b>{{ "Tax Details" | translate }}</b></label
              >
              <div
                class="form-group"
                *ngIf="
                  allBillingData != undefined && allBillingData.gst_number != ''
                "
              >
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "HSN Number" | translate
                  }}</label>
                  <input
                    id="hsn_no_lube"
                    type="text"
                    class="form-control cir"
                    formControlName="hsnno"
                  />
                </div>
                <div
                  class="col-lg-4 col-sm-4 col-md-4"
                  *ngIf="
                    allBillingData != undefined &&
                    allBillingData.gst_number != ''
                  "
                >
                  <label class="control-label txt_lbl">{{
                    "GST Slab" | translate
                  }}</label>
                  <select
                    id="gst_slab_lube"
                    class="form-control cir"
                    formControlName="gstslab"
                    (change)="
                      checkpricefortotal(
                        CreateLubeForm.value.purchaseprice,
                        CreateLubeForm.value.gstslab,
                        CreateLubeForm.value.gsttype
                      )
                    "
                  >
                    <option
                      *ngFor="let data of gstNumberArr"
                      value="{{ data }}"
                      id="{{ data }}"
                    >
                      {{ data }}
                    </option>
                  </select>
                </div>
                <div
                  class="col-lg-4 col-sm-4 col-md-4"
                  *ngIf="
                    allBillingData != undefined &&
                    allBillingData.gst_number != ''
                  "
                >
                  <label class="control-label txt_lbl">{{
                    "GST Type" | translate
                  }}</label>
                  <select
                    id="gst_type_lube"
                    class="form-control cir"
                    formControlName="gsttype"
                    (change)="
                      checkpricefortotal(
                        CreateLubeForm.value.purchaseprice,
                        CreateLubeForm.value.gstslab,
                        CreateLubeForm.value.gsttype
                      )
                    "
                  >
                    <option
                      *ngFor="let data of gsttype"
                      value="{{ data }}"
                      id="{{ data }}"
                    >
                      {{ data }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="form-group">
                <div class="col-lg-offset-4 col-lg-4">
                  <button
                    type="submit"
                    *ngIf="showLubeUpdate == false"
                    data-dismiss="modal"
                    [disabled]="
                      allSelectedMake == undefined ||
                      CreateLubeForm.pristine ||
                      CreateLubeForm.invalid
                    "
                    (click)="
                      event_handler_create() && createLubeByAPI('create')
                    "
                    class="btn btn-primary cir cir_btn"
                    style="
                      font-size: 12px;
                      margin: 7% 0 0 0;
                      background: linear-gradient(
                        to bottom,
                        #ff0000 0%,
                        #563b3b 100%
                      );
                      border-color: #c30707;
                      font-weight: bold;
                      width: 90%;
                    "
                  >
                    {{ "Create Lube" | translate }}
                  </button>
                  <button
                    type="submit"
                    *ngIf="showLubeUpdate == true"
                    data-dismiss="modal"
                    [disabled]="
                      allSelectedMake == undefined ||
                      CreateLubeForm.pristine ||
                      CreateLubeForm.invalid
                    "
                    (click)="event_handler_edit() && createLubeByAPI('update')"
                    class="btn btn-primary cir cir_btn"
                    style="
                      font-size: 12px;
                      margin: 7% 0 0 0;
                      background: linear-gradient(
                        to bottom,
                        #ff0000 0%,
                        #563b3b 100%
                      );
                      border-color: #c30707;
                      font-weight: bold;
                      width: 90%;
                    "
                  >
                    {{ "Update Lube" | translate }}
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    class="modal inmodal"
    id="add_jobs"
    tabindex="-1"
    role="dialog"
    aria-hidden="true"
    style="background: rgba(0, 0, 0, 0.5)"
  >
    <div class="modal-dialog" style="margin-right: -17px">
      <div class="modal-content animated">
        <div class="modal-header" style="padding: 0px">
          <div
            class="ibox-title"
            style="
              background-color: #f1f1f1;
              padding: 8px 23px 8px;
              border: none;
              border-bottom: 1px solid #4d4f5c;
            "
          >
            <div class="row">
              <div class="col-lg-6 col-sm-6 col-md-6">
                <h1 style="font-size: 22px; float: left; cursor: pointer">
                  {{ "Add Jobs" | translate }}
                </h1>
              </div>

              <div
                class="col-lg-2 col-sm-2 col-md-2"
                style="margin-top: 1%; float: right"
              >
                <label
                  data-dismiss="modal"
                  class="btn btn-white cir"
                  style="padding: 1px 4px; background: none; border: none"
                  ><i class="fa fa-times fa-2x" aria-hidden="true"></i
                ></label>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-body" style="padding-top: 0">
          <div class="ibox-content">
            <form
              [formGroup]="CreateJobForm"
              novalidate
              class="form-horizontal"
            >
              <div class="row">
                <div class="col-lg-9 col-sm-9 col-md-9">
                  <label
                    class="control-label"
                    style="
                      font-size: 16px;
                      border-bottom: 1px solid #ce0e17;
                      margin-bottom: 1%;
                    "
                    ><b>{{ "Job Details" | translate }}</b></label
                  >
                  <div class="form-group">
                    <div class="col-lg-5 col-sm-5 col-md-5">
                      <label class="control-label txt_lbl">{{
                        "Job Code" | translate
                      }}</label>
                      <div class="input-group m-b">
                        <!-- <span class="input-group-addon cir" style="padding: 5%;width: 20%;">
                                                <i class="fa fa-search fa-1x" aria-hidden="true"></i>
                                            </span>  -->

                        <span class="search_invenall">
                          <ng-autocomplete
                            [disabled]="showJobUpdate"
                            formControlName="partnumber"
                            (scrolledToEnd)="loadMoreDatajobs()"
                            [(ngModel)]="jobmodelforcreate"
                            placeHolder=""
                            [data]="searchJobData"
                            (selected)="addselectedJobResultnew($event)"
                            (input)="searchJobInput($event.target.value)"
                            [itemTemplate]="itemTemplate"
                            [notFoundTemplate]="notFoundTemplate"
                          >
                          </ng-autocomplete>

                          <ng-template #itemTemplate let-item>
                            <a [innerHTML]="item"></a>
                          </ng-template>

                          <ng-template #notFoundTemplate let-notFound>
                            <div [innerHTML]="notFound"></div>
                          </ng-template>
                        </span>
                        <!-- <div *ngIf="CreateJobForm.controls['partnumber'].invalid && (CreateJobForm.controls['partnumber'].dirty || CreateJobForm.controls['partnumber'].touched)" class="text-danger">
                                                            <div *ngIf="CreateJobForm.controls['partnumber'].errors.required">
                                                            Part Number is required.
                                                          </div>
                                                        </div> -->
                      </div>
                    </div>
                    <div class="col-lg-5 col-sm-5 col-md-5">
                      <label class="control-label txt_lbl"
                        >{{ "Job Name" | translate
                        }}<span style="color: #c30707; font-weight: bold"
                          ><span style="color: #c30707; font-weight: bold"
                            >*</span
                          ></span
                        ></label
                      >
                      <input
                        id="job_name"
                        type="text"
                        class="form-control cir"
                        formControlName="partname"
                      />
                      <div
                        *ngIf="CreateJobForm.controls['partname'].invalid"
                        class="text-danger"
                      >
                        <div
                          *ngIf="
                            CreateJobForm.controls['partname'].errors.required
                          "
                        >
                          {{ "Job Name is required" | translate }}.
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- <div class="form-group">
                                    <div class="col-lg-5 col-sm-5 col-md-5">
                                        <label class="control-label txt_lbl">Company Name</label>
                                        <input type="text" class="form-control cir" formControlName="companynameJob">
                                    </div>
                                </div> -->
                  <div class="form-group">
                    <div class="col-lg-4 col-sm-4 col-md-4">
                      <label class="control-label txt_lbl">{{
                        "Unit" | translate
                      }}</label>
                      <select class="form-control cir" formControlName="unit">
                        <option
                          *ngFor="let data of unitsjob"
                          value="{{ data }}"
                        >
                          {{ data }}
                        </option>
                      </select>
                    </div>
                    <div class="col-sm-8">
                      <label class="control-label txt_lbl">{{
                        "Sub Category" | translate
                      }}</label>
                      <select
                        class="form-control cir"
                        formControlName="subcategory"
                      >
                        <option
                          *ngFor="let data of JobCategory"
                          value="{{ data }}"
                          id="{{ data }}"
                        >
                          {{ data }}
                        </option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="col-sm-3" style="text-align: right">
                  <label class="control-label"
                    ><b>{{ "Total Amount" | translate }}</b></label
                  >
                  <br />
                  <label class="control-label"
                    ><h2
                      style="
                        color: #54545e;
                        padding-top: 0;
                        font-size: 20px;
                        margin: 0;
                      "
                    >
                      <b>{{ "Rs" | translate }}. {{ totalamountonform }}</b>
                    </h2></label
                  >
                  <br />
                  <label
                    *ngIf="
                      allBillingData != undefined &&
                      allBillingData.gst_number != ''
                    "
                    class="control-label"
                    style="margin: 0; font-weight: 500; padding-top: 0"
                    >{{ "CGST" | translate }} {{ toShowcgst }}</label
                  >
                  <br />
                  <label
                    *ngIf="
                      allBillingData != undefined &&
                      allBillingData.gst_number != ''
                    "
                    class="control-label"
                    style="margin: 0; font-weight: 500; padding-top: 0"
                    >{{ "SGST" | translate }} {{ toShowsgst }}</label
                  >
                  <br />
                  <label
                    *ngIf="
                      allBillingData != undefined &&
                      allBillingData.gst_number != ''
                    "
                    class="control-label"
                    style="margin: 0; font-weight: 500; padding-top: 0"
                    >{{ "GST" | translate }} {{ toShowtotal_gst }}</label
                  >
                  <br />
                </div>
              </div>
              <div class="col-sm-12">
                <label
                  class="control-label"
                  style="
                    font-size: 16px;
                    border-bottom: 1px solid #ce0e17;
                    margin-bottom: 1%;
                  "
                  ><b>{{ "Compatible For" | translate }}</b></label
                >
                <span class="for_all" style="margin-left: 43px">
                  <label class="control-label txt_lbl">{{
                    "For All Vehicles" | translate
                  }}</label>
                  <input
                    *ngIf="foralltrue == false"
                    style="margin-left: 6px"
                    type="checkbox"
                    data-toggle="toggle"
                    (change)="forAllVehicles($event)"
                  />
                  <input
                    *ngIf="foralltrue == true"
                    checked
                    style="margin-left: 6px"
                    type="checkbox"
                    data-toggle="toggle"
                    (change)="forAllVehicles($event)"
                  />
                </span>
              </div>
              <div class="form-group">
                <div class="col-sm-6" *ngIf="foralltrue == true">
                  <label class="control-label txt_lbl">{{
                    "Selected Vehicle" | translate
                  }}</label>
                  <span
                    class="form-control"
                    style="background: none; border: none"
                  >
                    <label
                      style="
                        background: linear-gradient(
                          to bottom,
                          #ff0000 0%,
                          #563b3b 100%
                        );
                        width: 100px;
                        height: 26px;
                        text-align: center;
                        padding: 3px;
                        color: white;
                        border-top-left-radius: 5px;
                        border-bottom-left-radius: 5px;
                      "
                      >{{ "All" | translate }}</label
                    >
                    <label
                      style="
                        background-color: #52524f;
                        width: 90px;
                        height: 26px;
                        text-align: center;
                        padding: 3px;
                        color: white;
                      "
                      >{{ "All" | translate }}</label
                    >
                    <label
                      style="
                        background-color: #52524f;
                        width: auto;
                        height: 26px;
                        text-align: center;
                        padding: 3px;
                        color: white;
                        border-top-right-radius: 5px;
                        border-bottom-right-radius: 5px;
                      "
                      >{{ "All" | translate }}</label
                    >
                  </span>
                </div>
                <!-- <div class="col-sm-6 jobcard">
                                <label class="control-label txt_lbl">Search and Select Vehicle<span style="color: #c30707; font-weight: bold;"><span style="color: #c30707; font-weight: bold;">*</span></span></label>
                                <ng-autocomplete
                                    id="spare_search"
                                    formControlName="searchspareVehicle"
                                    [disabled]="foralltrue"
                                    [(ngModel)]="vehiclesearchmodelspl" 
                                    placeHolder	="Search Vehicle by Make, Model, Varraint"  
                                    [data]="searchVehicleDataSpl"
                                    (selected)='selectedResultForVechilespl($event)'
                                    (input)='searchBarForVechilespl($event.target.value)'
                                    [itemTemplate]="itemTemplate"
                                    [notFoundTemplate]="notFoundTemplate">                                 
                                    </ng-autocomplete>
                                    
                                    <ng-template #itemTemplate let-item>
                                    <a [innerHTML]="item"></a>
                                    </ng-template>
                                    
                                    <ng-template #notFoundTemplate let-notFound>
                                    <div [innerHTML]="notFound"></div>
                                    </ng-template>
                            </div>
                            <div class="col-sm-6" *ngIf="SelectedDataarrOfVehiclespl!=undefined">
                                <label class="control-label txt_lbl">Selected Vehicle</label>
                                <span class="form-control" style="background: none;border: none;">
                                    <label style="    background: linear-gradient(to bottom, #FF0000 0% , #563b3b 100%);
                                    width: 100px;
                                    height: 26px;
                                    text-align: center;
                                    padding: 3px;
                                    color: white;border-top-left-radius: 5px;border-bottom-left-radius: 5px">{{SelectedDataarrOfVehiclespl.make}}</label>
                                    <label style="background-color: #52524f;
                                    width: 90px;
                                    height: 26px;
                                    text-align: center;
                                    padding: 3px;
                                    color: white;">{{SelectedDataarrOfVehiclespl.model}}</label>
                                    <label *ngIf="SelectedDataarrOfVehiclespl.variant" style="background-color: #52524f;
                                    width: auto;
                                    height: 26px;
                                    text-align: center;
                                    padding: 3px;
                                    color: white;border-top-right-radius: 5px;border-bottom-right-radius: 5px">{{SelectedDataarrOfVehiclespl.variant}}</label>
                                </span>
                            </div> -->
                <div class="col-sm-12" *ngIf="foralltrue == false">
                  <table
                    class="table table_left table-bordered"
                    style="background-color: #fff"
                  >
                    <thead>
                      <tr>
                        <th style="background-color: #61605d; color: #fff">
                          {{ "Make,Model & Variants" | translate }}
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>
                          <div>
                            <div style="display: flex">
                              <span
                                class="input-group-addon"
                                style="
                                  padding: 0 15px 0 5px;
                                  border-top-left-radius: 5px;
                                  border-bottom-left-radius: 5px;
                                "
                              >
                                <i
                                  style="margin-top: 9px; margin-right: 1rem"
                                  class="fa fa-search fa-1x"
                                  aria-hidden="true"
                                ></i>
                              </span>
                              <span style="width: 100%; text-align: left">
                                <ng-select
                                  id="spare_search_make"
                                  style="width: 100%; text-align: left"
                                  formControlName="searchspareVehicle"
                                  [closeOnSelect]="false"
                                  [virtualScroll]="true"
                                  [multiple]="true"
                                  placeHolder="Search & Add Model, Variants"
                                  (focus)="searchModelVariforCompfo($event)"
                                  (scrollToEnd)="loadMoreDataveh()"
                                  [items]="searchModelvari"
                                  (search)="searchModelVariforComp($event)"
                                  (add)="onAdd($event)"
                                  (remove)="onRemove($event)"
                                >
                                  <ng-template
                                    ng-option-tmp
                                    let-item="item"
                                    let-item$="item$"
                                    let-index="index"
                                  >
                                    <input
                                      id="item-{{ index }}"
                                      type="checkbox"
                                      [ngModel]="item$.selected"
                                      [ngModelOptions]="{
                                        standalone: true
                                      }"
                                    />
                                    {{ item }}
                                  </ng-template>
                                </ng-select>
                              </span>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <label
                class="control-label"
                style="
                  font-size: 16px;
                  border-bottom: 1px solid #ce0e17;
                  margin-bottom: 1%;
                "
                ><b>{{ "Pricing Details" | translate }}</b></label
              >
              <div class="form-group">
                <!-- <div class="col-lg-4 col-sm-4 col-md-4">
                                <label class="control-label txt_lbl">Purchase Price</label>
                                <input type="text" class="form-control cir" formControlName="purchaseprice">
                                <div *ngIf="CreateJobForm.controls['purchaseprice'].invalid && (CreateJobForm.controls['purchaseprice'].dirty || CreateJobForm.controls['purchaseprice'].touched)" class="text-danger">
                                  <div *ngIf="CreateJobForm.controls['purchaseprice'].errors.pattern">
                                    Enter a Valid Purchase Price.
                                  </div>
                                </div>
                            </div> -->
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl"
                    >{{ "Job Price" | translate
                    }}<span style="color: #c30707; font-weight: bold"
                      ><span style="color: #c30707; font-weight: bold"
                        >*</span
                      ></span
                    ></label
                  >
                  <input
                    id="job_price"
                    type="text"
                    class="form-control cir"
                    (input)="
                      checkpricefortotal(
                        CreateJobForm.value.sellingprice,
                        CreateJobForm.value.gstslab,
                        CreateJobForm.value.gsttype
                      )
                    "
                    formControlName="sellingprice"
                  />
                  <div
                    *ngIf="CreateJobForm.controls['sellingprice'].invalid"
                    class="text-danger"
                  >
                    <div
                      *ngIf="
                        CreateJobForm.controls['sellingprice'].errors.required
                      "
                    >
                      {{ "Job Price is required" | translate }}.
                    </div>
                    <div
                      *ngIf="
                        CreateJobForm.controls['sellingprice'].errors.pattern
                      "
                    >
                      {{ "Enter a Valid Job Price" | translate }}.
                    </div>
                  </div>
                </div>
              </div>
              <label
                *ngIf="
                  allBillingData != undefined && allBillingData.gst_number != ''
                "
                class="control-label"
                style="
                  font-size: 16px;
                  border-bottom: 1px solid #ce0e17;
                  margin-bottom: 1%;
                "
                ><b>{{ "Tax Details" | translate }}</b></label
              >
              <div
                class="form-group"
                *ngIf="
                  allBillingData != undefined && allBillingData.gst_number != ''
                "
              >
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "HSN Number" | translate
                  }}</label>
                  <input
                    id="hsn_no1"
                    type="text"
                    class="form-control cir"
                    formControlName="hsnno"
                  />
                </div>
                <div
                  class="col-lg-4 col-sm-4 col-md-4"
                  *ngIf="
                    allBillingData != undefined &&
                    allBillingData.gst_number != ''
                  "
                >
                  <label class="control-label txt_lbl">{{
                    "GST Slab" | translate
                  }}</label>
                  <select
                    id="gst_slab1"
                    class="form-control cir"
                    formControlName="gstslab"
                    (change)="
                      checkpricefortotal(
                        CreateJobForm.value.sellingprice,
                        CreateJobForm.value.gstslab,
                        CreateJobForm.value.gsttype
                      )
                    "
                  >
                    <option
                      *ngFor="let data of gstNumberArr"
                      value="{{ data }}"
                      id="{{ data }}"
                    >
                      {{ data }}
                    </option>
                  </select>
                </div>
                <div
                  class="col-lg-4 col-sm-4 col-md-4"
                  *ngIf="
                    allBillingData != undefined &&
                    allBillingData.gst_number != ''
                  "
                >
                  <label class="control-label txt_lbl">{{
                    "GST Type" | translate
                  }}</label>
                  <select
                    id="gst_type1"
                    class="form-control cir"
                    formControlName="gsttype"
                    (change)="
                      checkpricefortotal(
                        CreateJobForm.value.sellingprice,
                        CreateJobForm.value.gstslab,
                        CreateJobForm.value.gsttype
                      )
                    "
                  >
                    <option
                      *ngFor="let data of gsttype"
                      value="{{ data }}"
                      id="{{ data }}"
                    >
                      {{ data }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="form-group">
                <div class="col-lg-offset-4 col-lg-4">
                  <button
                    type="submit"
                    *ngIf="showJobUpdate == false"
                    data-dismiss="modal"
                    [disabled]="
                      allSelectedMake == undefined ||
                      CreateJobForm.pristine ||
                      CreateJobForm.invalid
                    "
                    (click)="event_handler_create() && createJobByAPI('create')"
                    class="btn btn-primary cir cir_btn"
                    style="
                      font-size: 12px;
                      margin: 7% 0 0 0;
                      background: linear-gradient(
                        to bottom,
                        #ff0000 0%,
                        #563b3b 100%
                      );
                      border-color: #c30707;
                      font-weight: bold;
                      width: 90%;
                    "
                  >
                    {{ "Create Job" | translate }}
                  </button>
                  <button
                    type="submit"
                    *ngIf="showJobUpdate == true"
                    data-dismiss="modal"
                    [disabled]="
                      allSelectedMake == undefined ||
                      CreateJobForm.pristine ||
                      CreateJobForm.invalid
                    "
                    (click)="event_handler_edit() && createJobByAPI('update')"
                    class="btn btn-primary cir cir_btn"
                    style="
                      font-size: 12px;
                      margin: 7% 0 0 0;
                      background: linear-gradient(
                        to bottom,
                        #ff0000 0%,
                        #563b3b 100%
                      );
                      border-color: #c30707;
                      font-weight: bold;
                      width: 90%;
                    "
                  >
                    {{ "Update Job" | translate }}
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    class="modal inmodal"
    id="add_groups"
    tabindex="-1"
    role="dialog"
    aria-hidden="true"
    style="background: rgba(0, 0, 0, 0.5)"
  >
    <div class="modal-dialog" style="margin-right: -17px">
      <div class="modal-content animated" style="">
        <div class="modal-header" style="padding: 0px">
          <div
            class="ibox-title"
            style="
              background-color: #f1f1f1;
              padding: 8px 23px 8px;
              border: none;
              border-bottom: 1px solid #4d4f5c;
            "
          >
            <div class="row">
              <div class="col-lg-6 col-sm-6 col-md-6">
                <h1 style="font-size: 22px; float: left; cursor: pointer">
                  {{ isGroupEdit ? "Edit Group" : ("Add Group" | translate) }}
                </h1>
              </div>

              <div
                class="col-lg-2 col-sm-2 col-md-2"
                style="margin-top: 1%; float: right"
              >
                <label
                  data-dismiss="modal"
                  class="btn btn-white cir"
                  style="padding: 1px 4px; background: none; border: none"
                  ><i class="fa fa-times fa-2x" aria-hidden="true"></i
                ></label>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-body" style="padding-top: 0">
          <div class="ibox-content" style="padding: 1em 2em 2em 2em">
            <div>
              <div>
                <label
                  class="control-label"
                  style="
                    font-size: 16px;
                    border-bottom: 1px solid #ce0e17;
                    margin-bottom: 1%;
                  "
                  ><b>{{ "Group Details" | translate }}</b></label
                >
              </div>
              <div
                class=""
                style="display: flex; justify-content: space-between"
              >
                <div style="width: 80%">
                  <label class="control-label txt_lbl"
                    >{{ "Group Name" | translate
                    }}<span style="color: #c30707; font-weight: bold"
                      ><span style="color: #c30707; font-weight: bold"
                        >*</span
                      ></span
                    ></label
                  >
                  <input
                    id="group_name"
                    type="text"
                    class="form-control cir"
                    [(ngModel)]="group_name"
                  />
                </div>

                <div class="">
                  <label class="control-label"
                    ><b>{{ "Total Amount" | translate }}</b></label
                  >
                  <br />
                  <label class="control-label"
                    ><h2
                      style="
                        color: #54545e;
                        padding-top: 0;
                        font-size: 20px;
                        margin: 0;
                      "
                    >
                      <b>{{ "Rs" | translate }}. {{ groupTotal }}</b>
                    </h2></label
                  >
                </div>
              </div>
              <!-- add div for required warning  -->

              <!--  -->
            </div>
            <div class="">
              <div class="" style="margin-top: 1.7rem">
                <div>
                  <label
                    class="control-label"
                    style="
                      font-size: 16px;
                      border-bottom: 1px solid #ce0e17;
                      margin-bottom: 1%;
                    "
                    ><b>{{ "Compatible For" | translate }}</b></label
                  >
                  <span class="for_all" style="margin-left: 43px">
                    <label class="control-label txt_lbl">{{
                      "For All Vehicles" | translate
                    }}</label>
                    <input
                      *ngIf="foralltrue == false"
                      style="margin-left: 6px"
                      type="checkbox"
                      data-toggle="toggle"
                      (change)="forAllVehiclesGroup($event)"
                    />
                    <input
                      *ngIf="foralltrue == true"
                      checked
                      style="margin-left: 6px"
                      type="checkbox"
                      data-toggle="toggle"
                      (change)="forAllVehiclesGroup($event)"
                    />
                  </span>
                </div>
                <div class="form-group">
                  <div
                    class=""
                    *ngIf="foralltrue == true"
                    style="padding-bottom: 1.7rem"
                  >
                    <label class="control-label txt_lbl">{{
                      "Selected Vehicle" | translate
                    }}</label>
                    <span
                      class="form-control"
                      style="background: none; border: none"
                    >
                      <label
                        style="
                          background: linear-gradient(
                            to bottom,
                            #ff0000 0%,
                            #563b3b 100%
                          );
                          width: 100px;
                          height: 26px;
                          text-align: center;
                          padding: 3px;
                          color: white;
                          border-top-left-radius: 5px;
                          border-bottom-left-radius: 5px;
                        "
                        >{{ "All" | translate }}</label
                      >
                      <label
                        style="
                          background-color: #52524f;
                          width: 90px;
                          height: 26px;
                          text-align: center;
                          padding: 3px;
                          color: white;
                        "
                        >{{ "All" | translate }}</label
                      >
                      <label
                        style="
                          background-color: #52524f;
                          width: auto;
                          height: 26px;
                          text-align: center;
                          padding: 3px;
                          color: white;
                          border-top-right-radius: 5px;
                          border-bottom-right-radius: 5px;
                        "
                        >{{ "All" | translate }}</label
                      >
                    </span>
                  </div>

                  <div class="" *ngIf="foralltrue == false">
                    <table
                      class="table table_left table-bordered"
                      style="background-color: #fff"
                    >
                      <thead>
                        <tr>
                          <th style="background-color: #61605d; color: #fff">
                            {{ "Make,Model & Variants" | translate }}
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            <div>
                              <div style="display: flex">
                                <span
                                  class="input-group-addon"
                                  style="
                                    padding: 0 15px 0 5px;
                                    border-top-left-radius: 5px;
                                    border-bottom-left-radius: 5px;
                                  "
                                >
                                  <i
                                    style="margin-top: 9px; margin-right: 1rem"
                                    class="fa fa-search fa-1x"
                                    aria-hidden="true"
                                  ></i>
                                </span>
                                <span style="width: 100%; text-align: left">
                                  <ng-select
                                    id="group_search_make"
                                    style="width: 100%; text-align: left"
                                    [(ngModel)]="dupseletecmodvari"
                                    [closeOnSelect]="false"
                                    [virtualScroll]="true"
                                    [multiple]="true"
                                    placeHolder="Search & Add Model, Variants"
                                    (focus)="searchModelVariforCompfo($event)"
                                    (scrollToEnd)="loadMoreDataveh()"
                                    [items]="searchModelvari"
                                    (search)="searchModelVariforComp($event)"
                                    (add)="onAdd($event)"
                                    (remove)="onRemove($event)"
                                  >
                                    <ng-template
                                      ng-option-tmp
                                      let-item="item"
                                      let-item$="item$"
                                      let-index="index"
                                    >
                                      <input
                                        id="item-{{ index }}"
                                        type="checkbox"
                                        [ngModel]="item$.selected"
                                        [ngModelOptions]="{
                                          standalone: true
                                        }"
                                      />
                                      {{ item }}
                                    </ng-template>
                                  </ng-select>
                                </span>
                              </div>
                            </div>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <!--  -->
            <div class="" id="destination" #destinationRef>
              <div class="flex-tabs">
                <!-- job -->

                <div class="toggletabs">
                  <a data-toggle="tab" href="#tab-1">
                    <div class="totaljobb text-left">
                      <button
                        style="padding: 8px; background-color: #1b8a6f"
                        class="countbuttonn"
                      >
                        <img
                          style="width: 27px"
                          src="../../../../assets/images/transportation.png"
                          alt=""
                        />
                      </button>
                    </div>
                    <div class="text-right" style="margin-top: -48px">
                      <div class="">
                        <span class="tab-title"
                          >{{ "Job" | translate }}({{ groupJobQty }})</span
                        >
                      </div>
                      <div class="">
                        <span style="font-family: Open sans; font-size: 12px"
                          >{{ "Total" | translate }}:

                          {{ groupJobTotal }}</span
                        >
                      </div>
                    </div>
                  </a>
                </div>

                <!-- job end -->
                <!-- spare -->
                <div class="toggletabs">
                  <a data-toggle="tab" href="#tab-2">
                    <div class="totaljobb text-left">
                      <button
                        style="padding: 8px; background-color: #588ac4"
                        class="countbuttonn"
                      >
                        <img
                          style="width: 27px"
                          src="../../../../assets/images/vehicle.png"
                          alt=""
                        />
                      </button>
                    </div>
                    <div class="text-right" style="margin-top: -48px">
                      <div class="">
                        <span class="tab-title"
                          >{{ "Spare" | translate }}({{ groupSpareQty }})</span
                        >
                      </div>
                      <div class="">
                        <span style="font-family: Open sans; font-size: 12px"
                          >{{ "Total" | translate }}:

                          {{ groupSpareotal }}</span
                        >
                      </div>
                    </div>
                  </a>
                </div>
                <!-- spare end -->

                <!-- lube -->
                <div class="toggletabs">
                  <a data-toggle="tab" href="#tab-3">
                    <div class="totaljobb text-left">
                      <button
                        style="padding: 8px; background-color: #c87239"
                        class="countbuttonn"
                      >
                        <img
                          style="width: 27px"
                          src="../../../../assets/images/industry.png"
                          alt=""
                        />
                      </button>
                    </div>
                    <div class="text-right" style="margin-top: -48px">
                      <div class="">
                        <span class="tab-title"
                          >{{ "Lube" | translate }}({{ groupLubeQty }})</span
                        >
                      </div>
                      <div class="">
                        <span style="font-family: Open sans; font-size: 12px"
                          >{{ "Total" | translate }}:

                          {{ groupLubeTotal }}</span
                        >
                      </div>
                    </div>
                  </a>
                </div>
                <!-- lube end -->
              </div>

              <!-- tabs -->
              <div class="tab-content" style="margin-top: 1.7em">
                <div id="tab-1" class="tab-pane active">
                  <div class="panel-body" style="padding: 0px 0 15px 0">
                    <div class="table-responsive-custom">
                      <table
                        class="table table_left table-bordered"
                        style="background-color: #fff"
                      >
                        <thead>
                          <tr>
                            <!-- <th style="width: 5%;">Sr No.</th> -->
                            <th style="background-color: #1b8a6f; color: #fff">
                              {{ "Particulars" | translate }}
                            </th>
                            <!-- <th style="width: 91px;">Available Quantity</th> -->
                            <th style="background-color: #1b8a6f; color: #fff">
                              {{ "Quantity" | translate }}
                            </th>
                            <th style="background-color: #00916c; color: #fff">
                              {{ "Unit Price" | translate }}
                            </th>

                            <!-- ******add                  *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          " -->
                            <!-- <th style="background-color: #1b8a6f; color: #fff">
                              {{ "GST" | translate }}(%)
                            </th> -->

                            <th
                              *ngIf="
                                allBillingData != undefined &&
                                allBillingData.gst_number != ''
                              "
                              style="background-color: #1b8a6f; color: #fff"
                            >
                              {{ "GST" | translate }}(%)
                            </th>

                            <th style="background-color: #1b8a6f; color: #fff">
                              {{ "Total Amount" | translate }}
                            </th>

                            <!-- <th style="background-color: #1b8a6f; color: #fff">
                              {{ "Final Amount" | translate }}
                            </th> -->

                            <th style="background-color: #1b8a6f; color: #fff">
                              {{ "Action" | translate }}
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <ng-container
                            *ngFor="let data of groupdatatable; let i = index"
                          >
                            <tr *ngIf="data.category == 'job'">
                              <td style="padding: 18px 5px 0px 5px">
                                {{ data.part_name }}
                                <br />
                                ({{ data.part_number }})
                              </td>
                              <!-- <td >{{data.current_quantity| number:'1.0-0'}}</td> -->
                              <td style="padding: 10px 5px 0px 5px">
                                <span style="display: flex">
                                  <i
                                    *ngIf="data.showqunatityerrorjob == true"
                                    class="fa fa-exclamation-triangle"
                                    aria-hidden="true"
                                    data-toggle="tooltip"
                                    title="{{
                                      'Please enter only Numeric value'
                                        | translate
                                    }}"
                                    style="
                                      color: #c30707;
                                      font-weight: bold;
                                      padding: 3px 8px;
                                    "
                                  ></i>
                                  <input
                                    class="form-control cir sml_in"
                                    (input)="
                                      checkvalueenteredforgroup(
                                        $event.target.value,
                                        i,
                                        data
                                      )
                                    "
                                    type="text"
                                    [value]="data.quantity"
                                    placeholder="{{
                                      'Please enter Quantity' | translate
                                    }}"
                                    style="width: 70px"
                                  />
                                </span>
                              </td>
                              <td style="width: 8%; padding: 10px 5px 0px 5px">
                                <span style="display: flex">
                                  <i
                                    *ngIf="data.showpriceerrorlube == true"
                                    class="fa fa-exclamation-triangle"
                                    aria-hidden="true"
                                    data-toggle="tooltip"
                                    title="{{
                                      'Please enter only Numeric value'
                                        | translate
                                    }}"
                                    style="
                                      color: #c30707;
                                      font-weight: bold;
                                      padding: 3px 8px;
                                    "
                                  ></i>
                                  <input
                                    class="form-control cir sml_in"
                                    (input)="
                                      checkvalueenteredPriceforgroup(
                                        $event.target.value,
                                        i,
                                        data
                                      )
                                    "
                                    type="text"
                                    [value]="data.unit_sale_price"
                                    placeholder="{{
                                      'Please enter Price' | translate
                                    }}"
                                    style="width: 84px"
                                  />
                                </span>
                              </td>

                              <td
                                class="table-td-pw-19"
                                *ngIf="
                                  allBillingData != undefined &&
                                  allBillingData.gst_number != ''
                                "
                              >
                                <span *ngIf="data.sale_gst_rate != ''">
                                  <div style="display: flex">
                                    <span
                                      *ngIf="data.showcalcluationinfo == true"
                                      style="
                                        padding: 10px 0px 0px 0px;
                                        margin-right: 2px;
                                      "
                                    >
                                      <i
                                        class="fa fa-check-circle icon-color-fnt"
                                        aria-hidden="true"
                                        data-toggle="tooltip"
                                        title="{{
                                          'GST Amount' | translate
                                        }} ({{ data.gstcalculateofjob }})  {{
                                          'CGST Amount' | translate
                                        }} ({{ data.cgstcalculateofjob }})  {{
                                          'SGST Amount' | translate
                                        }} ({{ data.sgstcalculateofjob }})"
                                      ></i>
                                    </span>
                                    <span
                                      *ngIf="
                                        !gstNumberArr.includes(
                                          data.sale_gst_rate
                                        ) ||
                                        !gsttype.includes(data.sale_tax_type)
                                      "
                                      style="padding: 12px 5px 0px 0px"
                                    >
                                      <i
                                        class="fa fa-exclamation-triangle icon-color-fnt"
                                        aria-hidden="true"
                                        data-toggle="tooltip"
                                        title="{{
                                          'This Sale GST' | translate
                                        }} ({{ data.sale_gst_rate }}) {{
                                          'Rate Is not Valid Please Select other one'
                                            | translate
                                        }}"
                                      ></i>
                                    </span>
                                    <div
                                      class="row"
                                      style="padding: 0px 0px 0px 16px"
                                    >
                                      <select
                                        style="width: 87px; margin-left: 10px"
                                        class="form-control cir"
                                        (change)="
                                          checkgroupgst(
                                            $event.target.value,
                                            data,
                                            i,
                                            'gstNotNull'
                                          )
                                        "
                                        [(ngModel)]="data.sale_gst_rate"
                                      >
                                        <option
                                          *ngFor="let dataarr of gstNumberArr"
                                          value="{{ dataarr }}"
                                        >
                                          {{ dataarr }}
                                        </option>
                                      </select>
                                    </div>
                                    <div class="row" style="margin-left: 19px">
                                      <select
                                        style="width: 87px; margin-right: 10px"
                                        class="form-control cir"
                                        (change)="
                                          checkgroupgsttype(
                                            $event.target.value,
                                            data,
                                            i,
                                            'gstNotNull'
                                          )
                                        "
                                        [(ngModel)]="data.sale_tax_type"
                                      >
                                        <option value="Exclusive">
                                          {{ "Excl" | translate }}.
                                        </option>
                                        <option value="Inclusive">
                                          {{ "Incl" | translate }}.
                                        </option>
                                      </select>
                                    </div>
                                  </div>
                                </span>
                                <span *ngIf="data.sale_gst_rate == ''">
                                  <div style="display: flex">
                                    <span
                                      *ngIf="data.showcalcluationinfo == true"
                                      style="
                                        padding: 10px 0px 0px 0px;
                                        margin-right: 2px;
                                      "
                                    >
                                      <i
                                        class="fa fa-check-circle icon-color-fnt"
                                        aria-hidden="true"
                                        data-toggle="tooltip"
                                        title="{{
                                          'GST Amount' | translate
                                        }} ({{ data.gstcalculateofjob }})  {{
                                          'CGST Amount' | translate
                                        }} ({{ data.cgstcalculateofjob }})  {{
                                          'SGST Amount' | translate
                                        }}({{ data.sgstcalculateofjob }})"
                                      ></i>
                                    </span>
                                    <span
                                      *ngIf="
                                        !gstNumberArr.includes(
                                          data.purchase_gst_rate
                                        ) ||
                                        !gsttype.includes(
                                          data.purchase_tax_type
                                        )
                                      "
                                      style="padding: 12px 5px 0px 0px"
                                    >
                                      <i
                                        class="fa fa-exclamation-triangle icon-color-fnt"
                                        aria-hidden="true"
                                        data-toggle="tooltip"
                                        title="{{
                                          'This Purchase GST' | translate
                                        }} ({{ data.purchase_gst_rate }}) {{
                                          'Rate Is not Valid Please Select other one'
                                            | translate
                                        }}"
                                      ></i>
                                    </span>
                                    <div
                                      class="row"
                                      style="padding: 0px 0px 0px 16px"
                                    >
                                      <select
                                        style="width: 87px; margin-left: 10px"
                                        class="form-control cir"
                                        (change)="
                                          checkgroupgst(
                                            $event.target.value,
                                            data,
                                            i,
                                            'gstNull'
                                          )
                                        "
                                        [(ngModel)]="data.purchase_gst_rate"
                                      >
                                        <option
                                          *ngFor="let dataarr of gstNumberArr"
                                          value="{{ dataarr }}"
                                        >
                                          {{ dataarr }}
                                        </option>
                                      </select>
                                    </div>
                                    <div class="row" style="margin-left: 19px">
                                      <select
                                        style="width: 87px; margin-right: 10px"
                                        class="form-control cir"
                                        (change)="
                                          checkgroupgsttype(
                                            $event.target.value,
                                            data,
                                            i,
                                            'gstNull'
                                          )
                                        "
                                        [(ngModel)]="data.purchase_tax_type"
                                      >
                                        <option value="Exclusive">
                                          {{ "Excl" | translate }}.
                                        </option>
                                        <option value="Inclusive">
                                          {{ "Incl" | translate }}.
                                        </option>
                                      </select>
                                    </div>
                                  </div>
                                </span>
                              </td>

                              <td style="width: 5%; padding: 18px 5px 0px 5px">
                                {{ data.amount }}
                              </td>

                              <!-- <td style="width: 5%; padding: 18px 5px 0px 5px">
                              {{ data.amount }}
                            </td> -->

                              <td>
                                <i
                                  (click)="removeGroupItem(data, i)"
                                  class="fa fa-times"
                                  aria-hidden="true"
                                  style="cursor: pointer"
                                ></i>
                              </td>
                            </tr>
                          </ng-container>
                          <tr style="width: 100%">
                            <td>
                              <div
                                class="btn-toolbar ml-93 d-flex flex-row"
                                role="toolbar"
                                aria-label="Toolbar with button groups"
                              >
                                <div
                                  class="btn-group searchic table-div-sear"
                                  role="group"
                                  aria-label="First group"
                                >
                                  <span class="table-span-sear">
                                    <i
                                      class="fa fa-search fa-1x"
                                      aria-hidden="true"
                                    ></i>
                                  </span>
                                </div>
                                <div
                                  class="btn-group searchbar"
                                  role="group"
                                  aria-label="Second group"
                                >
                                  <span class="jobcard-dashhf">
                                    <ng-autocomplete
                                      (scrolledToEnd)="loadMoreDatajobs()"
                                      [(ngModel)]="jobmodel"
                                      placeHolder="{{
                                        'Job Search By Part Number Or Part Name'
                                          | translate
                                      }}"
                                      [data]="searchJobData"
                                      (selected)="
                                        selectedJobResult($event, 'job')
                                      "
                                      (input)="
                                        searchGroupInput($event.target.value)
                                      "
                                      [itemTemplate]="itemTemplate"
                                      [notFoundTemplate]="notFoundTemplate"
                                    >
                                    </ng-autocomplete>

                                    <ng-template #itemTemplate let-item>
                                      <a [innerHTML]="item"></a>
                                    </ng-template>

                                    <ng-template #notFoundTemplate let-notFound>
                                      <div [innerHTML]="notFound"></div>
                                    </ng-template>
                                  </span>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
                <div id="tab-2" class="tab-pane">
                  <div class="panel-body" style="padding: 0px 0 15px 0">
                    <div class="table-responsive-custom">
                      <table
                        class="table table_left table-bordered"
                        style="background-color: #fff"
                      >
                        <thead>
                          <tr>
                            <!-- <th style="width: 5%;">Sr No.</th> -->
                            <th style="background-color: #588ac4; color: #fff">
                              {{ "Particulars" | translate }}
                            </th>
                            <!-- <th style="width: 91px;">Available Quantity</th> -->
                            <th style="background-color: #588ac4; color: #fff">
                              {{ "Quantity" | translate }}
                            </th>
                            <th style="background-color: #588ac4; color: #fff">
                              {{ "Unit Price" | translate }}
                            </th>

                            <th
                              *ngIf="
                                allBillingData != undefined &&
                                allBillingData.gst_number != ''
                              "
                              style="background-color: #588ac4; color: #fff"
                            >
                              {{ "GST" | translate }}(%)
                            </th>

                            <th style="background-color: #588ac4; color: #fff">
                              {{ "Total Amount" | translate }}
                            </th>

                            <!-- <th style="background-color: #588ac4; color: #fff">
                              {{ "Final Amount" | translate }}
                            </th> -->

                            <th style="background-color: #588ac4; color: #fff">
                              {{ "Action" | translate }}
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <ng-container
                            *ngFor="let data of groupdatatable; let i = index"
                          >
                            <tr *ngIf="data.category == 'spare'">
                              <td style="padding: 18px 5px 0px 5px">
                                {{ data.part_name }}
                                <br />
                                <!-- <span *ngIf="isShowPartNumber"
                                  >({{ data.part_number }})</span
                                > -->
                              </td>
                              <!-- <td >{{data.current_quantity| number:'1.0-0'}}</td> -->
                              <td style="padding: 10px 5px 0px 5px">
                                <span style="display: flex">
                                  <i
                                    *ngIf="data.showqunatityerrorjob == true"
                                    class="fa fa-exclamation-triangle"
                                    aria-hidden="true"
                                    data-toggle="tooltip"
                                    title="{{
                                      'Please enter only Numeric value'
                                        | translate
                                    }}"
                                    style="
                                      color: #c30707;
                                      font-weight: bold;
                                      padding: 3px 8px;
                                    "
                                  ></i>
                                  <input
                                    class="form-control cir sml_in"
                                    (input)="
                                      checkvalueenteredforgroup(
                                        $event.target.value,
                                        i,
                                        data
                                      )
                                    "
                                    type="text"
                                    [value]="data.quantity"
                                    placeholder="{{
                                      'Please enter Quantity' | translate
                                    }}"
                                    style="width: 70px"
                                  />
                                </span>
                              </td>
                              <td style="width: 8%; padding: 10px 5px 0px 5px">
                                <span style="display: flex">
                                  <i
                                    *ngIf="data.showpriceerrorlube == true"
                                    class="fa fa-exclamation-triangle"
                                    aria-hidden="true"
                                    data-toggle="tooltip"
                                    title="{{
                                      'Please enter only Numeric value'
                                        | translate
                                    }}"
                                    style="
                                      color: #c30707;
                                      font-weight: bold;
                                      padding: 3px 8px;
                                    "
                                  ></i>
                                  <input
                                    class="form-control cir sml_in"
                                    (input)="
                                      checkvalueenteredPriceforgroup(
                                        $event.target.value,
                                        i,
                                        data
                                      )
                                    "
                                    type="text"
                                    [value]="data.unit_sale_price"
                                    placeholder="{{
                                      'Please enter Price' | translate
                                    }}"
                                    style="width: 84px"
                                  />
                                </span>
                              </td>

                              <td
                                class="table-td-pw-19"
                                *ngIf="
                                  allBillingData != undefined &&
                                  allBillingData.gst_number != ''
                                "
                              >
                                <span *ngIf="data.sale_gst_rate != ''">
                                  <div style="display: flex">
                                    <span
                                      *ngIf="data.showcalcluationinfo == true"
                                      style="
                                        padding: 10px 0px 0px 0px;
                                        margin-right: 2px;
                                      "
                                    >
                                      <i
                                        class="fa fa-check-circle icon-color-fnt"
                                        aria-hidden="true"
                                        data-toggle="tooltip"
                                        title="{{
                                          'GST Amount' | translate
                                        }} ({{ data.gstcalculateofjob }})  {{
                                          'CGST Amount' | translate
                                        }} ({{ data.cgstcalculateofjob }})  {{
                                          'SGST Amount' | translate
                                        }} ({{ data.sgstcalculateofjob }})"
                                      ></i>
                                    </span>
                                    <span
                                      *ngIf="
                                        !gstNumberArr.includes(
                                          data.sale_gst_rate
                                        ) ||
                                        !gsttype.includes(data.sale_tax_type)
                                      "
                                      style="padding: 12px 5px 0px 0px"
                                    >
                                      <i
                                        class="fa fa-exclamation-triangle icon-color-fnt"
                                        aria-hidden="true"
                                        data-toggle="tooltip"
                                        title="{{
                                          'This Sale GST' | translate
                                        }} ({{ data.sale_gst_rate }}) {{
                                          'Rate Is not Valid Please Select other one'
                                            | translate
                                        }}"
                                      ></i>
                                    </span>
                                    <div
                                      class="row"
                                      style="padding: 0px 0px 0px 16px"
                                    >
                                      <select
                                        style="width: 87px; margin-left: 10px"
                                        class="form-control cir"
                                        (change)="
                                          checkgroupgst(
                                            $event.target.value,
                                            data,
                                            i,
                                            'gstNotNull'
                                          )
                                        "
                                        [(ngModel)]="data.sale_gst_rate"
                                      >
                                        <option
                                          *ngFor="let dataarr of gstNumberArr"
                                          value="{{ dataarr }}"
                                        >
                                          {{ dataarr }}
                                        </option>
                                      </select>
                                    </div>
                                    <div class="row" style="margin-left: 19px">
                                      <select
                                        style="width: 87px; margin-right: 10px"
                                        class="form-control cir"
                                        (change)="
                                          checkgroupgsttype(
                                            $event.target.value,
                                            data,
                                            i,
                                            'gstNotNull'
                                          )
                                        "
                                        [(ngModel)]="data.sale_tax_type"
                                      >
                                        <option value="Exclusive">
                                          {{ "Excl" | translate }}.
                                        </option>
                                        <option value="Inclusive">
                                          {{ "Incl" | translate }}.
                                        </option>
                                      </select>
                                    </div>
                                  </div>
                                </span>
                                <span *ngIf="data.sale_gst_rate == ''">
                                  <div style="display: flex">
                                    <span
                                      *ngIf="data.showcalcluationinfo == true"
                                      style="
                                        padding: 10px 0px 0px 0px;
                                        margin-right: 2px;
                                      "
                                    >
                                      <i
                                        class="fa fa-check-circle icon-color-fnt"
                                        aria-hidden="true"
                                        data-toggle="tooltip"
                                        title="{{
                                          'GST Amount' | translate
                                        }} ({{ data.gstcalculateofjob }})  {{
                                          'CGST Amount' | translate
                                        }} ({{ data.cgstcalculateofjob }})  {{
                                          'SGST Amount' | translate
                                        }}({{ data.sgstcalculateofjob }})"
                                      ></i>
                                    </span>
                                    <span
                                      *ngIf="
                                        !gstNumberArr.includes(
                                          data.purchase_gst_rate
                                        ) ||
                                        !gsttype.includes(
                                          data.purchase_tax_type
                                        )
                                      "
                                      style="padding: 12px 5px 0px 0px"
                                    >
                                      <i
                                        class="fa fa-exclamation-triangle icon-color-fnt"
                                        aria-hidden="true"
                                        data-toggle="tooltip"
                                        title="{{
                                          'This Purchase GST' | translate
                                        }} ({{ data.purchase_gst_rate }}) {{
                                          'Rate Is not Valid Please Select other one'
                                            | translate
                                        }}"
                                      ></i>
                                    </span>
                                    <div
                                      class="row"
                                      style="padding: 0px 0px 0px 16px"
                                    >
                                      <select
                                        style="width: 87px; margin-left: 10px"
                                        class="form-control cir"
                                        (change)="
                                          checkgroupgst(
                                            $event.target.value,
                                            data,
                                            i,
                                            'gstNull'
                                          )
                                        "
                                        [(ngModel)]="data.purchase_gst_rate"
                                      >
                                        <option
                                          *ngFor="let dataarr of gstNumberArr"
                                          value="{{ dataarr }}"
                                        >
                                          {{ dataarr }}
                                        </option>
                                      </select>
                                    </div>
                                    <div class="row" style="margin-left: 19px">
                                      <select
                                        style="width: 87px; margin-right: 10px"
                                        class="form-control cir"
                                        (change)="
                                          checkgroupgsttype(
                                            $event.target.value,
                                            data,
                                            i,
                                            'gstNull'
                                          )
                                        "
                                        [(ngModel)]="data.purchase_tax_type"
                                      >
                                        <option value="Exclusive">
                                          {{ "Excl" | translate }}.
                                        </option>
                                        <option value="Inclusive">
                                          {{ "Incl" | translate }}.
                                        </option>
                                      </select>
                                    </div>
                                  </div>
                                </span>
                              </td>
                              <td style="width: 5%; padding: 18px 5px 0px 5px">
                                {{ data.amount }}
                              </td>

                              <!-- <td style="width: 5%; padding: 18px 5px 0px 5px">
                              {{ data.amount }}
                            </td> -->

                              <td>
                                <i
                                  (click)="removeGroupItem(data, i)"
                                  class="fa fa-times"
                                  aria-hidden="true"
                                  style="cursor: pointer"
                                ></i>
                              </td>
                            </tr>
                          </ng-container>
                          <tr style="width: 100%">
                            <td>
                              <div
                                class="btn-toolbar ml-93 d-flex flex-row"
                                role="toolbar"
                                aria-label="Toolbar with button groups"
                              >
                                <div
                                  class="btn-group searchic table-div-sear"
                                  role="group"
                                  aria-label="First group"
                                >
                                  <span class="table-span-sear">
                                    <i
                                      class="fa fa-search fa-1x"
                                      aria-hidden="true"
                                    ></i>
                                  </span>
                                </div>
                                <div
                                  class="btn-group searchbar"
                                  role="group"
                                  aria-label="Second group"
                                >
                                  <span class="jobcard-dashhf">
                                    <ng-autocomplete
                                      (scrolledToEnd)="loadMoreDataspare()"
                                      placeHolder="{{
                                        'To Select Spare Search By Part Number Or Part Name'
                                          | translate
                                      }}"
                                      [data]="searchSpareData"
                                      (selected)="
                                        selectedJobResult($event, 'spare')
                                      "
                                      (input)="
                                        searchSpareGroupInputAlternate(
                                          $event.target.value
                                        )
                                      "
                                      [itemTemplate]="itemTemplate"
                                      [notFoundTemplate]="notFoundTemplate"
                                    >
                                    </ng-autocomplete>

                                    <ng-template #itemTemplate let-item>
                                      <a [innerHTML]="item"></a>
                                    </ng-template>

                                    <ng-template #notFoundTemplate let-notFound>
                                      <div [innerHTML]="notFound"></div>
                                    </ng-template>
                                  </span>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

                <div id="tab-3" class="tab-pane">
                  <div class="panel-body" style="padding: 0px 0 15px 0">
                    <div class="table-responsive-custom">
                      <table
                        class="table table_left table-bordered"
                        style="background-color: #fff"
                      >
                        <thead>
                          <tr>
                            <!-- <th style="width: 5%;">Sr No.</th> -->
                            <th style="background-color: #c87239; color: #fff">
                              {{ "Particulars" | translate }}
                            </th>
                            <!-- <th style="width: 91px;">Available Quantity</th> -->
                            <th style="background-color: #c87239; color: #fff">
                              {{ "Quantity" | translate }}
                            </th>
                            <th style="background-color: #c87239; color: #fff">
                              {{ "Unit Price" | translate }}
                            </th>

                            <th
                              *ngIf="
                                allBillingData != undefined &&
                                allBillingData.gst_number != ''
                              "
                              style="background-color: #c87239; color: #fff"
                            >
                              {{ "GST" | translate }}(%)
                            </th>
                            <th style="background-color: #c87239; color: #fff">
                              {{ "Total Amount" | translate }}
                            </th>

                            <th style="background-color: #c87239; color: #fff">
                              {{ "Action" | translate }}
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <ng-container
                            *ngFor="let data of groupdatatable; let i = index"
                          >
                            <tr *ngIf="data.category == 'lube'">
                              <td style="padding: 18px 5px 0px 5px">
                                {{ data.part_name }}
                              </td>
                              <!-- <td >{{data.current_quantity| number:'1.0-0'}}</td> -->
                              <td style="padding: 10px 5px 0px 5px">
                                <span style="display: flex">
                                  <i
                                    *ngIf="data.showqunatityerrorlube == true"
                                    class="fa fa-exclamation-triangle"
                                    aria-hidden="true"
                                    data-toggle="tooltip"
                                    title="{{
                                      'Please enter only Numeric value'
                                        | translate
                                    }}"
                                    style="
                                      color: #c30707;
                                      font-weight: bold;
                                      padding: 3px 8px;
                                    "
                                  ></i>
                                  <input
                                    class="form-control cir sml_in"
                                    (input)="
                                      checkvalueenteredforgroup(
                                        $event.target.value,
                                        i,
                                        data
                                      )
                                    "
                                    type="text"
                                    [value]="data.quantity"
                                    placeholder="{{
                                      'Please enter Quantity' | translate
                                    }}"
                                    style="width: 70px"
                                  />
                                </span>
                              </td>
                              <td style="width: 8%; padding: 10px 5px 0px 5px">
                                <span style="display: flex">
                                  <i
                                    *ngIf="data.showpriceerrorlube == true"
                                    class="fa fa-exclamation-triangle"
                                    aria-hidden="true"
                                    data-toggle="tooltip"
                                    title="{{
                                      'Please enter only Numeric value'
                                        | translate
                                    }}"
                                    style="
                                      color: #c30707;
                                      font-weight: bold;
                                      padding: 3px 8px;
                                    "
                                  ></i>
                                  <input
                                    class="form-control cir sml_in"
                                    (input)="
                                      checkvalueenteredPriceforgroup(
                                        $event.target.value,
                                        i,
                                        data
                                      )
                                    "
                                    type="text"
                                    [value]="data.unit_sale_price"
                                    placeholder="{{
                                      'Please enter Price' | translate
                                    }}"
                                    style="width: 84px"
                                  />
                                </span>
                              </td>
                              <td
                                class="table-td-pw-19"
                                *ngIf="
                                  allBillingData != undefined &&
                                  allBillingData.gst_number != ''
                                "
                              >
                                <span *ngIf="data.sale_gst_rate != ''">
                                  <div style="display: flex">
                                    <span
                                      *ngIf="data.showcalcluationinfo == true"
                                      style="
                                        padding: 10px 0px 0px 0px;
                                        margin-right: 2px;
                                      "
                                    >
                                      <i
                                        class="fa fa-check-circle icon-color-fnt"
                                        aria-hidden="true"
                                        data-toggle="tooltip"
                                        title="{{
                                          'GST Amount' | translate
                                        }} ({{ data.gstcalculateofjob }})  {{
                                          'CGST Amount' | translate
                                        }} ({{ data.cgstcalculateofjob }})  {{
                                          'SGST Amount' | translate
                                        }} ({{ data.sgstcalculateofjob }})"
                                      ></i>
                                    </span>
                                    <span
                                      *ngIf="
                                        !gstNumberArr.includes(
                                          data.sale_gst_rate
                                        ) ||
                                        !gsttype.includes(data.sale_tax_type)
                                      "
                                      style="padding: 12px 5px 0px 0px"
                                    >
                                      <i
                                        class="fa fa-exclamation-triangle icon-color-fnt"
                                        aria-hidden="true"
                                        data-toggle="tooltip"
                                        title="{{
                                          'This Sale GST' | translate
                                        }} ({{ data.sale_gst_rate }}) {{
                                          'Rate Is not Valid Please Select other one'
                                            | translate
                                        }}"
                                      ></i>
                                    </span>
                                    <div
                                      class="row"
                                      style="padding: 0px 0px 0px 16px"
                                    >
                                      <select
                                        style="width: 87px; margin-left: 10px"
                                        class="form-control cir"
                                        (change)="
                                          checkgroupgst(
                                            $event.target.value,
                                            data,
                                            i,
                                            'gstNotNull'
                                          )
                                        "
                                        [(ngModel)]="data.sale_gst_rate"
                                      >
                                        <option
                                          *ngFor="let dataarr of gstNumberArr"
                                          value="{{ dataarr }}"
                                        >
                                          {{ dataarr }}
                                        </option>
                                      </select>
                                    </div>
                                    <div class="row" style="margin-left: 19px">
                                      <select
                                        style="width: 87px; margin-right: 10px"
                                        class="form-control cir"
                                        (change)="
                                          checkgroupgsttype(
                                            $event.target.value,
                                            data,
                                            i,
                                            'gstNotNull'
                                          )
                                        "
                                        [(ngModel)]="data.sale_tax_type"
                                      >
                                        <option value="Exclusive">
                                          {{ "Excl" | translate }}.
                                        </option>
                                        <option value="Inclusive">
                                          {{ "Incl" | translate }}.
                                        </option>
                                      </select>
                                    </div>
                                  </div>
                                </span>
                                <span *ngIf="data.sale_gst_rate == ''">
                                  <div style="display: flex">
                                    <span
                                      *ngIf="data.showcalcluationinfo == true"
                                      style="
                                        padding: 10px 0px 0px 0px;
                                        margin-right: 2px;
                                      "
                                    >
                                      <i
                                        class="fa fa-check-circle icon-color-fnt"
                                        aria-hidden="true"
                                        data-toggle="tooltip"
                                        title="{{
                                          'GST Amount' | translate
                                        }} ({{ data.gstcalculateofjob }})  {{
                                          'CGST Amount' | translate
                                        }} ({{ data.cgstcalculateofjob }})  {{
                                          'SGST Amount' | translate
                                        }}({{ data.sgstcalculateofjob }})"
                                      ></i>
                                    </span>
                                    <span
                                      *ngIf="
                                        !gstNumberArr.includes(
                                          data.purchase_gst_rate
                                        ) ||
                                        !gsttype.includes(
                                          data.purchase_tax_type
                                        )
                                      "
                                      style="padding: 12px 5px 0px 0px"
                                    >
                                      <i
                                        class="fa fa-exclamation-triangle icon-color-fnt"
                                        aria-hidden="true"
                                        data-toggle="tooltip"
                                        title="{{
                                          'This Purchase GST' | translate
                                        }} ({{ data.purchase_gst_rate }}) {{
                                          'Rate Is not Valid Please Select other one'
                                            | translate
                                        }}"
                                      ></i>
                                    </span>
                                    <div
                                      class="row"
                                      style="padding: 0px 0px 0px 16px"
                                    >
                                      <select
                                        style="width: 87px; margin-left: 10px"
                                        class="form-control cir"
                                        (change)="
                                          checkgroupgst(
                                            $event.target.value,
                                            data,
                                            i,
                                            'gstNull'
                                          )
                                        "
                                        [(ngModel)]="data.purchase_gst_rate"
                                      >
                                        <option
                                          *ngFor="let dataarr of gstNumberArr"
                                          value="{{ dataarr }}"
                                        >
                                          {{ dataarr }}
                                        </option>
                                      </select>
                                    </div>
                                    <div class="row" style="margin-left: 19px">
                                      <select
                                        style="width: 87px; margin-right: 10px"
                                        class="form-control cir"
                                        (change)="
                                          checkgroupgsttype(
                                            $event.target.value,
                                            data,
                                            i,
                                            'gstNull'
                                          )
                                        "
                                        [(ngModel)]="data.purchase_tax_type"
                                      >
                                        <option value="Exclusive">
                                          {{ "Excl" | translate }}.
                                        </option>
                                        <option value="Inclusive">
                                          {{ "Incl" | translate }}.
                                        </option>
                                      </select>
                                    </div>
                                  </div>
                                </span>
                              </td>

                              <td style="width: 5%; padding: 18px 5px 0px 5px">
                                {{ data.amount }}
                              </td>

                              <!-- <td style="width: 5%; padding: 18px 5px 0px 5px">
                              {{ data.amount }}
                            </td> -->

                              <td>
                                <i
                                  (click)="removeGroupItem(data, i)"
                                  class="fa fa-times"
                                  aria-hidden="true"
                                  style="cursor: pointer"
                                ></i>
                              </td>
                            </tr>
                          </ng-container>
                          <tr style="width: 100%">
                            <td>
                              <div
                                class="btn-toolbar ml-93 d-flex flex-row"
                                role="toolbar"
                                aria-label="Toolbar with button groups"
                              >
                                <div
                                  class="btn-group searchic table-div-sear"
                                  role="group"
                                  aria-label="First group"
                                >
                                  <span class="table-span-sear">
                                    <i
                                      class="fa fa-search fa-1x"
                                      aria-hidden="true"
                                    ></i>
                                  </span>
                                </div>
                                <div
                                  class="btn-group searchbar"
                                  role="group"
                                  aria-label="Second group"
                                >
                                  <span class="jobcard-dashhf">
                                    <ng-autocomplete
                                      (scrolledToEnd)="loadMoreDatalube()"
                                      placeHolder="{{
                                        'To Select Lube Search By Part Number Or Part Name'
                                          | translate
                                      }}"
                                      [data]="searchLubeData"
                                      (selected)="
                                        selectedJobResult($event, 'lube')
                                      "
                                      (input)="
                                        searchLubeGroupInputAlternate(
                                          $event.target.value
                                        )
                                      "
                                      [itemTemplate]="itemTemplate"
                                      [notFoundTemplate]="notFoundTemplate"
                                    >
                                    </ng-autocomplete>

                                    <ng-template #itemTemplate let-item>
                                      <a [innerHTML]="item"></a>
                                    </ng-template>

                                    <ng-template #notFoundTemplate let-notFound>
                                      <div [innerHTML]="notFound"></div>
                                    </ng-template>
                                  </span>
                                </div>
                                <div
                                  class="btn-group addbut"
                                  role="group"
                                  aria-label="Third group"
                                ></div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
              <!-- end tabs -->

              <div class="form-group" style="">
                <div class="">
                  <button
                    type="submit"
                    data-dismiss="modal"
                    [disabled]="groupdatatable.length <= 0 || group_name == ''"
                    *ngIf="!isGroupEdit"
                    (click)="createGroup()"
                    data-toggle="tooltip"
                    title="Group Name and Items Are Mandatory Fields"
                    class="btn btn-primary cir cir_btn"
                    style="
                      font-size: 12px;

                      background: linear-gradient(
                        to bottom,
                        #ff0000 0%,
                        #563b3b 100%
                      );
                      border-color: #c30707;
                      font-weight: bold;
                      width: 90%;
                      width: auto;
                      padding: 10px 30px;
                      margin-left: 35%;
                      margin-top: auto;
                      position: fixed;
                      bottom: 10px;
                    "
                  >
                    {{ "Create" | translate }}
                  </button>

                  <button
                    [disabled]="groupdatatable.length <= 0 || group_name == ''"
                    *ngIf="isGroupEdit"
                    (click)="updateGroup()"
                    class="btn btn-primary cir cir_btn"
                    style="
                      font-size: 12px;

                      background: linear-gradient(
                        to bottom,
                        #ff0000 0%,
                        #563b3b 100%
                      );
                      border-color: #c30707;
                      font-weight: bold;
                      width: 90%;
                      width: auto;
                      padding: 10px 30px;
                      margin-left: 35%;
                      margin-top: auto;
                      position: fixed;
                      bottom: 10px;
                    "
                  >
                    {{ "Update" | translate }}
                  </button>
                  <!-- <button
                    type="submit"
                    data-dismiss="modal"
                   
                    class="btn btn-primary cir cir_btn"
                    style="
                      font-size: 12px;
                      margin: 7% 0 0 0;
                      background: linear-gradient(
                        to bottom,
                        #ff0000 0%,
                        #563b3b 100%
                      );
                      border-color: #c30707;
                      font-weight: bold;
                      width: 90%;
                    "
                  >
                    {{ "Update" | translate }}
                  </button> -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
