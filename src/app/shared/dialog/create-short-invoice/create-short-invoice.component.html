<app-spinlogin></app-spinlogin>
<div class="row">
  <div class="col-lg-12 col-sm-12 col-md-12">
    <div class="ibox float-e-margins" style="margin-bottom: 0">
      <div class="ibox-title ibox-background" style="background-color: #fff">
        <button class="btn btn-link hed-btn-colse">
          <label (click)="closePopup()" class="cir">
            <i class="fa fa-times fa-2x" aria-hidden="true"></i
          ></label>
        </button>
        <div class="row">
          <div class="col-lg-3">
            <h1 class="title-ibx-main" style="font-size: 27px">
              {{ "Short Invoice" | translate }}
            </h1>
          </div>
          <div class="col-lg-9">
            <!-- <div class="form-group"> -->
              <div
              class="flex-lg"
              
            > 
              <div  *ngIf="jobacrdStatus == '2' 
              && this.jobcardArrayForEdit.invoice_number 
              && allBillingData != undefined 
              && allBillingData.gst_number != ''"
              class="col-lg-6 col-sm-6 col-md-6">
                <label class="control-label txt_lbl d-flex flex-row">{{
                  "Invoice Number"| translate
                }}</label>
                <input
                  disabled
                  type="text"
                  class="col-lg-12 form-control cir"
                  [value]="this.jobcardArrayForEdit.invoice_number"
                />
              </div>
                <div  class="col-lg-6 col-sm-6 col-md-6">
                  <label class="control-label txt_lbl d-flex flex-row">{{
                    "Jobcard Number" | translate
                  }}</label>
                  <input
                    disabled
                    type="text"
                    class="col-lg-12 form-control cir"
                    [value]="jocardnumber"
                  />
                </div>
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <label class="control-label txt_lbl">{{
                  "Date" | translate
                }}</label>
                <input
                  disabled
                  type="text"
                  class="form-control cir date"
                  [value]="jobcarddate"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="ibox-content">
        <div class="row">
          <div>
            <div class="card-container">
              <div class="card user-card" *ngIf="!is_set_customer">
                <mat-card class="details">
                  <mat-card-title> Search or Create New User </mat-card-title>
                  <mat-divider></mat-divider>
                  <div class="form-create">
                    <div>
                      <mat-card-content>
                        <!-- ng select -->
                        <div class="select-list">
                          <div
                            class="btn-toolbar ml-93 d-flex flex-row"
                            role="toolbar"
                            aria-label="Toolbar with button groups"
                          >
                            <div
                              class="btn-group searchic table-div-sear"
                              aria-label="First group"
                            >
                              <span class="table-span-sear">
                                <i
                                  class="fa fa-search fa-1x"
                                  aria-hidden="true"
                                ></i>
                              </span>
                            </div>
                            <div
                              class="btn-group searchbar"
                              aria-label="Second group"
                            >
                              <span class="jobcard-dashhf">
                                <ng-autocomplete
                                  placeHolder="select from existing customers"
                                  (scrolledToEnd)="loadMoreCustomers()"
                                  [data]="searchCustomerData"
                                  (input)="
                                    searchCustomerInput($event.target.value)
                                  "
                                  (selected)="selectedResultForCustomer($event)"
                                  [itemTemplate]="itemTemplate"
                                  [notFoundTemplate]="notFoundTemplate"
                                >
                                </ng-autocomplete>

                                <ng-template #itemTemplate let-item>
                                  <a [innerHTML]="item"></a>
                                </ng-template>

                                <ng-template #notFoundTemplate let-notFound>
                                  <div [innerHTML]="notFound"></div>
                                </ng-template>
                              </span>
                            </div>
                            <div
                              class="btn-group addbut"
                              aria-label="Third group"
                            >
                              <span
                                class="input-group-addon cir totale-close-jobcrd"
                                data-toggle="modal"
                                data-target="#customer_form_model"
                                (click)="clearCustomerForm()"
                              >
                                <!-- <i
                                class="fa fa-plus"
                                aria-hidden="true"
                                style="font-size: 14px; font-weight: 600"
                              ></i> -->
                                <label (click)="clearCustomerForm()"
                                  >Add New</label
                                >
                              </span>
                            </div>
                          </div>
                        </div>
                      </mat-card-content>
                    </div>
                  </div>
                </mat-card>
              </div>

              <div class="card user-card" *ngIf="is_set_customer">
                <mat-card class="details">
                  <mat-card-title
                    style="display: flex; justify-content: space-between"
                  >
                    <div class="">Customer Details</div>

                    <div class="">
                      <span style="width: 50px" data-toggle="modal">
                        <a href="javascript:">
                          <button
                            (click)="onCustomerSearchNew()"
                            class="btn btn-primary createjobcard search"
                          >
                            Search New
                          </button>
                        </a>
                      </span>

                      <span style="width: 50px" data-toggle="modal">
                        <a href="javascript:">
                          <button
                            *ngIf="this.allow_edit"
                            (click)="setCustomerFormOnEdit()"
                            class="btn btn-primary createjobcard history"
                            data-toggle="modal"
                            data-target="#customer_form_model"
                          >
                            Edit
                          </button>
                        </a>
                      </span>
                    </div>
                  </mat-card-title>
                  <mat-divider></mat-divider>
                  <div class="">
                    <div>
                      <mat-card-content>
                        <div class="customer-details">
                          <div class="customer-details-basic">
                            <span>
                              <img
                                class="display-img_user"
                                src="../../../../assets/images/MicrosoftTeams-image (4).png"
                                alt=""
                              />
                            </span>

                            <span>
                              <label class="cus_info prim">
                                {{ selectedCustomer.customer_name }}
                              </label>
                              <label class="cus_info">
                                {{ selectedCustomer.customer_mobile }}
                              </label>
                            </span>
                          </div>
                          <div class="customer-details-basic">
                            <span>
                              <img
                                class="display-img_user"
                                src="../../../../assets/images/Group 218.png"
                                alt=""
                              />
                            </span>

                            <span>
                              <label class="cus_info prim">
                                {{ selectedCustomer.vehicle_number }}
                              </label>
                              <label class="cus_info">
                                {{ selectedCustomer.vehicle_make }}
                                {{ selectedCustomer.vehicle_model }}
                                {{ selectedCustomer.vehicle_variant }}
                              </label>
                            </span>
                          </div>
                        </div>

                        <div class="tabs-group">
                          <mat-tab-group>
                            <mat-tab label="Email">
                              <div class="">
                                <div style="margin-top: 1%">
                                  Email:
                                  <span style="font-weight: bold"
                                    >{{
                                      selectedCustomer.customer_email
                                        ? selectedCustomer.customer_email
                                        : "-"
                                    }}
                                  </span>
                                </div>
                                <div style="margin-top: 0.5%">
                                  DOB:
                                  <span style="font-weight: bold">
                                    {{
                                      selectedCustomer.customer_dob
                                        ? selectedCustomer.customer_dob
                                        : "-"
                                    }}
                                  </span>
                                </div>
                              </div>
                              <div style="margin-top: 0.5%">
                                GST No.:
                                <span style="font-weight: bold">
                                  {{
                                    selectedCustomer.gst_number
                                      ? selectedCustomer.gst_number
                                      : "-"
                                  }}
                                </span>
                              </div>
                            </mat-tab>

                            <mat-tab label="Address" class="tab-label">
                              <div style="margin-top: 1%">
                                Pickup Address:
                                <span style="font-weight: bold">
                                  {{
                                    selectedCustomer.pick_up_address
                                      ? selectedCustomer.pick_up_address
                                      : "-"
                                  }}
                                </span>
                              </div>
                              <div style="margin-top: 0.5%">
                                Drop Address:
                                <span style="font-weight: bold">
                                  {{
                                    selectedCustomer.dropaddress
                                      ? selectedCustomer.dropaddress
                                      : "-"
                                  }}
                                </span>
                              </div>
                            </mat-tab>

                            <mat-tab label="Driver" class="tab-label">
                              <div style="margin-top: 1%">
                                Name:
                                <span style="font-weight: bold">
                                  {{
                                    selectedCustomer.driver_name
                                      ? selectedCustomer.driver_name
                                      : "-"
                                  }}
                                </span>
                              </div>
                              <div style="margin-top: 0.5%">
                                Mobile Number:
                                <span style="font-weight: bold">
                                  {{
                                    selectedCustomer.driver_mobile
                                      ? selectedCustomer.driver_mobile
                                      : "-"
                                  }}
                                </span>
                              </div>
                            </mat-tab>

                            <mat-tab label="Engine" class="tab-label">
                              <div style="margin-top: 1%">
                                Engine Number:
                                <span style="font-weight: bold">
                                  {{
                                    selectedCustomer.engine_number
                                      ? selectedCustomer.engine_number
                                      : "-"
                                  }}
                                </span>
                              </div>
                              <div style="margin-top: 0.5%">
                                Chassis Number:
                                <span style="font-weight: bold">
                                  {{
                                    selectedCustomer.chassis_number
                                      ? selectedCustomer.chassis_number
                                      : "-"
                                  }}
                                </span>
                              </div>
                            </mat-tab>
                          </mat-tab-group>
                        </div>
                      </mat-card-content>
                    </div>
                  </div>
                </mat-card>
              </div>

              <div class="card">
                <mat-card class="details">
                  <mat-card-title
                    style="display: flex; justify-content: space-between"
                  >
                    <div class="">Jobcard Details</div>
                    <div
                      style="width: 50px; margin-right: 60px"
                      data-toggle="modal"
                    >
                      <a href="javascript:">
                        <button
                          *ngIf="alldates != 'none'"
                          (click)="getHistoryData()"
                          data-toggle="modal"
                          data-target="#history"
                          class="btn btn-primary createjobcard history"
                        >
                          Last History
                        </button>
                        <button
                          *ngIf="alldates == 'none'"
                          data-toggle="tooltip"
                          title="No History Available"
                          class="btn btn-primary createjobcard history"
                        >
                          Last History
                        </button>
                      </a>
                    </div>
                  </mat-card-title>
                  <mat-divider></mat-divider>
                  <mat-card-content>
                    <div class="jobcard-details">
                      <div
                        class="jobcard-detail-form col-lg-12 col-sm-12 col-md-12"
                      >
                        <div
                          class="jobcard-detail-form-field col-lg-4 col-sm-4 col-md-4"
                        >
                          <mat-form-field appearance="outline">
                            <mat-label style="font-weight: bold"
                              >KM Reading</mat-label
                            >
                            <input
                              [disabled]="disableFuelKm"
                              matInput
                              placeholder="eg: 700"
                              (input)="onKmChange($event.target.value)"
                              maxlength="6"
                              [value]="kmvehicle"
                            />
                          </mat-form-field>
                        </div>

                        <div
                          class="jobcard-detail-form-field col-lg-4 col-sm-4 col-md-4"
                        >
                          <div>
                            <mat-label>Fuel Level</mat-label>
                          </div>
                          <div>
                            <mat-slider
                              [disabled]="disableFuelKm"
                              [max]="max"
                              [min]="min"
                              [thumbLabel]="thumbLabel"
                              [tickInterval]="tickInterval"
                              [(ngModel)]="valueset"
                              (change)="onSliderChange($event)"
                              style="width: 00px"
                            >
                            </mat-slider>
                          </div>
                        </div>

                        <div
                          class="jobcard-detail-form-field col-lg-4 col-sm-4 col-md-4"
                        >
                          <!-- <mat-label>Select Supervisor</mat-label> -->

                          <mat-form-field appearance="outline">
                            <mat-label style="font-weight: bold"
                              >Supervisor</mat-label
                            >
                            <mat-select
                              [disabled]="disableFuelKm"
                              [ngModelOptions]="{ standalone: true }"
                              [(ngModel)]="selectedItemOfSupervisor"
                            >
                              <mat-option>None</mat-option>
                              <mat-option
                                *ngFor="let super of supervisorList"
                                [value]="super"
                              >
                                {{ super }}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>
                      </div>

                      <span><mat-divider></mat-divider></span>
                      <div class="flex-2">
                        <div class="display-img-container">
                          <div class="img-labels">
                            <span
                              class=""
                              [matBadge]="SelectedVoice.length"
                              matBadgeOverlap="true"
                            >
                              <img
                                style="cursor: pointer"
                                class="display-img"
                                src="../../../../assets/images/MicrosoftTeams-image (1).png"
                                alt=""
                                data-toggle="modal"
                                data-target="#customer_voice_model"
                              />
                            </span>
                            <span>
                              <mat-label class="display-img-labels"
                                >Customer Voice</mat-label
                              >
                            </span>
                          </div>
                          <div class="img-labels">
                            <span>
                              <img
                                class="display-img"
                                src="../../../../assets/images/MicrosoftTeams-image (3).png"
                                alt=""
                                style="cursor: pointer"
                                data-toggle="tooltip"
                                title="Feature only Available in Create Jobcard"
                              />
                            </span>
                            <span>
                              <mat-label class="display-img-labels"
                                >Dent Marks</mat-label
                              >
                            </span>
                          </div>
                          <div class="img-labels">
                            <span>
                              <a>
                                <img
                                  class="display-img"
                                  src="../../../../assets/images/MicrosoftTeams-image.png"
                                  alt=""
                                  style="cursor: pointer"
                                  data-toggle="tooltip"
                                  title="Feature only Available in Create Jobcard"
                                />
                              </a>
                            </span>
                            <span>
                              <mat-label class="display-img-labels"
                                >Photos</mat-label
                              >
                            </span>
                          </div>
                          <div class="img-labels">
                            <span>
                              <img
                                class="display-img"
                                src="../../../../assets/images/MicrosoftTeams-image (5).png"
                                alt=""
                                style="cursor: pointer"
                                data-toggle="tooltip"
                                title="Feature only Available in Create Jobcard"
                              />
                            </span>
                            <span>
                              <mat-label class="display-img-labels"
                                >Accessories</mat-label
                              >
                            </span>
                          </div>
                          <div class="img-labels">
                            <span>
                              <img
                                class="display-img"
                                src="../../../../assets/images/MicrosoftTeams-image (2).png"
                                alt=""
                                data-toggle="tooltip"
                                title="Feature only Available in Create Jobcard"
                                style="cursor: pointer"
                              />
                            </span>
                            <span>
                              <mat-label class="display-img-labels"
                                >Work Note</mat-label
                              >
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </mat-card-content>
                </mat-card>
              </div>
            </div>
          </div>

          <!-- <div class="col-lg-8">
            <form
              [formGroup]="CreateCustomerForm"
              novalidate
              class="form-horizontal"
            >
              <input
                type="hidden"
                id="custId"
                name="custId"
                [value]="customerProfileId"
              />
              <label
                class="control-label"
                style="
                  font-size: 16px;
                  border-bottom: 1px solid #ce0e17;
                  margin-bottom: 1%;
                "
                ><b>{{'Vehicle Details' | translate}}</b></label
              >
              <div class="form-group">
                <div class="col-sm-12" style="display: flex">
                  <div class="col-lg-4 col-sm-4 col-md-4" style="width: 25%">
                    <label>{{'No Vehicle No' | translate}}.</label>
                    <label
                      class="switch"
                      style="margin-left: 9px; padding: 7px"
                    >
                      <input
                        [disabled]="showdisbale"
                        *ngIf="
                          createdJobcardSetting.showVechileNo == false ||
                          createdJobcardSetting.showVechileNo == undefined
                        "
                        [disabled]="showdisable"
                        (change)="checkNewregister($event)"
                        [value]="newregister"
                        type="checkbox"
                      />
                      <input
                        *ngIf="createdJobcardSetting.showVechileNo == true"
                        checked
                        [disabled]="showdisable"
                        (change)="checkNewregister($event)"
                        [value]="newregister"
                        type="checkbox"
                      />
                      <span class="slider round"></span>
                    </label>
                  </div>
                  <div class="col-lg-4 col-sm-4 col-md-4">
                    <label
                      class="edit-customer-csr"
                      *ngIf="
                        totalyclosethejobcard == false && showdisbale == true
                      "
                      (click)="removedisable()"
                    >
                    {{'Edit Customer' | translate}}
                    </label>
                    <label
                      class="update-customer-csr"
                      *ngIf="shoeupdate == true"
                      (click)="updatecustomerdetails()"
                    >
                    {{'Update Customer' | translate}}
                    </label>
                  </div>
                  <div class="col-lg-4 col-sm-4 col-md-4">
                    <label
                      class="cancel-update-csr"
                      *ngIf="shoeupdate == true"
                      (click)="cancelupdatecustomerdetails()"
                    >
                    {{'Cancel Update' | translate}}
                    </label>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div
                  class="col-lg-3 col-sm-3 col-md-3"
                  *ngIf="showVechileNo == false"
                >
                  <label class="control-label txt_lbl"
                    >{{'Vehicle Number' | translate}}<span
                      style="color: #c30707; font-weight: bold"
                      >*</span
                    ></label
                  >
                  <input
                    type="text"
                    [style.background-color]="inputcolor"
                    class="form-control cir"
                    formControlName="vechilenumber"
                    (change)="searchVehicleNumber($event.target.value)"
                    maxlength="10"
                    oninput="this.value = this.value.toUpperCase()"
                  />
                  <div
                    *ngIf="
                      CreateCustomerForm.controls['vechilenumber'].invalid &&
                      (CreateCustomerForm.controls['vechilenumber'].dirty ||
                        CreateCustomerForm.controls['vechilenumber'].touched)
                    "
                    class="text-danger"
                  >
                    <div
                      *ngIf="
                        CreateCustomerForm.controls['vechilenumber'].errors
                          .required
                      "
                    >
                    {{'Vehicle Number is required' | translate}}.
                    </div>
                    <div
                      *ngIf="
                        CreateCustomerForm.controls['vechilenumber'].errors
                          .pattern
                      "
                    >
                    {{'Enter a valid Vehicle Number' | translate}}.
                    </div>
                  </div>
                </div>
                <div
                  class="col-lg-3 col-sm-3 col-md-3"
                  *ngIf="
                    (createdJobcardSetting.engine_chassis_number != 0 &&
                      jobcardSettingData != undefined &&
                      jobcardSettingData.engine_chassis_number == '1') ||
                    showVechileNo == true
                  "
                >
                  <label
                    *ngIf="showVechileNo == false"
                    class="control-label txt_lbl"
                    >{{'Chassis Number' | translate}}</label
                  >
                  <label
                    *ngIf="showVechileNo == true"
                    class="control-label txt_lbl"
                    >{{'Chassis Number' | translate}}<span
                      style="color: #c30707; font-weight: bold"
                      >*</span
                    ></label
                  >
                  <input
                    [style.background-color]="inputcolor"
                    type="text"
                    class="form-control cir"
                    formControlName="chassisnumber"
                  />
                  <div
                    *ngIf="
                      CreateCustomerForm.controls['chassisnumber'].invalid &&
                      (CreateCustomerForm.controls['chassisnumber'].dirty ||
                        CreateCustomerForm.controls['chassisnumber'].touched)
                    "
                    class="text-danger"
                  >
                    <div
                      *ngIf="
                        CreateCustomerForm.controls['chassisnumber'].errors
                          .required
                      "
                    >
                    {{'Chassis Number is required' | translate}}.
                    </div>
                  </div>
                </div>
                <div
                  class="col-lg-3 col-sm-3 col-md-3"
                  *ngIf="
                    createdJobcardSetting.engine_chassis_number != 0 &&
                    jobcardSettingData != undefined &&
                    jobcardSettingData.engine_chassis_number == '1'
                  "
                >
                  <label class="control-label txt_lbl">{{'Engine Number' | translate}}</label>
                  <input
                    [style.background-color]="inputcolor"
                    type="text"
                    class="form-control cir"
                    formControlName="enginenumber"
                  />
                </div>
                
              </div>
              <div class="form-group">
                <div
                  class="col-sm-1"
                  style="width: 10%"
                  *ngIf="
                    createdJobcardSetting.vehicle_color != 0 &&
                    jobcardSettingData != undefined &&
                    jobcardSettingData.vehicle_color == '1'
                  "
                >
                  <label class="control-label txt_lbl">{{'Colour' | translate}}</label>
                  <input
                    type="text"
                    (click)="openColorBox()"
                    [style.background-color]="getColor"
                    style="width: 55px; height: 29px; border-radius: 14px"
                    class="form-controll"
                    formControlName="color"
                    readonly
                  />
                </div>
                <div class="col-sm-5 jobcard">
                  <label class="control-label txt_lbl"
                    >{{'Search and Select Vehicle' | translate}}<span
                      style="color: #c30707; font-weight: bold"
                      >*</span
                    ></label
                  >
                  <ng-autocomplete
                    formControlName="searchVehicle"
                    [disabled]="totalyclosethejobcard"
                    [(ngModel)]="vehiclesearchmodel"
                    placeHolder="{{'Search Vehicle by Make, Model, Varraint' | translate}}"
                    [data]="searchVehicleData"
                    (selected)="selectedResultForVechile($event)"
                    (input)="searchBarForVechile($event.target.value)"
                    [itemTemplate]="itemTemplate"
                    [notFoundTemplate]="notFoundTemplate"
                  >
                  </ng-autocomplete>

                  <ng-template #itemTemplate let-item>
                    <a [innerHTML]="item"></a>
                  </ng-template>

                  <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                  </ng-template>
                </div>
              </div>
              <div *ngIf="SelectedDataarrOfVehicle != undefined">
                <label class="control-label txt_lbl">{{'Selected Vehicle' | translate}}</label>
                <div class="d-flex flex-row">
                  <input
                    type="hidden"
                    class="form-control cir back-change"
                    formControlName="twowheetertype"
                  />
                  <div
                    class="col-lg-3 col-sm-3 col-md-3 text-left"
                    style="
                      background: linear-gradient(
                        to bottom,
                        #ff0000 0%,
                        #563b3b 100%
                      );
                      width: 100px;
                      height: 26px;
                      text-align: center;
                      padding: 3px;
                      color: white;
                      border-top-left-radius: 5px;
                      border-bottom-left-radius: 5px;
                    "
                  >
                    <span>{{ SelectedDataarrOfVehicle.make }}</span>
                  </div>
                  <div
                    class="col-lg-3 col-sm-3 col-md-3 text-left"
                    style="
                      background-color: #52524f;
                      width: 90px;
                      height: 26px;
                      text-align: center;
                      padding: 3px;
                      color: white;
                    "
                  >
                    <span>{{ SelectedDataarrOfVehicle.model }}</span>
                  </div>
                  <div
                    class="col-lg-3 col-sm-3 col-md-3 text-left"
                    *ngIf="SelectedDataarrOfVehicle.variant"
                    style="
                      background-color: #52524f;
                      width: auto;
                      height: 26px;
                      text-align: center;
                      padding: 3px;
                      color: white;
                      border-top-right-radius: 5px;
                      border-bottom-right-radius: 5px;
                    "
                  >
                    <span>{{ SelectedDataarrOfVehicle.variant }}</span>
                  </div>
                </div>
              </div>
              <br />
              <br />
              <label
                class="control-label"
                style="
                  font-size: 16px;
                  border-bottom: 1px solid #ce0e17;
                  margin-bottom: 1%;
                "
                ><b>{{'Customer Details' | translate}}</b></label
              >
              <div class="form-group">
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl"
                    >{{'Customer Name' | translate}}<span
                      style="color: #c30707; font-weight: bold"
                      >*</span
                    ></label
                  >
                  <input
                    [style.background-color]="inputcolor"
                    type="text"
                    class="form-control cir"
                    formControlName="customername"
                  />
                  <div
                    *ngIf="
                      CreateCustomerForm.controls['customername'].invalid &&
                      (CreateCustomerForm.controls['customername'].dirty ||
                        CreateCustomerForm.controls['customername'].touched)
                    "
                    class="text-danger"
                  >
                    <div
                      *ngIf="
                        CreateCustomerForm.controls['customername'].errors
                          .required
                      "
                    >
                    {{'Customer Name is required' | translate}}.
                    </div>
                  </div>
                </div>
                <div class="col-sm-2">
                  <label class="control-label txt_lbl"
                    >{{'Mobile No' | translate}}. 1<span style="color: #c30707; font-weight: bold"
                      >*</span
                    ></label
                  >
                  <input
                    [style.background-color]="inputcolor"
                    type="text"
                    class="form-control cir"
                    formControlName="mobileOneNo"
                    maxlength="10"
                  />
                  <div
                    *ngIf="
                      CreateCustomerForm.controls['mobileOneNo'].invalid &&
                      (CreateCustomerForm.controls['mobileOneNo'].dirty ||
                        CreateCustomerForm.controls['mobileOneNo'].touched)
                    "
                    class="text-danger"
                  >
                    <div
                      *ngIf="
                        CreateCustomerForm.controls['mobileOneNo'].errors
                          .required
                      "
                    >
                    {{'Mobile Number is required' | translate}}.
                    </div>
                    <div
                      *ngIf="
                        CreateCustomerForm.controls['mobileOneNo'].errors
                          .pattern
                      "
                    >
                    {{'Enter a valid Phone Number' | translate}}.
                    </div>
                  </div>
                </div>
                <div
                  class="col-sm-2"
                  *ngIf="
                    createdJobcardSetting.customer_mobile_number != 0 &&
                    jobcardSettingData != undefined &&
                    jobcardSettingData.customer_mobile_number == '1'
                  "
                >
                  <label class="control-label txt_lbl">{{'Mobile No' | translate}}. 2</label>
                  <input
                    [style.background-color]="inputcolor"
                    type="text"
                    class="form-control cir"
                    formControlName="mobileTwoNo"
                    maxlength="10"
                  />
                  
                  <div
                    *ngIf="
                      CreateCustomerForm.controls['mobileTwoNo'].invalid &&
                      (CreateCustomerForm.controls['mobileTwoNo'].dirty ||
                        CreateCustomerForm.controls['mobileTwoNo'].touched)
                    "
                    class="text-danger"
                  >
                    <div
                      *ngIf="
                        CreateCustomerForm.controls['mobileTwoNo'].errors
                          .pattern
                      "
                    >
                    {{'Enter a valid Phone Number' | translate}}.
                    </div>
                  </div>
                </div>
                <div
                  class="col-lg-4 col-sm-4 col-md-4"
                  *ngIf="
                    createdJobcardSetting.customer_email != 0 &&
                    jobcardSettingData != undefined &&
                    jobcardSettingData.customer_email == '1'
                  "
                >
                  <label class="control-label txt_lbl">{{'Email Address' | translate}}</label>
                  <input
                    [style.background-color]="inputcolor"
                    type="text"
                    class="form-control cir"
                    formControlName="email"
                  />
                  <div
                    *ngIf="
                      CreateCustomerForm.controls['email'].invalid &&
                      (CreateCustomerForm.controls['email'].dirty ||
                        CreateCustomerForm.controls['email'].touched)
                    "
                    class="text-danger"
                  >
                    <div
                      *ngIf="CreateCustomerForm.controls['email'].errors.email"
                    >
                    {{'Enter a valid Email' | translate}}.
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div
                  class="col-sm-2"
                  *ngIf="
                    createdJobcardSetting.customer_birthday != 0 &&
                    jobcardSettingData != undefined &&
                    jobcardSettingData.customer_birthday == '1'
                  "
                >
                  <label class="control-label txt_lbl">{{'Date of Birth' | translate}}</label>
                  
                  <div style="display: flex">
                    <input
                      style="width: 97px"
                      class="form-control cir"
                      matInput
                      placeholder=""
                      [satDatepicker]="picker4"
                      [max]="todaydob"
                      formControlName="dob"
                      [value]="dateOfBirth"
                      readonly
                    />
                    <sat-datepicker #picker4> </sat-datepicker>
                    <sat-datepicker-toggle
                      matSuffix
                      [for]="picker4"
                    ></sat-datepicker-toggle>
                  </div>
                  
                </div>
                <div
                  class="col-sm-5"
                  *ngIf="
                    createdJobcardSetting.customer_pickup_address != 0 &&
                    jobcardSettingData != undefined &&
                    jobcardSettingData.customer_pickup_address == '1'
                  "
                >
                  <label class="control-label txt_lbl" style="padding-left: 5%"
                    >{{'Pickup Address' | translate}}</label
                  >
                  <input
                    [style.background-color]="inputcolor"
                    type="text"
                    class="form-control cir"
                    formControlName="pickupaddress"
                  />
                </div>
                <div
                  class="col-sm-5"
                  *ngIf="
                    createdJobcardSetting.customer_delivery_address != 0 &&
                    jobcardSettingData != undefined &&
                    jobcardSettingData.customer_delivery_address == '1'
                  "
                >
                  <label class="control-label txt_lbl" style="padding-left: 5%"
                    >{{'Drop Address' | translate}}</label
                  >
                  <span
                    style="
                      font-size: 11px;
                      float: right;
                      margin-right: 20px;
                      margin-top: 5px;
                    "
                  >
                    <input
                      [disabled]="showdisbale"
                      *ngIf="
                        createdJobcardSetting.samePickup == false ||
                        createdJobcardSetting.samePickup == undefined
                      "
                      [disabled]="CreateCustomerForm.value.pickupaddress == ''"
                      type="checkbox"
                      (change)="sameAsPickupAddress($event)"
                      value="newregister"
                    />
                    <input
                      *ngIf="createdJobcardSetting.samePickup == true"
                      checked
                      [disabled]="CreateCustomerForm.value.pickupaddress == ''"
                      type="checkbox"
                      (change)="sameAsPickupAddress($event)"
                      value="newregister"
                    />
                    {{'Same as Pickup Address' | translate}}
                  </span>
                  <input
                    [style.background-color]="inputcolor"
                    *ngIf="
                      createdJobcardSetting.samePickup == false ||
                      (createdJobcardSetting.samePickup == undefined &&
                        samePickup == false)
                    "
                    type="text"
                    class="form-control cir"
                    formControlName="dropaddress"
                  />
                  <input
                    [style.background-color]="inputcolor"
                    *ngIf="
                      createdJobcardSetting.samePickup == true ||
                      samePickup == true
                    "
                    type="text"
                    class="form-control cir"
                    formControlName="dropaddress"
                    value="{{ CreateCustomerForm.value.pickupaddress }}"
                    readonly
                  />
                </div>
              </div>
              <div class="form-group">
                <div
                  class="col-lg-3 col-sm-3 col-md-3"
                  *ngIf="
                    createdJobcardSetting.gst_number != '' &&
                    allBillingData != undefined &&
                    allBillingData.gst_number != ''
                  "
                >
                  <label class="control-label txt_lbl">{{'GST Number' | translate}}</label>
                  <input
                    [style.background-color]="inputcolor"
                    type="text"
                    class="form-control cir"
                    formControlName="gstno"
                  />
                </div>
                <div
                  *ngIf="
                    createdJobcardSetting.driver_details != 0 &&
                    jobcardSettingData != undefined &&
                    jobcardSettingData.driver_details == '1'
                  "
                >
                  <div class="col-sm-offset-1 col-sm-3">
                    <label class="control-label txt_lbl">{{'Driver Name' | translate}} </label>
                    <input
                      [style.background-color]="inputcolor"
                      type="text"
                      class="form-control cir"
                      formControlName="drivername"
                    />
                  </div>
                  <div class="col-sm-offset-1 col-sm-3">
                    <label class="control-label txt_lbl">{{'Driver Number' | translate}}</label>
                    <input
                      [style.background-color]="inputcolor"
                      type="text"
                      class="form-control cir"
                      formControlName="driverno"
                    />
                    <div
                      *ngIf="
                        CreateCustomerForm.controls['driverno'].invalid &&
                        (CreateCustomerForm.controls['driverno'].dirty ||
                          CreateCustomerForm.controls['driverno'].touched)
                      "
                      class="text-danger"
                    >
                      <div
                        *ngIf="
                          CreateCustomerForm.controls['driverno'].errors.pattern
                        "
                      >
                      {{'Enter a valid Phone Number' | translate}}.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <br />
            </form>
            <div class="col-sm-8" *ngIf="showInvoiceForm == true">
              <label
                class="control-label"
                style="
                  font-size: 16px;
                  border-bottom: 1px solid #ce0e17;
                  margin-top: -1%;
                  margin-left: -317px;
                "
                ><b>{{'Odometer Details' | translate}}</b></label
              >
              <div
                class="col-lg-4 col-sm-4 col-md-4"
                style="margin-top: 5%; margin-left: -30px"
              >
                <label class="control-label txt_lbl"
                  >{{'KM Reading' | translate}}<span style="color: #c30707; font-weight: bold"
                    >*</span
                  ></label
                >
                <input
                  [disabled]="totalyclosethejobcard"
                  type="text"
                  class="form-control cir"
                  (input)="onKmChange($event.target.value)"
                  maxlength="6"
                  [value]="kmvehicle"
                />
                <div *ngIf="kmvehicleerror == true" class="text-danger">
                  {{'Only Numeric Value' | translate}}.
                </div>
              </div>
              <div class="col-lg-4 col-sm-4 col-md-4" style="margin-top: 5%">
                <label class="control-label txt_lbl"
                  >{{'Fuel Level' | translate}} ({{ valueset }}%)</label
                >
                <mat-slider
                  class="example-margin"
                  [disabled]="disabledskide"
                  [max]="max"
                  [min]="min"
                  [thumbLabel]="thumbLabel"
                  [tickInterval]="tickInterval"
                  [(ngModel)]="valueset"
                  (change)="onSliderChange($event)"
                >
                </mat-slider>
              </div>
            </div>
          </div>
          <div
            class="col-lg-4"
            style="text-align: right; margin-top: 3%"
            *ngIf="showInvoiceForm == true"
          >
            <label
              *ngIf="
                totalyclosethejobcard == false && showSelectedVoice == false
              "
              class="btn btn-primary cir cir_btn"
              data-toggle="modal"
              data-target="#customer_voice_model"
              style="margin-top: 7%; margin-bottom: 5%"
              >{{'Customer Voice' | translate}}</label
            >
            <label
              *ngIf="
                SelectedVoice.length == 0 &&
                totalyclosethejobcard == true &&
                showSelectedVoice == false
              "
              class="btn btn-primary cir cir_btn"
              style="margin-top: 7%; margin-bottom: 5%"
              >{{'No Customer Voice' | translate}}</label
            >
            <div
              class="btn btn-primary cir cir_btn"
              *ngIf="showSelectedVoice == true"
            >
              <span
                class="cir"
                style="padding: 0 15px; cursor: pointer"
                (click)="closeInputField()"
              >
                <i
                  *ngIf="totalyclosethejobcard == false"
                  class="fa fa-edit"
                  aria-hidden="true"
                  data-toggle="modal"
                  data-target="#customer_voice_model"
                ></i>
                <label class="control-label txt_lbl">{{'Customer Voice' | translate}}</label>
              </span>
              <select class="form-control cir" style="color: black">
                <option selected>{{'Selected Customer Voice' | translate}}</option>
                <option
                  disabled
                  *ngFor="let data of SelectedVoice"
                  value="{{ data }}"
                >
                  {{ data }}
                </option>
              </select>
            </div>
            <br />
            <label
              *ngIf="alldates != 'none'"
              (click)="getHistoryData()"
              class="btn btn-primary cir cir_btn"
              style="margin-bottom: 5%"
              data-toggle="modal"
              data-target="#history"
              >{{'Last History' | translate}}</label
            >
          </div> -->
        </div>
        <div
          class="tabs-container"
          style="margin-top: 5rem"
          id="destination"
          #destinationRef
        >
          <div class="nav nav-tabs" style="padding: 0px 0px 17px">
            <a data-toggle="tab" href="#tab-6">
              <div
                (click)="getallData('job')"
                class="col-lg-2 col-sm-3 col-md-3 card-tab-size"
                data-toggle="tooltip"
                title="Jobs"
                style="cursor: pointer"
              >
                <div class="card-tab">
                  <div class="text-left">
                    <span style="font-weight: 700">
                      {{ "Labour" | translate }} ({{ jobdatatabel.length }})
                    </span>
                  </div>
                  <div
                    class="text-right"
                    style="margin-top: -22px; margin-bottom: -10px"
                    *ngIf="createdJobcardSetting.item_wise_discount != 0"
                  >
                    <span style="font-weight: 700">
                      {{ currency_symbol }}
                      {{ JobTotal - JobTotalFinal | number: "1.2-2" }}
                    </span>
                    <br />
                    <span
                      style="font-size: 10px; position: relative; top: -9px"
                    >
                      {{ "Discount" | translate }} {{ currency_symbol }}
                      {{ JobTotalFinal | number: "1.2-2" }}
                    </span>
                  </div>
                  <div
                    class="text-right"
                    style="margin-top: -22px"
                    *ngIf="createdJobcardSetting.item_wise_discount == 0"
                  >
                    <span style="font-weight: 700">
                      {{ currency_symbol }}
                      {{ JobTotal - JobTotalFinal | number: "1.2-2" }}
                    </span>
                  </div>
                </div>
                <div [class]="jobclass">
                  <div>
                    <div class="totaljobb text-left">
                      <button
                        style="padding: 8px; background-color: #1b8a6f"
                        class="countbuttonn"
                      >
                        <img
                          style="width: 27px"
                          src="../../../../assets/images/transportation.png"
                          alt=""
                        />
                      </button>
                    </div>
                    <!-- <div class="lineadd"></div> -->
                    <div class="text-right" style="margin-top: -48px">
                      <span style="font-family: Open sans; font-size: 12px"
                        >{{ "Total" | translate }}: {{ currency_symbol }}
                        {{ JobTotal | number: "1.2-2" }}</span
                      >
                      <div
                        *ngIf="createdJobcardSetting.item_wise_discount != 0"
                        class="input-group"
                        style="display: flex; margin-left: 58px"
                      >
                        <span style="font-family: Open sans; font-size: 10px"
                          >{{ "Discount" | translate }}:
                        </span>
                        <input
                          style="width: 45%; text-align: center; height: 23px"
                          class="form-control cir sml_in"
                          [disabled]="totalyclosethejobcard || showjobdis"
                          (input)="
                            checkdiscountofjob($event.target.value, 'true')
                          "
                          type="text"
                          [value]="jodisvalue"
                          placeholder="{{ 'Enter Job Discount' | translate }}"
                        />
                        <div
                          class="input-group-append"
                          style="
                            background-color: #c30707;
                            color: #fff;
                            padding: 0px 8px 5px 8px;
                            border-top-right-radius: 5px;
                            border-bottom-right-radius: 5px;
                            height: 23px;
                          "
                        >
                          <span class="input-group-text">%</span>
                        </div>
                        <span
                          style="margin-left: 12px"
                          *ngIf="showjobdiserror == true"
                          class="text-danger"
                        >
                          {{
                            "Please enetr the valid numeric value" | translate
                          }}
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </a>
            <a data-toggle="tab" href="#tab-4">
              <div
                (click)="getallData('spare')"
                class="col-lg-2 col-sm-3 col-md-3 card-tab-size"
                data-toggle="tooltip"
                title="Spare"
                style="cursor: pointer"
              >
                <div class="card-tab-1">
                  <div class="text-left">
                    <span style="font-weight: 700">
                      {{ "Spare" | translate }} ({{ sparedatatabel.length }})
                    </span>
                  </div>
                  <div
                    class="text-right"
                    style="margin-top: -22px; margin-bottom: -10px"
                    *ngIf="createdJobcardSetting.item_wise_discount != 0"
                  >
                    <span style="font-weight: 700">
                      {{ currency_symbol }}
                      {{ SpareTotal - SpareTotalFinal | number: "1.2-2" }}
                    </span>
                    <br />
                    <span
                      style="font-size: 10px; position: relative; top: -9px"
                    >
                      {{ "Discount" | translate }} {{ currency_symbol }}
                      {{ SpareTotalFinal | number: "1.2-2" }}
                    </span>
                  </div>
                  <div
                    class="text-right"
                    style="margin-top: -22px"
                    *ngIf="createdJobcardSetting.item_wise_discount == 0"
                  >
                    <span style="font-weight: 700">
                      {{ currency_symbol }}
                      {{ SpareTotal - SpareTotalFinal | number: "1.2-2" }}
                    </span>
                  </div>
                </div>
                <div [class]="spareclass">
                  <div>
                    <div class="totaljobb text-left">
                      <button
                        style="padding: 8px; background-color: #588ac4"
                        class="countbuttonn"
                      >
                        <img
                          style="width: 27px"
                          src="../../../../assets/images/vehicle.png"
                          alt=""
                        />
                      </button>
                    </div>
                    <!-- <div class="lineadd"></div> -->
                    <div class="text-right" style="margin-top: -48px">
                      <span style="font-family: Open sans; font-size: 12px"
                        >{{ "Total" | translate }}: {{ currency_symbol }}
                        {{ SpareTotal | number: "1.2-2" }}</span
                      >
                      <div
                        *ngIf="createdJobcardSetting.item_wise_discount != 0"
                        class="input-group"
                        style="display: flex; margin-left: 58px"
                      >
                        <span style="font-family: Open sans; font-size: 10px"
                          >{{ "Discount" | translate }}:
                        </span>
                        <input
                          style="width: 45%; text-align: center; height: 23px"
                          class="form-control cir sml_in"
                          [disabled]="totalyclosethejobcard || showsparedis"
                          (input)="
                            checkdiscountofspare($event.target.value, 'true')
                          "
                          type="text"
                          [value]="spareisvalue"
                          placeholder="{{ 'Enter Spare Discount' | translate }}"
                        />
                        <div
                          class="input-group-append"
                          style="
                            background-color: #c30707;
                            color: #fff;
                            padding: 0px 8px 5px 8px;
                            border-top-right-radius: 5px;
                            border-bottom-right-radius: 5px;
                            height: 23px;
                          "
                        >
                          <span class="input-group-text">%</span>
                        </div>
                        <span
                          style="margin-left: 12px"
                          *ngIf="showsparediserror == true"
                          class="text-danger"
                        >
                          {{
                            "Please enetr the valid numeric value" | translate
                          }}
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </a>
            <a data-toggle="tab" href="#tab-5">
              <div
                (click)="getallData('lube')"
                class="col-lg-2 col-sm-3 col-md-3 card-tab-size"
                data-toggle="tooltip"
                title="Lube"
                style="cursor: pointer"
              >
                <div class="card-tab-2">
                  <div class="text-left">
                    <span style="font-weight: 700">
                      {{ "Lube" | translate }} ({{ lubedatatabel.length }})
                    </span>
                  </div>
                  <div
                    class="text-right"
                    style="margin-top: -22px; margin-bottom: -10px"
                    *ngIf="createdJobcardSetting.item_wise_discount != 0"
                  >
                    <span style="font-weight: 700">
                      {{ currency_symbol }}
                      {{ LubeTotal - LubeTotalFinal | number: "1.2-2" }}
                    </span>
                    <br />
                    <span
                      style="font-size: 10px; position: relative; top: -9px"
                    >
                      {{ currency_symbol }}
                      {{ LubeTotalFinal | number: "1.2-2" }}
                    </span>
                  </div>
                  <div
                    class="text-right"
                    style="margin-top: -22px"
                    *ngIf="createdJobcardSetting.item_wise_discount == 0"
                  >
                    <span style="font-weight: 700">
                      {{ currency_symbol }}
                      {{ LubeTotal - LubeTotalFinal | number: "1.2-2" }}
                    </span>
                  </div>
                </div>
                <div [class]="lubeclass">
                  <div>
                    <div class="totaljobb text-left">
                      <button
                        style="padding: 8px; background-color: #c87239"
                        class="countbuttonn"
                      >
                        <img
                          style="width: 27px"
                          src="../../../../assets/images/industry.png"
                          alt=""
                        />
                      </button>
                    </div>
                    <!-- <div class="lineadd"></div> -->
                    <div class="text-right" style="margin-top: -48px">
                      <span style="font-family: Open sans; font-size: 12px"
                        >{{ "Total" | translate }}: {{ currency_symbol }}
                        {{ LubeTotal | number: "1.2-2" }}</span
                      >
                      <div
                        *ngIf="createdJobcardSetting.item_wise_discount != 0"
                        class="input-group"
                        style="display: flex; margin-left: 58px"
                      >
                        <span style="font-family: Open sans; font-size: 10px"
                          >{{ "Discount" | translate }}:
                        </span>
                        <input
                          style="width: 45%; text-align: center; height: 23px"
                          class="form-control cir sml_in"
                          [disabled]="totalyclosethejobcard || showlubedis"
                          (input)="
                            checkdiscountoflube($event.target.value, 'true')
                          "
                          type="text"
                          [value]="lubeisvalue"
                          placeholder="{{ 'Enter Lube Discount' | translate }}"
                        />
                        <div
                          class="input-group-append"
                          style="
                            background-color: #c30707;
                            color: #fff;
                            padding: 0px 8px 5px 8px;
                            border-top-right-radius: 5px;
                            border-bottom-right-radius: 5px;
                            height: 23px;
                          "
                        >
                          <span class="input-group-text">%</span>
                        </div>
                        <span
                          style="margin-left: 12px"
                          *ngIf="showslubediserror == true"
                          class="text-danger"
                        >
                          {{
                            "Please enetr the valid numeric value" | translate
                          }}
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </a>
            <a data-toggle="tab" href="#tab-7">
              <div
                (click)="getTotal()"
                class="col-lg-2 col-sm-3 col-md-3 card-tab-size"
                data-toggle="tooltip"
                title="Total Inventory"
                style="cursor: pointer"
              >
                <div class="card-tab-3">
                  <div class="text-left">
                    <span style="font-weight: 700">
                      {{ "Total" | translate }} ({{
                        lubedatatabel.length +
                          sparedatatabel.length +
                          jobdatatabel.length
                      }})
                    </span>
                  </div>
                  <div
                    class="text-right"
                    style="margin-top: -22px; margin-bottom: -10px"
                    *ngIf="createdJobcardSetting.item_wise_discount != 0"
                  >
                    <span style="font-weight: 700">
                      {{ currency_symbol }}
                      {{
                        LubeTotal -
                          LubeTotalFinal +
                          (SpareTotal - SpareTotalFinal) +
                          (JobTotal - JobTotalFinal) | number: "1.2-2"
                      }}
                    </span>
                    <br />
                    <span
                      style="font-size: 10px; position: relative; top: -9px"
                    >
                      {{ "Discount" | translate }} {{ currency_symbol }}
                      {{
                        JobTotalFinal + SpareTotalFinal + LubeTotalFinal
                          | number: "1.2-2"
                      }}
                    </span>
                  </div>
                  <div
                    class="text-right"
                    style="margin-top: -22px"
                    *ngIf="createdJobcardSetting.item_wise_discount == 0"
                  >
                    <span style="font-weight: 700">
                      {{ currency_symbol }}
                      {{
                        LubeTotal -
                          LubeTotalFinal +
                          (SpareTotal - SpareTotalFinal) +
                          (JobTotal - JobTotalFinal) | number: "1.2-2"
                      }}
                    </span>
                  </div>
                </div>
                <div class="totalandname">
                  <div>
                    <div class="totaljobb text-left">
                      <button
                        style="padding: 22px; background-color: #7e827f"
                        class="countbuttonn"
                      ></button>
                    </div>
                    <!-- <div class="lineadd"></div> -->
                    <div class="text-right" style="margin-top: -48px">
                      <span style="font-family: Open sans; font-size: 12px"
                        >{{ "Total" | translate }}: {{ currency_symbol }}
                        {{
                          LubeTotal + SpareTotal + JobTotal | number: "1.2-2"
                        }}</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </a>
          </div>
          <div class="tab-content">
            <div id="tab-4" class="tab-pane">
              <div
                class="panel-body"
                style="padding: 0px 0 15px 0; background: #f1f1f1"
              >
                <div class="table-responsive-custom">
                  <table
                    class="table table_left table-bordered"
                    style="background-color: #fff"
                  >
                    <thead>
                      <tr>
                        <!-- <th style="width: 5%;">Sr No.</th> -->
                        <th style="background-color: #588ac4; color: #fff">
                          {{ "Particulars" | translate }}
                          <div class="form-group form-check">
                            <input
                              type="checkbox"
                              class="form-check-input"
                              id="exampleCheck1"
                              [(ngModel)]="isShowPartNumber"
                              [value]="isShowPartNumber"
                              (click)="isShowPartName()"
                            />
                            <label class="form-check-label" for="exampleCheck1">
                              Show Part Number</label
                            >
                          </div>
                        </th>
                        <!-- <th style="width: 91px;">Available Quantity</th> -->
                        <th style="background-color: #588ac4; color: #fff">
                          {{ "Quantity" | translate }}
                        </th>
                        <th style="background-color: #588ac4; color: #fff">
                          {{ "Unit Price" | translate }} ({{ currency_symbol }})
                        </th>
                        <th
                          style="background-color: #588ac4; color: #fff"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                        >
                          {{ "HSN" | translate }}
                        </th>
                        <th
                          style="background-color: #588ac4; color: #fff"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                        >
                          {{ "GST" | translate }}(%)
                        </th>
                        <!-- <th>Discount</th> -->
                        <th style="background-color: #588ac4; color: #fff">
                          {{ "Total Amount" | translate }}
                        </th>
                        <th
                          style="background-color: #588ac4; color: #fff"
                          *ngIf="createdJobcardSetting.item_wise_discount != 0"
                        >
                          {{ "Discount" | translate }}
                        </th>
                        <th style="background-color: #588ac4; color: #fff">
                          {{ "Final Amount" | translate }}
                        </th>
                        <th
                          style="background-color: #588ac4; color: #fff"
                          *ngIf="createdJobcardSetting.jobwise_mechanic != 0"
                        >
                          {{ "Assigned Mechanic" | translate }}
                        </th>
                        <th style="background-color: #588ac4; color: #fff">
                          {{ "Action" | translate }}
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let data of sparedatatabel; let i = index">
                        <td style="padding: 18px 5px 0px 5px">
                          {{ data.part_name }}
                          <br />
                          <span *ngIf="isShowPartNumber"
                            >({{ data.part_number }})</span
                          >
                        </td>
                        <td style="padding: 10px 5px 0px 5px">
                          <span style="display: flex">
                            <i
                              *ngIf="data.showqunatityerrorspare == true"
                              class="fa fa-exclamation-triangle"
                              aria-hidden="true"
                              data-toggle="tooltip"
                              title="{{
                                'Please enter only Numeric value' | translate
                              }}"
                              style="
                                color: #c30707;
                                font-weight: bold;
                                padding: 3px 8px;
                              "
                            ></i>
                            <input
                              class="form-control cir sml_in"
                              [disabled]="totalyclosethejobcard"
                              (input)="
                                checkvalueentered($event.target.value, i, data)
                              "
                              type="text"
                              [value]="data.quantity"
                              placeholder="{{
                                'Please enter Quantity' | translate
                              }}"
                              style="width: 70px"
                            />
                          </span>
                        </td>
                        <td style="width: 8%; padding: 10px 5px 0px 5px">
                          <span style="display: flex">
                            <i
                              *ngIf="data.showpriceerrorspare == true"
                              class="fa fa-exclamation-triangle"
                              aria-hidden="true"
                              data-toggle="tooltip"
                              title="{{
                                'Please enter only Numeric value' | translate
                              }}"
                              style="
                                color: #c30707;
                                font-weight: bold;
                                padding: 3px 8px;
                              "
                            ></i>
                            <input
                              class="form-control cir"
                              [disabled]="totalyclosethejobcard"
                              (input)="
                                checkvalueenteredforspare(
                                  $event.target.value,
                                  i,
                                  data
                                )
                              "
                              type="text"
                              [value]="data.unit_sale_price"
                              placeholder="Please enter Quantity"
                              style="width: 84px"
                            />
                          </span>
                        </td>
                        <td
                          style="width: 10%; padding: 10px 5px 0px 5px"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                        >
                          <input
                            class="form-control cir sml_in"
                            [disabled]="totalyclosethejobcard"
                            type="text"
                            (input)="hsnforspare($event.target.value, i, data)"
                            [value]="data.hsn_no"
                            style="width: 100px; text-align: center"
                            placeholder="Please enter HSN no."
                          />
                        </td>
                        <td
                          style="width: 19%; padding: 10px 5px 10px 5px"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                          style="width: 17%"
                        >
                          <span *ngIf="data.sale_gst_rate != ''">
                            <div style="display: flex">
                              <span
                                *ngIf="data.showcalcluationinfo == true"
                                style="
                                  padding: 10px 0px 0px 0px;
                                  margin-right: 2px;
                                "
                              >
                                <i
                                  class="fa fa-check-circle"
                                  aria-hidden="true"
                                  data-toggle="tooltip"
                                  title="{{ 'GST Amount' | translate }} ({{
                                    data.gstcalculateofspare
                                  }})  {{ 'CGST Amount' | translate }} ({{
                                    data.cgstcalculateofspare
                                  }})  {{ 'SGST Amount' | translate }} ({{
                                    data.sgstcalculateofspare
                                  }})"
                                  style="color: #c30707; font-weight: bold"
                                ></i>
                              </span>
                              <span
                                *ngIf="
                                  !gstNumberArr.includes(data.sale_gst_rate) ||
                                  !gsttype.includes(data.sale_tax_type)
                                "
                                style="padding: 12px 5px 0px 0px"
                              >
                                <i
                                  class="fa fa-exclamation-triangle"
                                  aria-hidden="true"
                                  data-toggle="tooltip"
                                  title="{{ 'This Sale GST' | translate }} ({{
                                    data.sale_gst_rate
                                  }}) {{
                                    'Rate Is not Valid Please Select other one'
                                      | translate
                                  }}"
                                  style="color: #c30707; font-weight: bold"
                                ></i>
                              </span>
                              <div
                                class="row"
                                style="padding: 0px 0px 0px 16px"
                              >
                                <select
                                  style="width: 77px"
                                  [disabled]="totalyclosethejobcard"
                                  (change)="
                                    checksparegst(
                                      $event.target.value,
                                      data,
                                      i,
                                      'gstNotNull'
                                    )
                                  "
                                  class="form-control cir"
                                  [(ngModel)]="data.sale_gst_rate"
                                >
                                  <option
                                    *ngFor="let dataarr of gstNumberArr"
                                    value="{{ dataarr }}"
                                  >
                                    {{ dataarr }}
                                  </option>
                                </select>
                              </div>
                              <div class="row" style="margin-left: 19px">
                                <select
                                  style="width: 77px; margin-right: 10px"
                                  [disabled]="totalyclosethejobcard"
                                  (change)="
                                    checksparegsttype(
                                      $event.target.value,
                                      data,
                                      i,
                                      'gstNotNull'
                                    )
                                  "
                                  class="form-control cir"
                                  [(ngModel)]="data.sale_tax_type"
                                >
                                  <option value="Exclusive">
                                    {{ "Excl" | translate }}.
                                  </option>
                                  <option value="Inclusive">
                                    {{ "Incl" | translate }}.
                                  </option>
                                </select>
                              </div>
                            </div>
                          </span>
                          <span *ngIf="data.sale_gst_rate == ''">
                            <div style="display: flex">
                              <span
                                *ngIf="data.showcalcluationinfo == true"
                                style="
                                  padding: 10px 0px 0px 0px;
                                  margin-right: 2px;
                                "
                              >
                                <i
                                  class="fa fa-check-circle"
                                  aria-hidden="true"
                                  data-toggle="tooltip"
                                  title="{{ 'GST Amount' | translate }} ({{
                                    data.gstcalculateofspare
                                  }})  {{ 'CGST Amount' | translate }} ({{
                                    data.cgstcalculateofspare
                                  }})  {{ 'SGST Amount' | translate }} ({{
                                    data.sgstcalculateofspare
                                  }})"
                                  style="color: #c30707; font-weight: bold"
                                ></i>
                              </span>
                              <span
                                *ngIf="
                                  !gstNumberArr.includes(
                                    data.purchase_gst_rate
                                  ) || !gsttype.includes(data.purchase_tax_type)
                                "
                                style="padding: 12px 5px 0px 0px"
                              >
                                <i
                                  class="fa fa-exclamation-triangle"
                                  aria-hidden="true"
                                  data-toggle="tooltip"
                                  title="{{
                                    'This Purchase GST' | translate
                                  }} ({{ data.purchase_gst_rate }}) {{
                                    'Rate Is not Valid Please Select other one'
                                      | translate
                                  }}"
                                  style="color: #c30707; font-weight: bold"
                                ></i>
                              </span>
                              <div
                                class="row"
                                style="padding: 0px 0px 0px 16px"
                              >
                                <select
                                  style="width: 77px"
                                  [disabled]="totalyclosethejobcard"
                                  class="form-control cir"
                                  (change)="
                                    checksparegst(
                                      $event.target.value,
                                      data,
                                      i,
                                      'gstNull'
                                    )
                                  "
                                  [(ngModel)]="data.purchase_gst_rate"
                                >
                                  <option
                                    *ngFor="let dataarr of gstNumberArr"
                                    value="{{ dataarr }}"
                                  >
                                    {{ dataarr }}
                                  </option>
                                </select>
                              </div>
                              <div class="row" style="margin-left: 19px">
                                <select
                                  style="width: 77px; margin-right: 10px"
                                  [disabled]="totalyclosethejobcard"
                                  class="form-control cir"
                                  (change)="
                                    checksparegsttype(
                                      $event.target.value,
                                      data,
                                      i,
                                      'gstNull'
                                    )
                                  "
                                  [(ngModel)]="data.purchase_tax_type"
                                >
                                  <option value="Exclusive">
                                    {{ "Excl" | translate }}.
                                  </option>
                                  <option value="Inclusive">
                                    {{ "Incl" | translate }}.
                                  </option>
                                </select>
                              </div>
                            </div>

                            <!-- <input type="text" [value]="data.purchase_gst_rate" placeholder="Please enter GST Rate" style="background-color: #f0f0f1; width: 40px;"> -->
                            <!-- {{data.purchase_gst_rate}}  {{data.purchase_tax_type | slice:0:4 }} -->
                          </span>
                        </td>
                        <td style="width: 5%; padding: 18px 5px 0px 5px">
                          {{ data.totalitemamount }}
                        </td>
                        <td
                          *ngIf="createdJobcardSetting.item_wise_discount != 0"
                          style="width: 12%; padding: 10px 5px 10px 5px"
                        >
                          <div style="display: flex">
                            <i
                              *ngIf="data.showdiscountspare == true"
                              class="fa fa-exclamation-triangle"
                              aria-hidden="true"
                              data-toggle="tooltip"
                              title="{{
                                'Please enter only Numeric value' | translate
                              }}"
                              style="
                                color: #c30707;
                                font-weight: bold;
                                padding: 3px 8px;
                              "
                            ></i>
                            <input
                              style="margin-right: 5px; width: 77px"
                              (input)="
                                sparediscountvalue(
                                  $event.target.value,
                                  data,
                                  i,
                                  'false'
                                )
                              "
                              [disabled]="
                                totalyclosethejobcard || showsparedisitem
                              "
                              type="text"
                              class="form-control cir sml_in"
                              [value]="data.discountvalue"
                            />
                            <select
                              (change)="
                                checksparediscountData(
                                  $event.target.value,
                                  data,
                                  i,
                                  'false'
                                )
                              "
                              [(ngModel)]="data.discounttype"
                              [disabled]="
                                totalyclosethejobcard || showsparedisitem
                              "
                              class="form-control form-control-sm"
                              style="border-radius: 5px; width: 77px"
                            >
                              <option value="%">%</option>
                              <option value="₹">{{ currency_symbol }}</option>
                            </select>
                          </div>
                        </td>
                        <td style="width: 5%; padding: 18px 5px 0px 5px">
                          {{ data.amount }}
                        </td>
                        <td
                          style="padding: 10px 5px 0px 5px"
                          *ngIf="createdJobcardSetting.jobwise_mechanic != 0"
                        >
                          <div style="width: 104%; margin-right: -58px">
                            <mat-form-field style="width: 81%">
                              <mat-select
                                [ngModelOptions]="{ standalone: true }"
                                [(ngModel)]="data.spareassignedmechanic"
                                multiple
                              >
                                <mat-option
                                  *ngFor="let mech of allStaffList"
                                  [value]="mech.id"
                                >
                                  {{ mech.name }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                            <span
                              *ngIf="totalyclosethejobcard == false"
                              (click)="createStaff('spare', data, i)"
                              data-toggle="modal"
                              data-target="#add_satff"
                              style="cursor: pointer"
                            >
                              <i
                                class="fa fa-plus-circle"
                                aria-hidden="true"
                                style="color: #c30707; font-weight: bold"
                                data-toggle="tooltip"
                                title="Add new Staff"
                              ></i>
                            </span>
                          </div>
                        </td>
                        <td>
                          <i
                            *ngIf="totalyclosethejobcard == false"
                            (click)="removeSpareItem(data, i)"
                            class="fa fa-times"
                            aria-hidden="true"
                            style="cursor: pointer"
                          ></i>
                          <i
                            *ngIf="totalyclosethejobcard == true"
                            class="fa fa-times"
                            aria-hidden="true"
                            style="cursor: pointer"
                          ></i>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <div
                            class="btn-toolbar ml-93 d-flex flex-row"
                            role="toolbar"
                            aria-label="Toolbar with button groups"
                          >
                            <div
                              class="btn-group searchic table-div-sear"
                              role="group"
                              aria-label="First group"
                            >
                              <span class="table-span-sear">
                                <i
                                  class="fa fa-search fa-1x"
                                  aria-hidden="true"
                                ></i>
                              </span>
                            </div>
                            <div
                              class="btn-group searchbar"
                              role="group"
                              aria-label="Second group"
                            >
                              <span class="jobcard-dashhf">
                                <ng-autocomplete
                                  [disabled]="totalyclosethejobcard"
                                  [(ngModel)]="sparemodel"
                                  (scrolledToEnd)="loadMoreDataspare()"
                                  placeHolder="{{
                                    'To Select Spare Search By Part Number Or Part Name'
                                      | translate
                                  }}"
                                  [data]="searchSpareData"
                                  (selected)="selectedSpareResult($event)"
                                  (input)="
                                    searchSpareInput($event.target.value)
                                  "
                                  (inputFocused)="getallData('spare')"
                                  [itemTemplate]="itemTemplate"
                                  [notFoundTemplate]="notFoundTemplate"
                                >
                                </ng-autocomplete>

                                <ng-template #itemTemplate let-item>
                                  <a [innerHTML]="item"></a>
                                </ng-template>

                                <ng-template #notFoundTemplate let-notFound>
                                  <div [innerHTML]="notFound"></div>
                                </ng-template>
                              </span>
                            </div>
                            <div
                              class="btn-group addbut"
                              role="group"
                              aria-label="Third group"
                            >
                              <span
                                *ngIf="
                                  totalyclosethejobcard == false &&
                                  allow_create_new
                                "
                                (click)="openSparepopup()"
                                class="input-group-addon cir totale-close-jobcrd"
                                data-toggle="modal"
                                data-target="#add_spares"
                              >
                                <i
                                  class="fa fa-plus"
                                  aria-hidden="true"
                                  style="font-size: 14px; font-weight: 600"
                                ></i>
                              </span>
                            </div>
                          </div>
                        </td>
                        <td></td>
                        <td style="width: 8%"></td>
                        <td
                          style="width: 10%"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                        ></td>
                        <td
                          style="width: 19%"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                        ></td>
                        <td style="width: 5%"></td>
                        <td
                          style="width: 12%"
                          *ngIf="createdJobcardSetting.item_wise_discount != 0"
                        ></td>
                        <td style="width: 5%"></td>
                        <td
                          style="width: 19%"
                          *ngIf="createdJobcardSetting.jobwise_mechanic != 0"
                        >
                          <div style="width: 104%; margin-right: -58px"></div>
                        </td>
                        <td style="width: 1%"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="row">
                  <div
                    class="col-lg-6 col-sm-6 col-md-6"
                    *ngIf="sparegsterror == true"
                    style="
                      color: #c30707;
                      font-weight: bold;
                      padding: 8px 33px;
                      font-size: 15px;
                    "
                  >
                    <span>
                      {{ "There are total" | translate }}
                      {{ sparelenghtoferror }}
                      {{
                        "Spares with invalid GST Rate or Type please corrcet them"
                          | translate
                      }}
                      .
                    </span>
                  </div>
                  <div
                    class="col-lg-6 col-sm-6 col-md-6"
                    *ngIf="showduplicateSpare == true"
                    style="
                      color: #c30707;
                      font-weight: bold;
                      padding: 8px 33px;
                      font-size: 15px;
                    "
                  >
                    <span>
                      {{ "You have already added" | translate }}
                      {{ duplicateSparename }}
                    </span>
                  </div>
                  <div
                    class="col-lg-6 col-sm-6 col-md-6"
                    *ngIf="shownegativeinventory == true"
                    style="
                      color: #c30707;
                      font-weight: bold;
                      padding: 8px 0px;
                      font-size: 15px;
                      display: flex;
                    "
                  >
                    <div style="padding: 5px 13px">
                      <i
                        class="fa fa-exclamation-triangle"
                        aria-hidden="true"
                        data-toggle="tooltip"
                        title="{{
                          'Current Quantity for this item is' | translate
                        }} ({{ negativevalue }})"
                        style="
                          color: #c30707;
                          font-weight: bold;
                          padding: 3px 8px;
                        "
                      ></i>
                    </div>
                    <div>
                      <span
                        class="input-group-addon cir"
                        style="width: 0%; border-radius: 16px"
                        data-toggle="modal"
                        data-target="#add_spares"
                        style="cursor: pointer"
                      >
                        <h6
                          style="
                            font-size: 14px;
                            font-weight: 600;
                            cursor: pointer;
                            padding: 9px;
                          "
                          (click)="updateNegativeInventory()"
                        >
                          {{ "Add Qty" | translate }}
                        </h6>
                      </span>
                    </div>
                    <div style="padding: 4px 24px">
                      <input
                        type="checkbox"
                        [(ngModel)]="checkforquantity"
                        (ngModelChange)="addnegative($event)"
                      /><label>{{ "Continue with -ve Qty" | translate }}</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div id="tab-5" class="tab-pane">
              <div
                class="panel-body"
                style="padding: 0px 0 15px 0; background: #f1f1f1"
              >
                <div class="table-responsive-custom">
                  <table
                    class="table table_left table-bordered"
                    style="background-color: #fff"
                  >
                    <thead>
                      <tr>
                        <!-- <th style="width: 5%;">Sr No.</th> -->
                        <th style="background-color: #c87239; color: #fff">
                          {{ "Particulars" | translate }}
                          <div class="form-group form-check">
                            <input
                              type="checkbox"
                              class="form-check-input"
                              id="exampleCheck1"
                              [(ngModel)]="isShowPartNumber"
                              [value]="isShowPartNumber"
                              (click)="isShowPartName()"
                            />
                            <label class="form-check-label" for="exampleCheck1">
                              Show Part Number</label
                            >
                          </div>
                        </th>
                        <!-- <th style="width: 91px;">Available Quantity</th> -->
                        <th style="background-color: #c87239; color: #fff">
                          {{ "Quantity" | translate }}
                        </th>
                        <th style="background-color: #c87239; color: #fff">
                          {{ "Unit Price" | translate }} ({{ currency_symbol }})
                        </th>
                        <th
                          style="background-color: #c87239; color: #fff"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                        >
                          {{ "HSN" | translate }}
                        </th>
                        <th
                          style="background-color: #c87239; color: #fff"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                        >
                          {{ "GST" | translate }}(%)
                        </th>
                        <th style="background-color: #c87239; color: #fff">
                          {{ "Total Amount" | translate }}
                        </th>
                        <th
                          style="background-color: #c87239; color: #fff"
                          *ngIf="createdJobcardSetting.item_wise_discount != 0"
                        >
                          {{ "Discount" | translate }}
                        </th>
                        <th style="background-color: #c87239; color: #fff">
                          {{ "Final Amount" | translate }}
                        </th>
                        <th
                          style="background-color: #c87239; color: #fff"
                          *ngIf="createdJobcardSetting.jobwise_mechanic != 0"
                        >
                          {{ "Assigned Mechanic" | translate }}
                        </th>
                        <th style="background-color: #c87239; color: #fff">
                          {{ "Action" | translate }}
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let data of lubedatatabel; let i = index">
                        <td style="padding: 18px 5px 0px 5px">
                          {{ data.part_name }}
                          <br />
                          <span *ngIf="isShowPartNumber"
                            >({{ data.part_number }})</span
                          >
                        </td>
                        <!-- <td >{{data.current_quantity| number:'1.0-0'}}</td> -->
                        <td style="padding: 10px 5px 0px 5px">
                          <span style="display: flex">
                            <i
                              *ngIf="data.showqunatityerrorlube == true"
                              class="fa fa-exclamation-triangle"
                              aria-hidden="true"
                              data-toggle="tooltip"
                              title="{{
                                'Please enter only Numeric value' | translate
                              }}"
                              style="
                                color: #c30707;
                                font-weight: bold;
                                padding: 3px 8px;
                              "
                            ></i>
                            <input
                              class="form-control cir sml_in"
                              [disabled]="totalyclosethejobcard"
                              (input)="
                                checkvalueenteredforlube(
                                  $event.target.value,
                                  i,
                                  data
                                )
                              "
                              type="text"
                              [value]="data.quantity"
                              placeholder="{{
                                'Please enter Quantity' | translate
                              }}"
                              style="width: 70px"
                            />
                          </span>
                        </td>
                        <td style="width: 8%; padding: 10px 5px 0px 5px">
                          <span style="display: flex">
                            <i
                              *ngIf="data.showpriceerrorlube == true"
                              class="fa fa-exclamation-triangle"
                              aria-hidden="true"
                              data-toggle="tooltip"
                              title="{{
                                'Please enter only Numeric value' | translate
                              }}"
                              style="
                                color: #c30707;
                                font-weight: bold;
                                padding: 3px 8px;
                              "
                            ></i>
                            <input
                              class="form-control cir sml_in"
                              [disabled]="totalyclosethejobcard"
                              (input)="
                                checkvalueenteredPriceforlube(
                                  $event.target.value,
                                  i,
                                  data
                                )
                              "
                              type="text"
                              [value]="data.unit_sale_price"
                              placeholder="Please enter Price"
                              style="width: 84px"
                            />
                          </span>
                        </td>
                        <td
                          style="width: 10%; padding: 10px 5px 0px 5px"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                          style="width: 17%"
                        >
                          <input
                            class="form-control cir sml_in"
                            [disabled]="totalyclosethejobcard"
                            type="text"
                            (input)="hsnforlube($event.target.value, i, data)"
                            [value]="data.hsn_no"
                            style="width: 100px; text-align: center"
                            placeholder="{{
                              'Please enter HSN no' | translate
                            }}."
                          />
                        </td>
                        <td
                          style="width: 19%; padding: 10px 5px 10px 5px"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                          style="width: 17%"
                        >
                          <span *ngIf="data.sale_gst_rate != ''">
                            <div style="display: flex">
                              <span
                                *ngIf="data.showcalcluationinfo == true"
                                style="
                                  padding: 10px 0px 0px 0px;
                                  margin-right: 2px;
                                "
                              >
                                <i
                                  class="fa fa-check-circle"
                                  aria-hidden="true"
                                  data-toggle="tooltip"
                                  title="{{ 'GST Amount' | translate }} ({{
                                    data.gstcalculateoflube
                                  }})  {{ 'CGST Amount' | translate }} ({{
                                    data.cgstcalculateoflube
                                  }})  {{ 'SGST Amount' | translate }} ({{
                                    data.sgstcalculateoflube
                                  }})"
                                  style="color: #c30707; font-weight: bold"
                                ></i>
                              </span>
                              <span
                                *ngIf="
                                  !gstNumberArr.includes(data.sale_gst_rate) ||
                                  !gsttype.includes(data.sale_tax_type)
                                "
                                style="padding: 12px 5px 0px 0px"
                              >
                                <i
                                  class="fa fa-exclamation-triangle"
                                  aria-hidden="true"
                                  data-toggle="tooltip"
                                  title="{{ 'This Sale GST' | translate }} ({{
                                    data.sale_gst_rate
                                  }}) {{
                                    'Rate Is not Valid Please Select other one'
                                      | translate
                                  }}"
                                  style="color: #c30707; font-weight: bold"
                                ></i>
                              </span>
                              <div
                                class="row"
                                style="padding: 0px 0px 0px 16px"
                              >
                                <select
                                  style="width: 77px"
                                  [disabled]="totalyclosethejobcard"
                                  class="form-control cir"
                                  (change)="
                                    checklubegst(
                                      $event.target.value,
                                      data,
                                      i,
                                      'gstNotNull'
                                    )
                                  "
                                  [(ngModel)]="data.sale_gst_rate"
                                >
                                  <option
                                    *ngFor="let dataarr of gstNumberArr"
                                    value="{{ dataarr }}"
                                  >
                                    {{ dataarr }}
                                  </option>
                                </select>
                              </div>
                              <div class="row" style="margin-left: 19px">
                                <select
                                  style="width: 77px; margin-right: 10px"
                                  [disabled]="totalyclosethejobcard"
                                  class="form-control cir"
                                  (change)="
                                    checklubegsttype(
                                      $event.target.value,
                                      data,
                                      i,
                                      'gstNotNull'
                                    )
                                  "
                                  [(ngModel)]="data.sale_tax_type"
                                >
                                  <option value="Exclusive">
                                    {{ "Excl" | translate }}.
                                  </option>
                                  <option value="Inclusive">
                                    {{ "Incl" | translate }}.
                                  </option>
                                </select>
                              </div>
                            </div>
                          </span>
                          <span *ngIf="data.sale_gst_rate == ''">
                            <div style="display: flex">
                              <span
                                *ngIf="data.showcalcluationinfo == true"
                                style="
                                  padding: 10px 0px 0px 0px;
                                  margin-right: 2px;
                                "
                              >
                                <i
                                  class="fa fa-check-circle"
                                  aria-hidden="true"
                                  data-toggle="tooltip"
                                  title="{{ 'GST Amount' | translate }} ({{
                                    data.gstcalculateoflube
                                  }})  {{ 'CGST Amount' | translate }} ({{
                                    data.cgstcalculateoflube
                                  }})  {{ 'SGST Amount' | translate }} ({{
                                    data.sgstcalculateoflube
                                  }})"
                                  style="color: #c30707; font-weight: bold"
                                ></i>
                              </span>
                              <span
                                *ngIf="
                                  !gstNumberArr.includes(
                                    data.purchase_gst_rate
                                  ) || !gsttype.includes(data.purchase_tax_type)
                                "
                                style="padding: 12px 5px 0px 0px"
                              >
                                <i
                                  class="fa fa-exclamation-triangle"
                                  aria-hidden="true"
                                  data-toggle="tooltip"
                                  title="{{
                                    'This Purchase GST' | translate
                                  }} ({{ data.purchase_gst_rate }}) {{
                                    'Rate Is not Valid Please Select other one'
                                      | translate
                                  }}"
                                  style="color: #c30707; font-weight: bold"
                                ></i>
                              </span>
                              <div
                                class="row"
                                style="padding: 0px 0px 0px 16px"
                              >
                                <select
                                  style="width: 77px"
                                  [disabled]="totalyclosethejobcard"
                                  class="form-control cir"
                                  (change)="
                                    checklubegst(
                                      $event.target.value,
                                      data,
                                      i,
                                      'gstNull'
                                    )
                                  "
                                  [(ngModel)]="data.purchase_gst_rate"
                                >
                                  <option
                                    *ngFor="let dataarr of gstNumberArr"
                                    value="{{ dataarr }}"
                                  >
                                    {{ dataarr }}
                                  </option>
                                </select>
                              </div>
                              <div class="row" style="margin-left: 19px">
                                <select
                                  style="width: 77px; margin-right: 10px"
                                  [disabled]="totalyclosethejobcard"
                                  class="form-control cir"
                                  (change)="
                                    checklubegsttype(
                                      $event.target.value,
                                      data,
                                      i,
                                      'gstNull'
                                    )
                                  "
                                  [(ngModel)]="data.purchase_tax_type"
                                >
                                  <option value="Exclusive">
                                    {{ "Excl" | translate }}.
                                  </option>
                                  <option value="Inclusive">
                                    {{ "Incl" | translate }}.
                                  </option>
                                </select>
                              </div>
                            </div>

                            <!-- <input type="text" [value]="data.purchase_gst_rate" placeholder="Please enter GST Rate" style="background-color: #f0f0f1; width: 40px;"> -->
                            <!-- {{data.purchase_gst_rate}}  {{data.purchase_tax_type | slice:0:4 }} -->
                          </span>
                        </td>
                        <td style="width: 5%; padding: 18px 5px 0px 5px">
                          {{ data.totalitemamount }}
                        </td>
                        <td
                          *ngIf="createdJobcardSetting.item_wise_discount != 0"
                          style="width: 12%; padding: 10px 5px 10px 5px"
                        >
                          <div style="display: flex">
                            <i
                              *ngIf="data.showdiscountlube == true"
                              class="fa fa-exclamation-triangle"
                              aria-hidden="true"
                              data-toggle="tooltip"
                              title="{{
                                'Please enter only Numeric value' | translate
                              }}"
                              style="
                                color: #c30707;
                                font-weight: bold;
                                padding: 3px 8px;
                              "
                            ></i>
                            <input
                              style="margin-right: 5px; width: 77px"
                              (input)="
                                lubeiscountvalue(
                                  $event.target.value,
                                  data,
                                  i,
                                  'false'
                                )
                              "
                              [disabled]="
                                totalyclosethejobcard || showlubedisitem
                              "
                              type="text"
                              class="form-control cir sml_in"
                              [value]="data.discountvalue"
                            />
                            <select
                              (change)="
                                checklubediscountData(
                                  $event.target.value,
                                  data,
                                  i,
                                  'false'
                                )
                              "
                              [(ngModel)]="data.discounttype"
                              [disabled]="
                                totalyclosethejobcard || showlubedisitem
                              "
                              class="form-control form-control-sm"
                              style="border-radius: 5px; width: 77px"
                            >
                              <option value="%">%</option>
                              <option value="₹">{{ currency_symbol }}</option>
                            </select>
                          </div>
                        </td>
                        <td style="width: 5%; padding: 18px 5px 0px 5px">
                          {{ data.amount }}
                        </td>
                        <td
                          style="padding: 10px 5px 0px 5px"
                          *ngIf="createdJobcardSetting.jobwise_mechanic != 0"
                        >
                          <div style="width: 104%; margin-right: -58px">
                            <mat-form-field style="width: 81%">
                              <mat-select
                                [ngModelOptions]="{ standalone: true }"
                                [(ngModel)]="data.lubeassignedmechanic"
                                multiple
                              >
                                <mat-option
                                  *ngFor="let mech of allStaffList"
                                  [value]="mech.id"
                                >
                                  {{ mech.name }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                            <span
                              *ngIf="totalyclosethejobcard == false"
                              (click)="createStaff('lube', data, i)"
                              data-toggle="modal"
                              data-target="#add_satff"
                              style="cursor: pointer"
                            >
                              <i
                                class="fa fa-plus-circle"
                                aria-hidden="true"
                                style="color: #c30707; font-weight: bold"
                                data-toggle="tooltip"
                                title="Add new Staff"
                              ></i>
                            </span>
                          </div>
                        </td>
                        <td>
                          <i
                            *ngIf="totalyclosethejobcard == false"
                            (click)="removeLubeItem(data, i)"
                            class="fa fa-times"
                            aria-hidden="true"
                            style="cursor: pointer"
                          ></i>
                          <i
                            *ngIf="totalyclosethejobcard == true"
                            class="fa fa-times"
                            aria-hidden="true"
                            style="cursor: pointer"
                          ></i>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <div
                            class="btn-toolbar ml-93 d-flex flex-row"
                            role="toolbar"
                            aria-label="Toolbar with button groups"
                          >
                            <div
                              class="btn-group searchic table-div-sear"
                              role="group"
                              aria-label="First group"
                            >
                              <span class="table-span-sear">
                                <i
                                  class="fa fa-search fa-1x"
                                  aria-hidden="true"
                                ></i>
                              </span>
                            </div>
                            <div
                              class="btn-group searchbar"
                              role="group"
                              aria-label="Second group"
                            >
                              <span class="jobcard-dashhf">
                                <ng-autocomplete
                                  [disabled]="totalyclosethejobcard"
                                  (scrolledToEnd)="loadMoreDatalube()"
                                  [(ngModel)]="lubemodel"
                                  placeHolder="{{
                                    'To Select Lube Search By Part Number Or Part Name'
                                      | translate
                                  }}"
                                  [data]="searchLubeData"
                                  (selected)="selectedLubeResult($event)"
                                  (input)="searchLubeInput($event.target.value)"
                                  (inputFocused)="getallData('lube')"
                                  [itemTemplate]="itemTemplate"
                                  [notFoundTemplate]="notFoundTemplate"
                                >
                                </ng-autocomplete>

                                <ng-template #itemTemplate let-item>
                                  <a [innerHTML]="item"></a>
                                </ng-template>

                                <ng-template #notFoundTemplate let-notFound>
                                  <div [innerHTML]="notFound"></div>
                                </ng-template>
                              </span>
                            </div>
                            <div
                              class="btn-group addbut"
                              role="group"
                              aria-label="Third group"
                            >
                              <span
                                *ngIf="
                                  totalyclosethejobcard == false &&
                                  allow_create_new
                                "
                                (click)="openLubepopup()"
                                class="input-group-addon cir totale-close-jobcrd"
                                data-toggle="modal"
                                data-target="#add_lubes"
                              >
                                <i
                                  class="fa fa-plus"
                                  aria-hidden="true"
                                  style="font-size: 14px; font-weight: 600"
                                ></i>
                              </span>
                            </div>
                          </div>
                        </td>
                        <td></td>
                        <td style="width: 8%"></td>
                        <td
                          style="width: 10%"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                        ></td>
                        <td
                          style="width: 19%"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                        ></td>
                        <td style="width: 5%"></td>
                        <td
                          style="width: 12%"
                          *ngIf="createdJobcardSetting.item_wise_discount != 0"
                        ></td>
                        <td style="width: 5%"></td>
                        <td
                          style="width: 19%"
                          *ngIf="createdJobcardSetting.jobwise_mechanic != 0"
                        >
                          <div style="width: 104%; margin-right: -58px"></div>
                        </td>
                        <td style="width: 1%"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="row">
                  <div
                    class="col-lg-6 col-sm-6 col-md-6"
                    *ngIf="lubegsterror == true"
                    style="
                      color: #c30707;
                      font-weight: bold;
                      padding: 8px 33px;
                      font-size: 15px;
                    "
                  >
                    <span>
                      {{ "There are total" | translate }}
                      {{ lubelenghtoferror }}
                      {{
                        "Lubes with invalid GST Rate or Type please corrcet them"
                          | translate
                      }}.
                    </span>
                  </div>
                  <div
                    class="col-lg-6 col-sm-6 col-md-6"
                    *ngIf="showduplicatelube == true"
                    style="
                      color: #c30707;
                      font-weight: bold;
                      padding: 8px 33px;
                      font-size: 15px;
                    "
                  >
                    <span>
                      {{ "You have already added" | translate }}
                      {{ duplicatelubename }}
                    </span>
                  </div>
                  <div
                    class="col-lg-6 col-sm-6 col-md-6"
                    *ngIf="shownegativeinventoryforlube == true"
                    style="
                      color: #c30707;
                      font-weight: bold;
                      padding: 8px 0px;
                      font-size: 15px;
                      display: flex;
                    "
                  >
                    <div style="padding: 5px 13px">
                      <i
                        class="fa fa-exclamation-triangle"
                        aria-hidden="true"
                        data-toggle="tooltip"
                        title="{{
                          'Current Quantity for this item is' | translate
                        }} ({{ negativevalueforlube }})"
                        style="
                          color: #c30707;
                          font-weight: bold;
                          padding: 3px 8px;
                        "
                      ></i>
                    </div>
                    <div>
                      <span
                        class="input-group-addon cir"
                        style="width: 0%; border-radius: 16px"
                        data-toggle="modal"
                        data-target="#add_lubes"
                      >
                        <h6
                          style="
                            font-size: 14px;
                            font-weight: 600;
                            cursor: pointer;
                            padding: 9px;
                          "
                          (click)="updateNegativeInventoryForLube()"
                        >
                          Add Qty
                        </h6>
                      </span>
                    </div>
                    <div style="padding: 4px 24px">
                      <input
                        type="checkbox"
                        [(ngModel)]="checkforquantityforlube"
                        (ngModelChange)="addnegativetolube($event)"
                      /><label>{{ "Continue with -ve Qty" | translate }}</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div id="tab-7" class="tab-pane">
              <div
                class="panel-body"
                style="padding: 0px 0 15px 0; background: #f1f1f1"
              >
                <div class="table-responsive" style="overflow-x: inherit">
                  <table
                    class="table table_left table-bordered"
                    style="background-color: #fff"
                  >
                    <thead>
                      <tr>
                        <!-- <th style="width: 5%;">Sr No.</th> -->
                        <th style="background-color: #7e827f; color: #fff">
                          {{ "Particulars" | translate }}
                          <div class="form-group form-check">
                            <input
                              type="checkbox"
                              class="form-check-input"
                              id="exampleCheck1"
                              [(ngModel)]="isShowPartNumber"
                              [value]="isShowPartNumber"
                              (click)="isShowPartName()"
                            />
                            <label class="form-check-label" for="exampleCheck1">
                              Show Part Number</label
                            >
                          </div>
                        </th>
                        <!-- <th style="width: 91px;">Available Quantity</th> -->
                        <th style="background-color: #7e827f; color: #fff">
                          {{ "Quantity" | translate }}
                        </th>
                        <th style="background-color: #7e827f; color: #fff">
                          {{ "Unit Price" | translate }} ({{ currency_symbol }})
                        </th>
                        <th
                          style="background-color: #7e827f; color: #fff"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                        >
                          {{ "HSN" | translate }}
                        </th>
                        <th
                          style="background-color: #7e827f; color: #fff"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                        >
                          {{ "GST" | translate }} (%)
                        </th>
                        <th style="background-color: #7e827f; color: #fff">
                          {{ "Total Amount" | translate }}
                        </th>
                        <th
                          style="background-color: #7e827f; color: #fff"
                          *ngIf="createdJobcardSetting.item_wise_discount != 0"
                        >
                          {{ "Discount" | translate }}
                        </th>
                        <th style="background-color: #7e827f; color: #fff">
                          {{ "Final Amount" | translate }}
                        </th>
                        <th
                          style="background-color: #7e827f; color: #fff"
                          *ngIf="createdJobcardSetting.jobwise_mechanic != 0"
                        >
                          {{ "Assigned Mechanic" | translate }}
                        </th>
                        <th style="background-color: #7e827f; color: #fff">
                          {{ "Action" | translate }}
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let data of totaldatatable; let i = index">
                        <td
                          *ngIf="data.category == 'lube'"
                          style="padding: 18px 5px 0px 5px; color: #c87239"
                        >
                          {{ data.part_name }}
                          <br />
                          <span *ngIf="isShowPartNumber"
                            >({{ data.part_number }})</span
                          >
                        </td>
                        <td
                          *ngIf="data.category == 'spare'"
                          style="padding: 18px 5px 0px 5px; color: #588ac4"
                        >
                          {{ data.part_name }}
                        </td>
                        <td
                          *ngIf="data.category == 'job'"
                          style="padding: 18px 5px 0px 5px; color: #1b8a6f"
                        >
                          {{ data.part_name }}
                        </td>
                        <!-- <td >{{data.current_quantity| number:'1.0-0'}}</td> -->
                        <td style="padding: 18px 5px 0px 5px">
                          {{ data.quantity }}
                        </td>
                        <td style="width: 8%; padding: 18px 5px 0px 5px">
                          {{ data.unit_sale_price }}
                        </td>
                        <td
                          style="width: 10%; padding: 18px 5px 0px 5px"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                          style="width: 17%"
                        >
                          {{ data.hsn_no }}
                        </td>
                        <td
                          style="width: 19%; padding: 18px 5px 10px 5px"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                          style="width: 17%"
                        >
                          {{ data.sale_gst_rate }}
                        </td>
                        <td style="width: 5%; padding: 18px 5px 0px 5px">
                          {{ data.totalitemamount }}
                        </td>
                        <td
                          *ngIf="createdJobcardSetting.item_wise_discount != 0"
                          style="width: 12%; padding: 18px 5px 10px 5px"
                        >
                          {{ data.discountvalue }}{{ data.discounttype }}
                        </td>
                        <td style="width: 5%; padding: 18px 5px 0px 5px">
                          {{ data.amount }}
                        </td>
                        <td
                          style="padding: 18px 5px 0px 5px"
                          *ngIf="createdJobcardSetting.jobwise_mechanic != 0"
                        >
                          {{ data.lubeassignedmechanic }}
                        </td>
                        <td>
                          <i
                            *ngIf="totalyclosethejobcard == false"
                            (click)="onRemoveFromTotal(data)"
                            class="fa fa-times"
                            aria-hidden="true"
                            style="cursor: pointer"
                          ></i>
                          <i
                            *ngIf="totalyclosethejobcard == true"
                            class="fa fa-times"
                            aria-hidden="true"
                            style="cursor: pointer"
                          ></i>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <div id="tab-6" class="tab-pane active">
              <div
                class="panel-body"
                style="padding: 15px 0 15px 0; background: #f1f1f1"
              >
                <div class="row">
                  <div class="col-lg-6 col-sm-6 col-md-6">
                    <div
                      *ngIf="!checkarray.includes('Servicing')"
                      class="col-sm-2 jobbutton"
                      data-toggle="tooltip"
                      title="{{ 'Add Servicing in jobs' | translate }}"
                    >
                      <button
                        [disabled]="totalyclosethejobcard"
                        (click)="addOptionToJobs('21092020183302695045')"
                        class="btn btn-primary"
                        style="
                          height: 40px;
                          background-color: #7e827f;
                          border-color: #7e827f;
                          color: #ffff;
                        "
                      >
                        {{ "Servicing" | translate }}
                      </button>
                    </div>
                    <div
                      *ngIf="!checkarray.includes('Wheel Balancing')"
                      class="col-sm-2 jobbutton"
                      data-toggle="tooltip"
                      title="{{ 'Add Wheel Balance in jobs' | translate }}"
                      style="width: 24%"
                    >
                      <button
                        [disabled]="totalyclosethejobcard"
                        (click)="addOptionToJobs('210920201833015242')"
                        class="btn btn-primary"
                        style="
                          height: 40px;
                          background-color: #7e827f;
                          border-color: #7e827f;
                          color: #ffff;
                        "
                      >
                        {{ "Wheel Balancing" | translate }}
                      </button>
                    </div>
                    <div
                      *ngIf="!checkarray.includes('Washing')"
                      class="col-sm-2 jobbutton"
                      data-toggle="tooltip"
                      title="{{ 'Add Washing in jobs' | translate }}"
                    >
                      <button
                        [disabled]="totalyclosethejobcard"
                        (click)="addOptionToJobs('21092020183300272946')"
                        class="btn btn-primary"
                        style="
                          height: 40px;
                          background-color: #7e827f;
                          border-color: #7e827f;
                          color: #ffff;
                        "
                      >
                        Washing
                      </button>
                    </div>
                    <div
                      *ngIf="!checkarray.includes('General Servicing')"
                      class="col-sm-2 jobbutton"
                      data-toggle="tooltip"
                      title="{{ 'Add General Repair in jobs' | translate }}"
                    >
                      <button
                        [disabled]="totalyclosethejobcard"
                        (click)="addOptionToJobs('21092020183302883452')"
                        class="btn btn-primary"
                        style="
                          height: 40px;
                          background-color: #7e827f;
                          border-color: #7e827f;
                          color: #ffff;
                        "
                      >
                        {{ "General Repair" | translate }}
                      </button>
                    </div>
                  </div>
                </div>
                <div class="table-responsive-custom">
                  <table
                    class="table table_left table-bordered"
                    style="background-color: #fff"
                  >
                    <thead>
                      <tr>
                        <!-- <th style="width: 5%;">Sr No.</th> -->
                        <th style="background-color: #1b8a6f; color: #fff">
                          {{ "Particulars" | translate }}
                          <div class="form-group form-check">
                            <input
                              type="checkbox"
                              class="form-check-input"
                              id="exampleCheck1"
                              [(ngModel)]="isShowPartNumber"
                              [value]="isShowPartNumber"
                              (click)="isShowPartName()"
                            />
                            <label class="form-check-label" for="exampleCheck1">
                              Show Part Number</label
                            >
                          </div>
                        </th>
                        <th style="background-color: #1b8a6f; color: #fff">
                          {{ "Qty" | translate }}
                        </th>
                        <th style="background-color: #1b8a6f; color: #fff">
                          {{ "Unit Price" | translate }} ({{ currency_symbol }})
                        </th>
                        <th
                          style="background-color: #1b8a6f; color: #fff"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                        >
                          {{ "HSN" | translate }}
                        </th>
                        <th
                          style="background-color: #1b8a6f; color: #fff"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                        >
                          {{ "GST" | translate }}(%)
                        </th>
                        <th style="background-color: #1b8a6f; color: #fff">
                          {{ "Total Amount" | translate }}
                        </th>
                        <th
                          style="background-color: #1b8a6f; color: #fff"
                          *ngIf="createdJobcardSetting.item_wise_discount != 0"
                        >
                          {{ "Discount" | translate }}
                        </th>
                        <th style="background-color: #1b8a6f; color: #fff">
                          {{ "Final Amount" | translate }}
                        </th>
                        <th
                          style="background-color: #1b8a6f; color: #fff"
                          *ngIf="createdJobcardSetting.jobwise_mechanic != 0"
                        >
                          {{ "Assigned Mechanic" | translate }}
                        </th>
                        <th style="background-color: #1b8a6f; color: #fff">
                          {{ "Action" | translate }}
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let data of jobdatatabel; let i = index">
                        <td style="padding: 18px 5px 0px 5px">
                          {{ data.part_name }}
                          <br />
                          <span *ngIf="isShowPartNumber"
                            >({{ data.part_number }})</span
                          >
                        </td>
                        <td style="padding: 10px 5px 0px 5px">
                          <span style="display: flex">
                            <i
                              *ngIf="data.showqunatityerrorjob == true"
                              class="fa fa-exclamation-triangle"
                              aria-hidden="true"
                              data-toggle="tooltip"
                              title="{{
                                'Please enter only Numeric value' | translate
                              }}"
                              style="
                                color: #c30707;
                                font-weight: bold;
                                padding: 3px 8px;
                              "
                            ></i>
                            <input
                              class="form-control cir sml_in"
                              [disabled]="totalyclosethejobcard"
                              (input)="
                                checkvalueenteredforjob(
                                  $event.target.value,
                                  i,
                                  data
                                )
                              "
                              type="text"
                              [value]="data.quantity"
                              placeholder="Please enter Quantity"
                              style="width: 70px"
                            />
                          </span>
                        </td>
                        <td style="width: 8%; padding: 10px 5px 0px 5px">
                          <span style="display: flex">
                            <i
                              *ngIf="data.showpriceerrorjob == true"
                              class="fa fa-exclamation-triangle"
                              aria-hidden="true"
                              data-toggle="tooltip"
                              title="{{
                                'Please enter only Numeric value' | translate
                              }}"
                              style="
                                color: #c30707;
                                font-weight: bold;
                                padding: 3px 8px;
                              "
                            ></i>
                            <input
                              class="form-control cir"
                              [disabled]="totalyclosethejobcard"
                              type="text"
                              (input)="
                                checkvalueenteredPriceforjob(
                                  $event.target.value,
                                  i,
                                  data
                                )
                              "
                              [value]="data.unit_sale_price"
                              placeholder="{{
                                'Please enter Unit price' | translate
                              }}"
                              style="width: 84px"
                            />
                          </span>
                        </td>
                        <td
                          style="width: 10%; padding: 10px 5px 0px 5px"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                        >
                          <input
                            class="form-control cir sml_in"
                            type="text"
                            (input)="hsnforjob($event.target.value, i, data)"
                            [value]="data.hsn_no"
                            style="width: 100px; text-align: center"
                            placeholder="{{
                              'Please enter SAC Code' | translate
                            }}."
                          />
                        </td>
                        <td
                          style="width: 19%; padding: 10px 5px 10px 5px"
                          *ngIf="
                            createdJobcardSetting.gst_number != '' &&
                            allBillingData != undefined &&
                            allBillingData.gst_number != ''
                          "
                        >
                          <span *ngIf="data.sale_gst_rate != ''">
                            <div style="display: flex">
                              <span
                                *ngIf="data.showcalcluationinfo == true"
                                style="
                                  padding: 10px 0px 0px 0px;
                                  margin-right: 2px;
                                "
                              >
                                <i
                                  class="fa fa-check-circle"
                                  aria-hidden="true"
                                  data-toggle="tooltip"
                                  title="{{ 'GST Amount' | translate }} ({{
                                    data.gstcalculateofjob
                                  }})  {{ 'CGST Amount' | translate }} ({{
                                    data.cgstcalculateofjob
                                  }})  {{ 'SGST Amount' | translate }} ({{
                                    data.sgstcalculateofjob
                                  }})"
                                  style="color: #c30707; font-weight: bold"
                                ></i>
                              </span>
                              <span
                                *ngIf="
                                  !gstNumberArr.includes(data.sale_gst_rate) ||
                                  !gsttype.includes(data.sale_tax_type)
                                "
                                style="padding: 12px 5px 0px 0px"
                              >
                                <i
                                  class="fa fa-exclamation-triangle"
                                  aria-hidden="true"
                                  data-toggle="tooltip"
                                  title="{{ 'This Sale GST' | translate }} ({{
                                    data.sale_gst_rate
                                  }}) {{
                                    'Rate Is not Valid Please Select other one'
                                      | translate
                                  }}"
                                  style="color: #c30707; font-weight: bold"
                                ></i>
                              </span>
                              <div
                                class="row"
                                style="padding: 0px 0px 0px 16px"
                              >
                                <select
                                  style="width: 80px; margin-left: 10px"
                                  [disabled]="totalyclosethejobcard"
                                  class="form-control cir"
                                  (change)="
                                    checkjobgst(
                                      $event.target.value,
                                      data,
                                      i,
                                      'gstNotNull'
                                    )
                                  "
                                  [(ngModel)]="data.sale_gst_rate"
                                >
                                  <option
                                    *ngFor="let dataarr of gstNumberArr"
                                    value="{{ dataarr }}"
                                  >
                                    {{ dataarr }}
                                  </option>
                                </select>
                              </div>
                              <div class="row" style="margin-left: 19px">
                                <select
                                  style="width: 72px; margin-right: 10px"
                                  [disabled]="totalyclosethejobcard"
                                  class="form-control cir"
                                  (change)="
                                    checkjobgsttype(
                                      $event.target.value,
                                      data,
                                      i,
                                      'gstNotNull'
                                    )
                                  "
                                  [(ngModel)]="data.sale_tax_type"
                                >
                                  <option value="Exclusive">
                                    {{ "Excl" | translate }}.
                                  </option>
                                  <option value="Inclusive">
                                    {{ "Incl" | translate }}.
                                  </option>
                                </select>
                              </div>
                            </div>
                          </span>
                          <span *ngIf="data.sale_gst_rate == ''">
                            <div style="display: flex">
                              <span
                                *ngIf="data.showcalcluationinfo == true"
                                style="
                                  padding: 10px 0px 0px 0px;
                                  margin-right: 2px;
                                "
                              >
                                <i
                                  class="fa fa-check-circle"
                                  aria-hidden="true"
                                  data-toggle="tooltip"
                                  title="{{ 'GST Amount' | translate }} ({{
                                    data.gstcalculateofjob
                                  }})  {{ 'CGST Amount' | translate }} ({{
                                    data.cgstcalculateofjob
                                  }})  {{ 'SGST Amount' | translate }} ({{
                                    data.sgstcalculateofjob
                                  }})"
                                  style="color: #c30707; font-weight: bold"
                                ></i>
                              </span>
                              <span
                                *ngIf="
                                  !gstNumberArr.includes(
                                    data.purchase_gst_rate
                                  ) || !gsttype.includes(data.purchase_tax_type)
                                "
                                style="padding: 12px 5px 0px 0px"
                              >
                                <i
                                  class="fa fa-exclamation-triangle"
                                  aria-hidden="true"
                                  data-toggle="tooltip"
                                  title="{{
                                    'This Purchase GST' | translate
                                  }} ({{ data.purchase_gst_rate }}) {{
                                    'Rate Is not Valid Please Select other one'
                                      | translate
                                  }}"
                                  style="color: #c30707; font-weight: bold"
                                ></i>
                              </span>
                              <div
                                class="row"
                                style="padding: 0px 0px 0px 16px"
                              >
                                <select
                                  style="width: 80px; margin-left: 10px"
                                  [disabled]="totalyclosethejobcard"
                                  class="form-control"
                                  (change)="
                                    checkjobgst(
                                      $event.target.value,
                                      data,
                                      i,
                                      'gstNull'
                                    )
                                  "
                                  [(ngModel)]="data.purchase_gst_rate"
                                >
                                  <option
                                    *ngFor="let dataarr of gstNumberArr"
                                    value="{{ dataarr }}"
                                  >
                                    {{ dataarr }}
                                  </option>
                                </select>
                              </div>
                              <div class="row" style="margin-left: 19px">
                                <select
                                  style="width: 72px; margin-right: 10px"
                                  [disabled]="totalyclosethejobcard"
                                  class="form-control"
                                  (change)="
                                    checkjobgsttype(
                                      $event.target.value,
                                      data,
                                      i,
                                      'gstNull'
                                    )
                                  "
                                  [(ngModel)]="data.purchase_tax_type"
                                >
                                  <option value="Exclusive">
                                    {{ "Excl" | translate }}.
                                  </option>
                                  <option value="Inclusive">
                                    {{ "Incl" | translate }}.
                                  </option>
                                </select>
                              </div>
                            </div>

                            <!-- <input type="text" [value]="data.purchase_gst_rate" placeholder="Please enter GST Rate" style="background-color: #f0f0f1; width: 40px;"> -->
                            <!-- {{data.purchase_gst_rate}}  {{data.purchase_tax_type | slice:0:4 }} -->
                          </span>
                        </td>
                        <td style="width: 5%; padding: 18px 5px 0px 5px">
                          {{ data.totalitemamount }}
                        </td>
                        <td
                          *ngIf="createdJobcardSetting.item_wise_discount != 0"
                          style="width: 12%; padding: 10px 5px 10px 5px"
                        >
                          <div style="display: flex">
                            <i
                              *ngIf="data.showdiscountjob == true"
                              class="fa fa-exclamation-triangle"
                              aria-hidden="true"
                              data-toggle="tooltip"
                              title="{{
                                'Please enter only Numeric value' | translate
                              }}"
                              style="
                                color: #c30707;
                                font-weight: bold;
                                padding: 3px 8px;
                              "
                            ></i>
                            <input
                              style="margin-right: 5px; width: 60px"
                              (input)="
                                jobdiscountvalue(
                                  $event.target.value,
                                  data,
                                  i,
                                  'false'
                                )
                              "
                              [disabled]="
                                totalyclosethejobcard || showjobdisitem
                              "
                              type="text"
                              class="form-control cir sml_in"
                              [value]="data.discountvalue"
                            />
                            <select
                              (change)="
                                checkjobdiscountData(
                                  $event.target.value,
                                  data,
                                  i,
                                  'false'
                                )
                              "
                              [(ngModel)]="data.discounttype"
                              [disabled]="
                                totalyclosethejobcard || showjobdisitem
                              "
                              class="form-control form-control-sm"
                              style="border-radius: 5px; width: 67px"
                            >
                              <option value="%">%</option>
                              <option value="₹">{{ currency_symbol }}</option>
                            </select>
                          </div>
                        </td>
                        <td style="width: 5%; padding: 18px 5px 0px 5px">
                          {{ data.amount }}
                        </td>
                        <td
                          style="padding: 10px 5px 0px 5px"
                          *ngIf="createdJobcardSetting.jobwise_mechanic != 0"
                        >
                          <div style="width: 104%; margin-right: -58px">
                            <mat-form-field style="width: 81%">
                              <mat-select
                                [ngModelOptions]="{ standalone: true }"
                                [(ngModel)]="data.jobassignedmechanic"
                                multiple
                              >
                                <mat-option
                                  *ngFor="let mech of allStaffList"
                                  [value]="mech.id"
                                >
                                  {{ mech.name }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                            <span
                              *ngIf="totalyclosethejobcard == false"
                              (click)="createStaff('job', data, i)"
                              data-toggle="modal"
                              data-target="#add_satff"
                              style="cursor: pointer"
                            >
                              <i
                                class="fa fa-plus-circle"
                                aria-hidden="true"
                                style="color: #c30707; font-weight: bold"
                                data-toggle="tooltip"
                                title="{{ 'Add new Staff' | translate }}"
                              ></i>
                            </span>
                          </div>
                        </td>
                        <td>
                          <i
                            *ngIf="totalyclosethejobcard == false"
                            (click)="removeJobItem(data, i)"
                            class="fa fa-times"
                            aria-hidden="true"
                            style="cursor: pointer"
                          ></i>
                          <i
                            *ngIf="totalyclosethejobcard == true"
                            class="fa fa-times"
                            aria-hidden="true"
                            style="cursor: pointer"
                          ></i>
                        </td>
                      </tr>
                      <td class="table-td-pw-34">
                        <div
                          style="display: flex"
                          class="btn-toolbar ml-93"
                          role="toolbar"
                          aria-label="Toolbar with button groups"
                        >
                          <div
                            class="btn-group searchic table-div-sear"
                            role="group"
                            aria-label="First group"
                          >
                            <span class="table-span-sear">
                              <i
                                class="fa fa-search fa-1x"
                                aria-hidden="true"
                              ></i>
                            </span>
                          </div>
                          <div
                            class="btn-group searchbar"
                            role="group"
                            aria-label="Second group"
                          >
                            <span class="jobcard-dashhf">
                              <ng-autocomplete
                                [disabled]="totalyclosethejobcard"
                                (scrolledToEnd)="loadMoreDatajobs()"
                                [(ngModel)]="jobmodel"
                                placeHolder="{{
                                  'Job Search By Part Number Or Part Name'
                                    | translate
                                }}"
                                [data]="searchJobData"
                                (selected)="selectedJobResult($event)"
                                (input)="searchJobInput($event.target.value)"
                                (inputFocused)="getallData('job')"
                                [itemTemplate]="itemTemplate"
                                [notFoundTemplate]="notFoundTemplate"
                              >
                              </ng-autocomplete>

                              <ng-template #itemTemplate let-item>
                                <a [innerHTML]="item"></a>
                              </ng-template>

                              <ng-template #notFoundTemplate let-notFound>
                                <div [innerHTML]="notFound"></div>
                              </ng-template>
                            </span>
                          </div>
                          <div
                            class="btn-group addbut"
                            role="group"
                            aria-label="Third group"
                          >
                            <span
                              *ngIf="
                                totalyclosethejobcard == false &&
                                allow_create_new
                              "
                              (click)="openJobpopup()"
                              class="input-group-addon cir totale-close-jobcrd"
                              data-toggle="modal"
                              data-target="#add_jobs"
                            >
                              <i
                                class="fa fa-plus"
                                aria-hidden="true"
                                style="font-size: 14px; font-weight: 600"
                              ></i>
                            </span>
                          </div>
                        </div>
                      </td>
                    </tbody>
                  </table>
                </div>
                <div class="row" style="padding: 0px 0px 13px 0px">
                  <div
                    class="col-lg-6 col-sm-6 col-md-6"
                    *ngIf="jobgsterror == true"
                    style="
                      color: #c30707;
                      font-weight: bold;
                      padding: 8px 33px;
                      font-size: 15px;
                    "
                  >
                    <span>
                      {{ "There are total" | translate }}
                      {{ joblenghtoferror }}
                      {{
                        "Jobs with invalid GST Rate or Type please corrcet them"
                          | translate
                      }}.
                    </span>
                  </div>
                  <div
                    class="col-lg-6 col-sm-6 col-md-6"
                    *ngIf="showduplicatejob == true"
                    style="
                      color: #c30707;
                      font-weight: bold;
                      padding: 8px 33px;
                      font-size: 15px;
                    "
                  >
                    <span>
                      {{ "You have already added" | translate }}
                      {{ duplicatejobname }}
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row" *ngIf="showInvoiceForm == true">
          <div class="col-lg-5">
            <form method="get" class="form-horizontal">
              <label
                class="control-label"
                style="
                  font-size: 16px;
                  border-bottom: 1px solid #ce0e17;
                  margin-bottom: 4%;
                "
                ><b>{{ "Jobcard Details" | translate }}</b></label
              >
              <div class="form-group">
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl" style="display: contents"
                    >{{ "Delivery Date" | translate
                    }}<span style="color: #c30707; font-weight: bold"
                      >*</span
                    ></label
                  >
                  <!-- <i *ngIf="ddateenable==true" class="fa fa-times-circle" aria-hidden="true" (click)="cancleDate()"></i> -->
                  <!-- <input [disabled]="jobacrdStatus=='1'||jobacrdStatus=='2'" class="form-control cir" (click)="d.toggle()" [minDate]="minDate" [maxDate]="maxDate" [startDate]="startDate" ngbDatepicker #d="ngbDatepicker" [ngModelOptions]="{standalone: true}" (ngModelChange)="deliveryDate($event)"  [ngModel]="deliveryDateField" style="background-color: #fff;" readonly> -->
                  <div style="display: flex">
                    <input
                      style="width: 114px"
                      [disabled]="jobacrdStatus == '1' || jobacrdStatus == '2'"
                      class="form-control cir"
                      matInput
                      placeholder="{{ 'Choose a date' | translate }}"
                      [satDatepicker]="picker9"
                      [min]="minDate"
                      [max]="maxDate"
                      [ngModelOptions]="{ standalone: true }"
                      (ngModelChange)="deliveryDate($event)"
                      [ngModel]="deliveryDateField"
                      readonly
                    />
                    <sat-datepicker #picker9> </sat-datepicker>
                    <sat-datepicker-toggle
                      matSuffix
                      [for]="picker9"
                    ></sat-datepicker-toggle>
                  </div>
                  <!-- <input type="text" class="form-control cir"> -->
                  <div
                    *ngIf="ddate == true"
                    style="color: #c30707; font-weight: bold"
                  >
                    {{ "Please Select Delivery Date" | translate }}.
                  </div>
                </div>
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl" style="display: contents"
                    >{{ "Delivery Time" | translate
                    }}<span style="color: #c30707; font-weight: bold"
                      >*</span
                    ></label
                  >
                  <!-- <i *ngIf="dtimeenable==true" class="fa fa-times-circle" aria-hidden="true" (click)="cancleTime()"></i> -->
                  <input
                    [disabled]="jobacrdStatus == '1' || jobacrdStatus == '2'"
                    class="form-control cir"
                    aria-label="24hr format"
                    [ngxTimepicker]="defaultTime"
                    [value]="deliveryTimeField"
                    readonly
                    [ngModelOptions]="{ standalone: true }"
                    (ngModelChange)="deliveryTime($event)"
                    [ngModel]="deliveryTimeField"
                    style="background-color: #fff"
                  />
                  <ngx-material-timepicker
                    #defaultTime
                  ></ngx-material-timepicker>

                  <div
                    *ngIf="dtime == true"
                    style="color: #c30707; font-weight: bold"
                  >
                    {{ "Please Select Delivery Time" | translate }} .
                  </div>
                  <div
                    *ngIf="validtime == true"
                    style="color: #c30707; font-weight: bold"
                  >
                    {{ "Please Select Valid Time For Today" | translate }}.
                  </div>
                </div>
                <div
                  class="col-lg-4 col-sm-4 col-md-4"
                  *ngIf="createdJobcardSetting.jobwise_mechanic == 0"
                >
                  <label class="control-label txt_lbl"
                    >{{ "Assign Mechanic" | translate }}
                    <span
                      *ngIf="totalyclosethejobcard == false"
                      (click)="createStaff('none', 'none', 'none')"
                      data-toggle="modal"
                      data-target="#add_satff"
                      style="cursor: pointer"
                    >
                      <i
                        class="fa fa-plus-circle"
                        aria-hidden="true"
                        style="color: #c30707; font-weight: bold"
                        data-toggle="tooltip"
                        title="{{ 'Add new Staff' | translate }}"
                      ></i>
                    </span>
                  </label>
                  <mat-form-field>
                    <mat-select
                      [ngModelOptions]="{ standalone: true }"
                      [(ngModel)]="jobcardStaff"
                      multiple
                    >
                      <mat-option
                        *ngFor="let mech of allStaffList"
                        [value]="mech.id"
                      >
                        {{ mech.name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div
                  *ngIf="mechanicerror == true"
                  style="color: #c30707; font-weight: bold"
                >
                  {{ "Please aleast one Lube Or Job Or Spare" | translate }}
                </div>
              </div>
              <div class="form-group">
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "Reminder KM" | translate
                  }}</label>
                  <select
                    [disabled]="totalyclosethejobcard"
                    class="form-control cir"
                    (change)="reminderOption($event.target.value)"
                    [ngModelOptions]="{ standalone: true }"
                    [(ngModel)]="reminderKM"
                  >
                    <option value="No KM Reminder">
                      {{ "No KM Reminder" | translate }}
                    </option>
                    <option value="500 KM">500 {{ "KM" | translate }}</option>
                    <option value="750 KM">750 {{ "KM" | translate }}</option>
                    <option value="1000 KM">1000 {{ "KM" | translate }}</option>
                    <option value="2000 KM">2000 {{ "KM" | translate }}</option>
                    <option value="2500 KM">2500 {{ "KM" | translate }}</option>
                    <option value="3000 KM">3000 {{ "KM" | translate }}</option>
                    <option value="4000 KM">4000 {{ "KM" | translate }}</option>
                    <option value="5000 KM">5000 {{ "KM" | translate }}</option>
                    <option value="10000 KM">
                      10000 {{ "KM" | translate }}
                    </option>
                    <option value="20000 KM">
                      20000 {{ "KM" | translate }}
                    </option>
                    <option value="40000 KM">
                      40000 {{ "KM" | translate }}
                    </option>
                    <option value="50000 KM">
                      50000 {{ "KM" | translate }}
                    </option>
                    <option value="60000 KM">
                      60000 {{ "KM" | translate }}
                    </option>
                    <option value="80000 KM">
                      80000 {{ "KM" | translate }}
                    </option>
                    <option value="10000 KM">
                      100000 {{ "KM" | translate }}
                    </option>
                  </select>
                </div>
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "Reminder Period" | translate
                  }}</label>
                  <select
                    [disabled]="totalyclosethejobcard"
                    class="form-control cir"
                    (change)="reminderPriod($event.target.value)"
                    [ngModelOptions]="{ standalone: true }"
                    [(ngModel)]="allBillingData.default_reminder_period"
                  >
                    <option value="1 Months">
                      1 {{ "Month" | translate }}
                    </option>
                    <option value="2 Months">
                      2 {{ "Month" | translate }}
                    </option>
                    <option value="3 Months">
                      3 {{ "Month" | translate }}
                    </option>
                    <option value="4 Months">
                      4 {{ "Month" | translate }}
                    </option>
                    <option value="5 Months">
                      5 {{ "Month" | translate }}
                    </option>
                    <option value="6 Months">
                      6 {{ "Month" | translate }}
                    </option>
                    <option value="7 Months">
                      7 {{ "Month" | translate }}
                    </option>
                    <option value="8 Months">
                      8 {{ "Month" | translate }}
                    </option>
                    <option value="9 Months">
                      9 {{ "Month" | translate }}
                    </option>
                    <option value="10 Months">
                      10 {{ "Month" | translate }}
                    </option>
                    <option value="11 Months">
                      11 {{ "Month" | translate }}
                    </option>
                    <option value="12 Months">
                      12 {{ "Month" | translate }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-12">
                  <label class="control-label txt_lbl">{{
                    "Exit Note" | translate
                  }}</label>
                  <textarea
                    [disabled]="totalyclosethejobcard"
                    rows="4"
                    (input)="onExitNoteChange($event.target.value)"
                    cols="50"
                    class="form-control cir"
                    [value]="exitNote"
                  ></textarea>
                </div>
              </div>
            </form>
          </div>
          <div class="col-lg-offset-1 col-lg-6">
            <form class="form-horizontal">
              <label
                class="control-label"
                style="
                  font-size: 16px;
                  border-bottom: 1px solid #ce0e17;
                  margin-bottom: 4%;
                "
                ><b>{{ "Billing Details" | translate }}</b></label
              >
              <div class="form-group">
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl"
                    >{{ "Total" | translate
                    }}<span style="color: #c30707; font-weight: bold"
                      >*</span
                    ></label
                  >
                  <input
                    type="text"
                    disabled
                    (change)="onTotalAmountChnage($event.target.value)"
                    [value]="totalAmount"
                    class="form-control cir sml_in"
                  />
                  <div
                    *ngIf="totalamounterror == true"
                    style="color: #c30707; font-weight: bold"
                  >
                    {{ "Total Amount is required" | translate }}.
                  </div>
                </div>
                <div
                  *ngIf="
                    createdJobcardSetting.item_wise_discount == 0 &&
                    createdJobcardSetting.gst_number == '' &&
                    allBillingData != undefined &&
                    allBillingData.gst_number == ''
                  "
                >
                  <div
                    *ngIf="jobacrdStatus == '1' || jobacrdStatus == '2'"
                    class="col-lg-4 col-sm-4 col-md-4"
                    style="z-index: 0"
                  >
                    <label class="control-label txt_lbl">{{
                      "Discount" | translate
                    }}</label>
                    <div class="input-group m-b">
                      <input
                        [disabled]="totalyclosethejobcard"
                        type="text"
                        class="form-control cir sml_in"
                        (input)="onDiscountChange($event.target.value)"
                        [value]="discount"
                      />
                      <span
                        class="input-group-addon"
                        style="
                          width: 60px;
                          background-color: none;
                          border: none;
                          border-radius: 0px;
                          color: none;
                          font-size: 0;
                          font-weight: 100;
                          line-height: 0;
                          padding: 0;
                          text-align: none;
                        "
                      >
                        <select
                          [disabled]="totalyclosethejobcard"
                          (change)="selectDiscountOption($event.target.value)"
                          class="form-control cir"
                          [value]="eventForDiscount"
                        >
                          <option value="%">%</option>
                          <option value="₹">{{ currency_symbol }}</option>
                        </select>
                      </span>
                      <div
                        *ngIf="Discounterrors == true"
                        style="color: #c30707; font-weight: bold"
                      >
                        {{ "Enter a valid Discount" | translate }}.
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  *ngIf="
                    createdJobcardSetting.item_wise_discount != 0 &&
                    createdJobcardSetting.gst_number == '' &&
                    allBillingData != undefined &&
                    allBillingData.gst_number == ''
                  "
                  class="col-lg-4 col-sm-4 col-md-4"
                  style="z-index: 0"
                >
                  <label class="control-label txt_lbl">{{
                    "Discount" | translate
                  }}</label>
                  <div class="input-group m-b">
                    <input
                      [disabled]="totalyclosethejobcard"
                      type="text"
                      class="form-control cir sml_in"
                      (input)="onDiscountChange($event.target.value)"
                      [value]="discount"
                    />
                    <span
                      class="input-group-addon"
                      style="
                        width: 60px;
                        background-color: none;
                        border: none;
                        border-radius: 0px;
                        color: none;
                        font-size: 0;
                        font-weight: 100;
                        line-height: 0;
                        padding: 0;
                        text-align: none;
                      "
                    >
                      <select disabled class="form-control cir">
                        <option value="₹">{{ currency_symbol }}</option>
                      </select>
                    </span>
                    <div
                      *ngIf="Discounterrors == true"
                      style="color: #c30707; font-weight: bold"
                    >
                      {{ "Enter a valid Discount" | translate }}.
                    </div>
                  </div>
                </div>
                <div
                  *ngIf="
                    createdJobcardSetting.item_wise_discount != 0 &&
                    createdJobcardSetting.gst_number != '' &&
                    allBillingData != undefined &&
                    allBillingData.gst_number != ''
                  "
                  class="col-lg-4 col-sm-4 col-md-4"
                  style="z-index: 0"
                >
                  <label class="control-label txt_lbl">{{
                    "Discount" | translate
                  }}</label>
                  <div class="input-group m-b">
                    <input
                      disabled
                      type="text"
                      class="form-control cir sml_in"
                      (input)="onDiscountChange($event.target.value)"
                      [value]="discount"
                    />
                    <span
                      class="input-group-addon"
                      style="
                        width: 60px;
                        background-color: none;
                        border: none;
                        border-radius: 0px;
                        color: none;
                        font-size: 0;
                        font-weight: 100;
                        line-height: 0;
                        padding: 0;
                        text-align: none;
                      "
                    >
                      <select disabled class="form-control cir">
                        <option value="₹">{{ currency_symbol }}</option>
                      </select>
                    </span>
                    <div
                      *ngIf="Discounterrors == true"
                      style="color: #c30707; font-weight: bold"
                    >
                      {{ "Enter a valid Discount" | translate }}.
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "Billed Amount" | translate
                  }}</label>
                  <input
                    type="text"
                    disabled
                    class="form-control cir sml_in"
                    [value]="totalPayable"
                  />
                </div>
              </div>

              <div class="form-group">
                <!-- <div class="col-lg-4 col-sm-4 col-md-4">
                                    <label class="control-label txt_lbl">Advance</label>
                                    <input [disabled]="totalyclosethejobcard" type="text" (input)="onAdvanceChange($event.target.value)" class="form-control cir sml_in" [value]="advanceAmount">
                                    <div *ngIf="Advanceerrors==true" style="color: #c30707; font-weight: bold;">
                                        Enter a valid Advance Amount.
                                    </div>
                                </div> -->
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "Payable" | translate
                  }}</label>
                  <input
                    type="text"
                    disabled
                    class="form-control cir sml_in"
                    [value]="billedAmount"
                  />
                </div>
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "Paid Amount" | translate
                  }}</label>
                  <input
                    [disabled]="
                      jobcardArrayForEdit.balance_amount == '0.0' &&
                      totalyclosethejobcard
                    "
                    type="text"
                    (input)="onPaidChange($event.target.value)"
                    class="form-control cir sml_in"
                    [value]="totalPaid"
                  />
                  <div
                    *ngIf="Paiderrors == true || billedAmount < 0"
                    style="color: #c30707; font-weight: bold"
                  >
                    {{ "Enter a Valid Paid Amount" | translate }}.
                  </div>
                </div>
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "Pending Amount" | translate
                  }}</label>
                  <input
                    disabled
                    type="text"
                    class="form-control cir sml_in"
                    [value]="totalBalance"
                  />
                </div>
              </div>
              <div
                *ngIf="
                  createdJobcardSetting.gst_number != '' &&
                  allBillingData != undefined &&
                  allBillingData.gst_number != ''
                "
                class="form-group"
              >
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "SGST" | translate
                  }}</label>
                  <input
                    disabled
                    type="text"
                    class="form-control cir sml_in"
                    (change)="onSgstChnage($event.target.value)"
                    [value]="
                      (calTotalGstForSpareamount +
                        calTotalGstForLubeamount +
                        calTotalGstForJobamount) /
                      2
                    "
                  />
                  <div
                    *ngIf="SGSTerrors == true"
                    style="color: #c30707; font-weight: bold"
                  >
                    {{ "Enter a Valid SGST" | translate }}.
                  </div>
                </div>
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "CGST" | translate
                  }}</label>
                  <input
                    disabled
                    type="text"
                    class="form-control cir sml_in"
                    (change)="onCgstChnage($event.target.value)"
                    [value]="
                      (calTotalGstForSpareamount +
                        calTotalGstForLubeamount +
                        calTotalGstForJobamount) /
                      2
                    "
                  />
                  <div
                    *ngIf="CGSTerrors == true"
                    style="color: #c30707; font-weight: bold"
                  >
                    {{ "Enter a Valid CGST" | translate }}.
                  </div>
                </div>
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "GST" | translate
                  }}</label>
                  <input
                    disabled
                    type="text"
                    class="form-control cir sml_in"
                    (change)="onGstChnage($event.target.value)"
                    [value]="
                      calTotalGstForSpareamount +
                      calTotalGstForLubeamount +
                      calTotalGstForJobamount
                    "
                  />
                  <div
                    *ngIf="GSTerrors == true"
                    style="color: #c30707; font-weight: bold"
                  >
                    {{ "Enter a Valid GST" | translate }}.
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div class="col-lg-4 col-sm-4 col-md-4">
                  <label class="control-label txt_lbl">{{
                    "Payment Type" | translate
                  }}</label>
                  <select
                    [disabled]="totalyclosethejobcard"
                    class="form-control cir"
                    (change)="onPaymentChnage($event.target.value)"
                    [value]="paymentMethod"
                    style="width: 80%"
                  >
                    <option value="">{{ "Select Payment" | translate }}</option>
                    <option value="cheque">{{ "Cheque" | translate }}</option>
                    <option value="cash">{{ "Cash" | translate }}</option>
                    <option value="upi">{{ "UPI" | translate }}</option>
                    <option value="card">{{ "Card" | translate }}</option>
                    <option value="net">{{ "Net Banking" | translate }}</option>
                  </select>
                </div>
                <div
                  class="col-lg-4 col-sm-4 col-md-4"
                  *ngIf="paymentMethod == 'cheque'"
                >
                  <label class="control-label txt_lbl"
                    >{{ "Cheque Number" | translate
                    }}<span style="color: #c30707; font-weight: bold"
                      >*</span
                    ></label
                  >
                  <input
                    [disabled]="totalyclosethejobcard"
                    type="text"
                    class="form-control cir sml_in"
                    (input)="addtrantion($event.target.value)"
                    [value]="checqueOrTransticon"
                  />
                  <div
                    *ngIf="Chequeerror == true"
                    style="color: #c30707; font-weight: bold"
                  >
                    {{ "Enter a Cheque Number" | translate }}.
                  </div>
                </div>
                <div
                  class="col-lg-4 col-sm-4 col-md-4"
                  *ngIf="
                    paymentMethod != 'cash' &&
                    paymentMethod != 'cheque' &&
                    paymentMethod != ''
                  "
                >
                  <label class="control-label txt_lbl"
                    >{{ "Transaction Number" | translate
                    }}<span style="color: #c30707; font-weight: bold"
                      >*</span
                    ></label
                  >
                  <input
                    [disabled]="totalyclosethejobcard"
                    type="text"
                    class="form-control cir sml_in"
                    (input)="addtrantion($event.target.value)"
                    [value]="checqueOrTransticon"
                  />
                  <div
                    *ngIf="transerror == true"
                    style="color: #c30707; font-weight: bold"
                  >
                    {{ "Enter a Transaction Number" | translate }}.
                  </div>
                </div>
              </div>
              <br /><br />
            </form>
          </div>
        </div>
        <div *ngIf="jobacrdStatus == '2'">
          <div class="row" style="margin: 0 0 15px 2%">
            <div class="col-lg-6 col-sm-6 col-md-6" style="padding: 0 5px">
              <label class="control-label"
                >{{ "Entry date & Time" | translate }} :
              </label>
              <label
                *ngIf="jobcardArrayForEdit.sms_alert == 'true'"
                class="control-label"
                >&nbsp;{{
                  jobcardArrayForEdit.created_at
                    | slice: 0:19
                    | date: "MMM d, y, h:mm a"
                }}&nbsp;({{ "SMS: Delivered" | translate }})</label
              >
              <!-- <label *ngIf="jobcardArrayForEdit.sms_alert=='true'" class="control-label">&nbsp;{{jobcardArrayForEdit.created_at | slice:0:19 | date:'MMM d, y, h:mm a' }}&nbsp;(SMS: Canceled)</label> -->
              <label
                *ngIf="jobcardArrayForEdit.sms_alert == 'false'"
                class="control-label"
                >&nbsp;{{
                  jobcardArrayForEdit.created_at
                    | slice: 0:19
                    | date: "MMM d, y, h:mm a"
                }}&nbsp;({{ "SMS: Owner Cancelled" | translate }})</label
              >
            </div>
            <div
              class="col-lg-6 col-sm-6 col-md-6"
              style="padding: 0 5px"
              *ngIf="reminderOneDate != undefined"
            >
              <label class="control-label"
                >{{ "Reminder" | translate }} :
              </label>
              <span>
                <label
                  *ngIf="jobcardArrayForEdit.sms_alert == 'true'"
                  class="control-label"
                  >&nbsp;{{
                    reminderOneDate | date: "MMM d, y, h:mm a"
                  }}&nbsp;({{ "SMS" | translate }}:
                  {{ reminderOnestatus }})</label
                >
                <label
                  *ngIf="
                    jobcardArrayForEdit.sms_alert == 'true' &&
                    reminderOnestatus != 'Scheduled'
                  "
                  class="control-label"
                  >&nbsp;{{
                    reminderOneDate | date: "MMM d, y, h:mm a"
                  }}&nbsp;({{ "SMS" | translate }}:
                  {{ reminderOnestatus }})</label
                >
                <label
                  *ngIf="jobcardArrayForEdit.sms_alert == 'false'"
                  class="control-label"
                  >&nbsp;{{
                    reminderOneDate | date: "MMM d, y, h:mm a"
                  }}&nbsp;({{ "SMS: Owner Cancelled" | translate }})</label
                >
              </span>
              <label
                *ngIf="jobcardArrayForEdit.sms_alert == 'false'"
                class="control-label"
                >&nbsp;{{ "No Date" | translate }}&nbsp;({{
                  "SMS: Owner Cancelled" | translate
                }})</label
              >
            </div>
          </div>
        </div>
      </div>
      <div class="row bottombutton-custom">
        <div class="col-lg-6 col-sm-12 col-md-6 col-xs-12">
          <div class="row">
            <div
              class="col-lg-8 col-sm-8 col-md-8 col-xs-8 align-items-center d-flex flex-row"
              *ngIf="jobcardEditOrCreate == 'edit'"
            >
              <div class="align-items-center d-flex flex-row">
                <div>
                  <button
                    class="btn btn-white cir"
                    style="padding: 5px 9px"
                    data-toggle="tooltip"
                    title="Print"
                    (click)="print()"
                  >
                    <i class="fa fa-print" aria-hidden="true"></i>
                  </button>
                </div>
                <div
                  data-toggle="tooltip"
                  title="PDF"
                  style="margin-left: 13px; margin-right: 13px"
                >
                  <label
                    (click)="pdf()"
                    class="btn btn-white cir"
                    style="padding: 5px 9px"
                  >
                    <i class="fa fa-file-pdf-o" aria-hidden="true"></i
                  ></label>
                </div>
                <div data-toggle="tooltip" title="Share PDF">
                  <label
                    (click)="share()"
                    class="btn btn-white cir"
                    style="padding: 5px 9px"
                  >
                    <i class="fa fa-envelope" aria-hidden="true"></i
                  ></label>
                </div>
                <div
                  class="closepoup"
                  data-toggle="tooltip"
                  title="Share WhatsApp"
                  style="margin-left: 10px"
                >
                  <a [href]="contactlink" target="_blank">
                    <label
                      (click)="sharewhatsApp()"
                      class="btn btn-white cir"
                      style="padding: 5px 9px"
                      ><i
                        class="fa fa-whatsapp"
                        aria-hidden="true"
                        style="color: green"
                      ></i
                    ></label>
                  </a>
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-sm-3 col-md-3 col-xs-3 send-sms-btn">
              <label style="color: #fff">{{ "SMS Alert" | translate }}</label>
              <label class="switch">
                <input
                  *ngIf="jobcardArrayForEdit.sms_alert == 'true'"
                  checked
                  [disabled]="totalyclosethejobcard"
                  type="checkbox"
                  checked
                  data-toggle="toggle"
                  (change)="smsAlert($event)"
                />
                <input
                  *ngIf="
                    jobcardArrayForEdit.sms_alert == 'false' ||
                    jobcardArrayForEdit.sms_alert == undefined
                  "
                  [disabled]="totalyclosethejobcard"
                  type="checkbox"
                  data-toggle="toggle"
                  (change)="smsAlert($event)"
                  [checked]="smsAlretValue"
                />
                <span class="slider round"></span>
              </label>
            </div>
          </div>
        </div>
        <div class="col-lg-6 col-sm-12 col-md-6 col-xs-12">
          <div class="d-flex flex-row" style="float: right">
            <button
              *ngIf="
                jobcardArrayForEdit.balance_amount != '0.0' &&
                totalyclosethejobcard == true
              "
              type="submit"
              [disabled]="
                !is_set_customer ||
                totalamounterror == true ||
                sparegsterror == true ||
                lubegsterror == true ||
                jobgsterror == true ||
                Advanceerrors == true ||
                Discounterrors == true ||
                SGSTerrors == true ||
                CGSTerrors == true ||
                GSTerrors == true ||
                Paiderrors == true ||
                Chequeerror == true ||
                transerror == true ||
                billedAmount < 0 ||
                kmvehicleerror == true
              "
              (click)="event_handler_update() && createShortInvoice('update')"
              class="btn btn-primary cir cir_btnn create-srt-btn-updte"
            >
              {{ "Update Short Invoice" | translate }}
            </button>

            <button
              *ngIf="
                totalyclosethejobcard == false &&
                showInvoiceForm == true &&
                jobacrdStatus != 'nostaus'
              "
              type="submit"
              [disabled]="
                totalAmount == 0 ||
                totalamounterror == true ||
                sparegsterror == true ||
                lubegsterror == true ||
                jobgsterror == true ||
                Advanceerrors == true ||
                Discounterrors == true ||
                SGSTerrors == true ||
                CGSTerrors == true ||
                GSTerrors == true ||
                Paiderrors == true ||
                Chequeerror == true ||
                transerror == true ||
                billedAmount < 0 ||
                kmvehicleerror == true
              "
              (click)="event_handler_update() && createShortInvoice('update')"
              class="btn btn-primary cir cir_btn create-srt-btn-updte"
            >
              {{ "Update Short Invoice" | translate }}
            </button>

            <button
              *ngIf="
                totalyclosethejobcard == false &&
                showInvoiceForm == true &&
                jobacrdStatus == 'nostaus'
              "
              type="submit"
              [disabled]="
                totalAmount == 0 ||
                totalamounterror == true ||
                sparegsterror == true ||
                lubegsterror == true ||
                jobgsterror == true ||
                Advanceerrors == true ||
                Discounterrors == true ||
                SGSTerrors == true ||
                CGSTerrors == true ||
                GSTerrors == true ||
                Paiderrors == true ||
                Chequeerror == true ||
                transerror == true ||
                billedAmount < 0 ||
                kmvehicleerror == true ||
                createJobcardRequested == true
              "
              (click)="createShortInvoice('create')"
              class="btn btn-primary cir cir_btn create-srt-btn"
              style="margin-right: 2%; margin-top: 6%"
            >
              {{ "Create Short Invoice" | translate }}
            </button>

            <button
              *ngIf="totalyclosethejobcard == false && showInvoiceForm == false"
              type="submit"
              [disabled]="
                SelectedDataarrOfVehicle == undefined ||
                CreateCustomerForm.pristine ||
                CreateCustomerForm.invalid
              "
              (click)="createCustomerByAPI()"
              class="btn btn-primary cir cir_btn create-srt-btn-1"
              style="margin-right: 2%; margin-top: 6%"
            >
              {{ "Create Customer" | translate }}
            </button>
          </div>
        </div>
      </div>

      <!-- *********************** -->

      <div
        class="modal inmodal"
        id="customer_form_model"
        tabindex="-1"
        role="dialog"
        aria-hidden="true"
      >
        <div class="modal-dialog customer-dialog">
          <!-- <div class="modal-content animated"> -->
          <div class="modal-content">
            <!-- <div class="modal-header" style="padding-top: 51px">
    <div class="ibox-title popup-card-title">
      <div class="row">
        <div class="col-lg-6 col-sm-6 col-md-6">
          <h1 style="font-size: 22px; float: left">Customer Voice</h1>
        </div>
        <div
          *ngIf="totalyclosethejobcard == false"
          class="col-lg-4 col-sm-4 col-md-4"
        >
          <label
            id="cus_voice1"
            data-dismiss="modal"
            (click)="SaveCustomerVoice()"
            class="btn btn-primary cir cir_btn customer-invoice"
            >Save</label
          >
        </div>
        <div
          class="col-lg-2 col-sm-2 col-md-2"
          style="margin-top: 1%; float: right"
        >
          <label
            id="cus_voice_close"
            data-dismiss="modal"
            class="btn btn-white cir mdl-close-btn"
          >
            <i class="fa fa-times fa-2x" aria-hidden="true"></i
          ></label>
        </div>
      </div>
    </div>
  </div> -->

            <!-- <div class="modal-header" style="padding-top: 51px"> -->
            <div class="modal-header" style="padding: 30px 0 10px 0">
              <!-- <div class="ibox-title popup-card-title">
      <div class="row"> -->

              <div class="col-lg-12 col-sm-12 col-md-12">
                <div
                  class="col-lg-11 col-sm-11 col-md-11"
                  *ngIf="!is_set_customer"
                >
                  <h1>Create New Customer</h1>
                </div>
                <div
                  class="col-lg-11 col-sm-11 col-md-11"
                  *ngIf="is_set_customer"
                >
                  <h1>Edit Customer</h1>
                </div>

                <div class="col-lg-1 col-sm-1 col-md-1 text-right">
                  <label
                    class="btn btn-white cir hed-btn-close"
                    data-dismiss="modal"
                    #closebutton
                  >
                    <i class="fa fa-times fa-2x" aria-hidden="true"></i
                  ></label>
                </div>
              </div>

              <!-- </div>
  </div> -->
            </div>

            <div class="modal-body">
              <div class="row">
                <div class="">
                  <form [formGroup]="CreateCustomerForm">
                    <div
                      class="col-lg-12 col-sm-12 col-md-12"
                      style="display: inline-block"
                    >
                      <!-- <div class="col-lg-4 col-sm-6 col-md-4 col-xs-6"> -->
                      <label
                        class="control-label txt_lbl"
                        style="margin-left: 1.5rem"
                        >{{ "No Vehicle No" | translate }}.</label
                      >
                      <label
                        class="switch"
                        style="margin-left: 9px; padding: 7px"
                      >
                        <input
                          [disabled]="showdisbale"
                          *ngIf="
                            createdJobcardSetting.showVechileNo == false ||
                            createdJobcardSetting.showVechileNo == undefined
                          "
                          [disabled]="showdisable"
                          (change)="checkNewregister($event)"
                          [value]="newregister"
                          type="checkbox"
                        />
                        <input
                          *ngIf="createdJobcardSetting.showVechileNo == true"
                          checked
                          [disabled]="showdisable"
                          (change)="checkNewregister($event)"
                          [value]="newregister"
                          type="checkbox"
                        />
                        <span class="slider round"></span>
                      </label>
                      <!-- </div> -->
                    </div>

                    <div class="form-group col-lg-12 col-sm-12 col-md-12">
                      <div
                        class="col-lg-12 col-sm-12 col-md-12"
                        *ngIf="showVechileNo == false"
                      >
                        <label class="control-label txt_lbl"
                          >Vehicle Number<span
                            style="color: #c30707; font-weight: bold"
                            ><span style="color: #c30707; font-weight: bold"
                              >*</span
                            ></span
                          ></label
                        >
                        <label
                          *ngIf="!entered_number_valid"
                          style="
                            color: #c30707;
                            font-weight: bold;
                            float: right;
                          "
                        >
                          Vehicle Already Registered, By User:
                          {{ this.existing_customer }}
                          Please Select Customer from Search bar
                        </label>
                        <input
                          type="text"
                          [style.background-color]="inputcolor"
                          class="form-control cir full"
                          formControlName="vechilenumber"
                          (change)="checkVehicleNumber($event.target.value)"
                          maxlength="10"
                          oninput="this.value = this.value.toUpperCase()"
                        />
                        <div
                          *ngIf="
                            CreateCustomerForm.controls['vechilenumber']
                              .invalid &&
                            (CreateCustomerForm.controls['vechilenumber']
                              .dirty ||
                              CreateCustomerForm.controls['vechilenumber']
                                .touched)
                          "
                          class="text-danger"
                        >
                          <div
                            *ngIf="
                              CreateCustomerForm.controls['vechilenumber']
                                .errors.required
                            "
                          >
                            Vehicle Number is required.
                          </div>
                          <div
                            *ngIf="
                              CreateCustomerForm.controls['vechilenumber']
                                .errors.pattern
                            "
                          >
                            {{ "Enter a valid Vehicle Number" | translate }}.
                          </div>
                          <div
                            *ngIf="
                              CreateCustomerForm.controls['vechilenumber']
                                .errors?.numberNotValid
                            "
                          >
                            Vehicle Already Registered, By User:{{
                              existing_customer
                            }}
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="form-group col-lg-12 col-sm-12 col-md-12">
                      <div
                        class="col-lg-1 col-sm-1 col-md-1"
                        style="width: 10%"
                        *ngIf="
                          createdJobcardSetting.vehicle_color != 0 &&
                          jobcardSettingData != undefined &&
                          jobcardSettingData.vehicle_color == '1'
                        "
                      >
                        <label class="control-label txt_lbl">Colour</label>
                        <input
                          type="text"
                          (click)="openColorBox()"
                          [style.background-color]="getColor"
                          style="width: 55px; height: 29px"
                          class="form-controll"
                          formControlName="color"
                          readonly
                        />
                      </div>

                      <div
                        class="col-lg-6 col-sm-6 col-md-6"
                        style="float: right"
                      >
                        <label class="control-label txt_lbl"
                          >Search and Select Vehicle<span
                            style="color: #c30707; font-weight: bold"
                            ><span style="color: #c30707; font-weight: bold"
                              >*</span
                            ></span
                          ></label
                        >
                        <ng-autocomplete
                          formControlName="searchVehicle"
                          [disabled]="totalyclosethejobcard"
                          [ngModel]="vehiclesearchmodel"
                          placeHolder="Search Vehicle by Make, Model, Variant"
                          [data]="searchVehicleData"
                          (selected)="selectedResultForVechile($event)"
                          (input)="searchBarForVechile($event.target.value)"
                          [itemTemplate]="itemTemplate"
                          [notFoundTemplate]="notFoundTemplate"
                        >
                        </ng-autocomplete>

                        <ng-template #itemTemplate let-item>
                          <a [innerHTML]="item"></a>
                        </ng-template>

                        <ng-template #notFoundTemplate let-notFound>
                          <div [innerHTML]="notFound"></div>
                        </ng-template>
                      </div>
                    </div>

                    <div
                      class="form-group col-lg-12 col-sm-12 col-md-12"
                      *ngIf="
                        (createdJobcardSetting.engine_chassis_number != 0 &&
                          jobcardSettingData != undefined &&
                          jobcardSettingData.engine_chassis_number == '1') ||
                        showVechileNo == true
                      "
                    >
                      <div class="col-lg-12 col-sm-12 col-md-12">
                        <label
                          *ngIf="showVechileNo == false"
                          class="control-label txt_lbl"
                          >Chassis Number</label
                        >
                        <label
                          *ngIf="showVechileNo == true"
                          class="control-label txt_lbl"
                          >Chassis Number<span
                            style="color: #c30707; font-weight: bold"
                            ><span style="color: #c30707; font-weight: bold"
                              >*</span
                            ></span
                          ></label
                        >
                        <input
                          [style.background-color]="inputcolor"
                          type="text"
                          class="form-control cir"
                          id="createjobcard1"
                          formControlName="chassisnumber"
                        />
                        <div
                          *ngIf="
                            CreateCustomerForm.controls['chassisnumber']
                              .invalid &&
                            (CreateCustomerForm.controls['chassisnumber']
                              .dirty ||
                              CreateCustomerForm.controls['chassisnumber']
                                .touched)
                          "
                          class="text-danger"
                        >
                          <div
                            *ngIf="
                              CreateCustomerForm.controls['chassisnumber']
                                .errors.required
                            "
                          >
                            Chassis Number is required.
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="form-group col-lg-12 col-sm-12 col-md-12">
                      <!-- <div class="col-lg-5 col-sm-5 col-md-5">

            </div> -->
                      <div
                        class="col-lg-12 col-sm-12 col-md-12"
                        *ngIf="
                          createdJobcardSetting.engine_chassis_number != 0 &&
                          jobcardSettingData != undefined &&
                          jobcardSettingData.engine_chassis_number == '1'
                        "
                      >
                        <label class="control-label txt_lbl"
                          >Engine Number</label
                        >
                        <input
                          [style.background-color]="inputcolor"
                          type="text"
                          class="form-control cir"
                          formControlName="enginenumber"
                        />
                      </div>
                    </div>

                    <div class="form-group col-lg-12 col-sm-12 col-md-12">
                      <div class="col-lg-12 col-sm-12 col-md-12">
                        <label class="control-label txt_lbl"
                          >Customer Name<span
                            style="color: #c30707; font-weight: bold"
                            ><span style="color: #c30707; font-weight: bold"
                              >*</span
                            ></span
                          ></label
                        >
                        <input
                          [style.background-color]="inputcolor"
                          type="text"
                          class="form-control cir"
                          formControlName="customername"
                        />
                        <div
                          *ngIf="
                            CreateCustomerForm.controls['customername']
                              .invalid &&
                            (CreateCustomerForm.controls['customername']
                              .dirty ||
                              CreateCustomerForm.controls['customername']
                                .touched)
                          "
                          class="text-danger"
                        >
                          <div
                            *ngIf="
                              CreateCustomerForm.controls['customername'].errors
                                .required
                            "
                          >
                            Customer Name is required.
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="form-group col-lg-12 col-sm-12 col-md-12">
                      <div class="col-lg-6 col-sm-6 col-md-6">
                        <label class="control-label txt_lbl"
                          >Mobile No. 1<span
                            style="color: #c30707; font-weight: bold"
                            ><span style="color: #c30707; font-weight: bold"
                              >*</span
                            ></span
                          ></label
                        >
                        <input
                          [style.background-color]="inputcolor"
                          type="text"
                          class="form-control cir"
                          formControlName="mobileOneNo"
                          maxlength="10"
                        />
                        <div
                          *ngIf="
                            CreateCustomerForm.controls['mobileOneNo']
                              .invalid &&
                            (CreateCustomerForm.controls['mobileOneNo'].dirty ||
                              CreateCustomerForm.controls['mobileOneNo']
                                .touched)
                          "
                          class="text-danger"
                        >
                          <div
                            *ngIf="
                              CreateCustomerForm.controls['mobileOneNo'].errors
                                .required
                            "
                          >
                            Mobile Number is required.
                          </div>
                          <div
                            *ngIf="
                              CreateCustomerForm.controls['mobileOneNo'].errors
                                .pattern
                            "
                          >
                            Enter a valid Phone Number.
                          </div>
                        </div>
                      </div>
                      <div
                        class="col-lg-6 col-sm-6 col-md-6"
                        *ngIf="
                          createdJobcardSetting.customer_mobile_number != 0 &&
                          jobcardSettingData != undefined &&
                          jobcardSettingData.customer_mobile_number == '1'
                        "
                      >
                        <label class="control-label txt_lbl"
                          >Mobile No. 2</label
                        >
                        <input
                          [style.background-color]="inputcolor"
                          type="text"
                          class="form-control cir"
                          formControlName="mobileTwoNo"
                          maxlength="10"
                        />

                        <div
                          *ngIf="
                            CreateCustomerForm.controls['mobileTwoNo']
                              .invalid &&
                            (CreateCustomerForm.controls['mobileTwoNo'].dirty ||
                              CreateCustomerForm.controls['mobileTwoNo']
                                .touched)
                          "
                          class="text-danger"
                        >
                          <div
                            *ngIf="
                              CreateCustomerForm.controls['mobileTwoNo'].errors
                                .pattern
                            "
                          >
                            Enter a valid Phone Number.
                          </div>
                        </div>
                      </div>
                    </div>

                    <div
                      class="form-group col-lg-12 col-sm-12 col-md-12"
                      *ngIf="
                        createdJobcardSetting.customer_email != 0 &&
                        jobcardSettingData != undefined &&
                        jobcardSettingData.customer_email == '1'
                      "
                    >
                      <div class="col-lg-12 col-sm-12 col-md-12">
                        <label class="control-label txt_lbl"
                          >Email Address</label
                        >
                        <input
                          [style.background-color]="inputcolor"
                          id="createjobcard2"
                          type="text"
                          class="form-control cir"
                          formControlName="email"
                        />
                        <div
                          *ngIf="
                            CreateCustomerForm.controls['email'].invalid &&
                            (CreateCustomerForm.controls['email'].dirty ||
                              CreateCustomerForm.controls['email'].touched)
                          "
                          class="text-danger"
                        >
                          <div
                            *ngIf="
                              CreateCustomerForm.controls['email'].errors.email
                            "
                          >
                            Enter a valid Email.
                          </div>
                        </div>
                      </div>
                    </div>

                    <div
                      class="form-group col-lg-12 col-sm-12 col-md-12"
                      *ngIf="
                        createdJobcardSetting.customer_pickup_address != 0 &&
                        jobcardSettingData != undefined &&
                        jobcardSettingData.customer_pickup_address == '1'
                      "
                    >
                      <div class="col-lg-12 col-sm-12 col-md-12">
                        <label class="control-label txt_lbl"
                          >Pickup Address</label
                        >
                        <input
                          [style.background-color]="inputcolor"
                          type="text"
                          class="form-control cir"
                          formControlName="pickupaddress"
                        />
                      </div>
                    </div>

                    <div
                      class="form-group col-lg-12 col-sm-12 col-md-12"
                      *ngIf="
                        createdJobcardSetting.customer_delivery_address != 0 &&
                        jobcardSettingData != undefined &&
                        jobcardSettingData.customer_delivery_address == '1'
                      "
                    >
                      <div class="col-lg-12 col-sm-12 col-md-12">
                        <label class="control-label txt_lbl"
                          >Drop Address</label
                        >
                        <span
                          style="
                            font-size: 11px;
                            float: right;
                            margin-right: 20px;
                            margin-top: 5px;
                          "
                        >
                          <input
                            [disabled]="showdisbale"
                            *ngIf="
                              createdJobcardSetting.samePickup == false ||
                              createdJobcardSetting.samePickup == undefined
                            "
                            [disabled]="
                              CreateCustomerForm.value.pickupaddress == ''
                            "
                            type="checkbox"
                            (change)="sameAsPickupAddress($event)"
                            value="newregister"
                          />
                          <input
                            *ngIf="createdJobcardSetting.samePickup == true"
                            checked
                            [disabled]="
                              CreateCustomerForm.value.pickupaddress == ''
                            "
                            type="checkbox"
                            (change)="sameAsPickupAddress($event)"
                            value="newregister"
                          />
                          Same as Pickup Address
                        </span>
                        <input
                          [style.background-color]="inputcolor"
                          *ngIf="
                            createdJobcardSetting.samePickup == false ||
                            (createdJobcardSetting.samePickup == undefined &&
                              samePickup == false)
                          "
                          type="text"
                          class="form-control cir"
                          formControlName="dropaddress"
                        />
                        <input
                          [style.background-color]="inputcolor"
                          *ngIf="
                            createdJobcardSetting.samePickup == true ||
                            samePickup == true
                          "
                          type="text"
                          class="form-control cir"
                          formControlName="dropaddress"
                          value="{{ CreateCustomerForm.value.pickupaddress }}"
                          readonly
                        />
                      </div>
                    </div>

                    <div class="form-group col-lg-12 col-sm-12 col-md-12">
                      <div
                        class="col-lg-6 col-sm-6 col-md-6"
                        *ngIf="
                          createdJobcardSetting.customer_birthday != 0 &&
                          jobcardSettingData != undefined &&
                          jobcardSettingData.customer_birthday == '1'
                        "
                      >
                        <label class="control-label txt_lbl"
                          >Date of Birth</label
                        >
                        <div style="display: flex">
                          <input
                            style="width: 97px"
                            class="form-control cir"
                            matInput
                            placeholder=""
                            [satDatepicker]="picker6"
                            [max]="todaydob"
                            formControlName="dob"
                            [value]="dateOfBirth"
                            readonly
                          />
                          <sat-datepicker #picker6> </sat-datepicker>
                          <sat-datepicker-toggle
                            matSuffix
                            [for]="picker6"
                          ></sat-datepicker-toggle>
                        </div>
                      </div>
                      <div
                        class="col-lg-6 col-sm-6 col-md-6"
                        *ngIf="
                          createdJobcardSetting.gst_number != '' &&
                          allBillingData != undefined &&
                          allBillingData.gst_number != ''
                        "
                        style="float: right"
                      >
                        <label class="control-label txt_lbl">GST Number</label>
                        <input
                          [style.background-color]="inputcolor"
                          type="text"
                          class="form-control cir"
                          formControlName="gstno"
                        />
                      </div>
                    </div>
                    <div
                      class="form-group col-lg-12 col-sm-12 col-md-12"
                      *ngIf="
                        createdJobcardSetting.driver_details != 0 &&
                        jobcardSettingData != undefined &&
                        jobcardSettingData.driver_details == '1'
                      "
                    >
                      <div class="col-lg-6 col-sm-6 col-md-6">
                        <label class="control-label txt_lbl"
                          >Driver Name
                        </label>
                        <input
                          [style.background-color]="inputcolor"
                          type="text"
                          class="form-control cir"
                          formControlName="drivername"
                        />
                      </div>
                      <div class="col-lg-6 col-sm-6 col-md-6">
                        <label class="control-label txt_lbl"
                          >Driver Number</label
                        >
                        <input
                          [style.background-color]="inputcolor"
                          type="text"
                          class="form-control cir"
                          formControlName="driverno"
                        />
                        <div
                          *ngIf="
                            CreateCustomerForm.controls['driverno'].invalid &&
                            (CreateCustomerForm.controls['driverno'].dirty ||
                              CreateCustomerForm.controls['driverno'].touched)
                          "
                          class="text-danger"
                        >
                          Enter a valid Phone Number.
                        </div>
                      </div>
                    </div>
                    <!-- <div>
              <button type="submit" class="btn btn-default">Cancel</button>
              <button type="submit" class="btn btn-default">Submit</button>
            </div> -->
                    <!-- </form> -->
                    <!-- </mat-card-content>
      
          <mat-card-footer> -->
                    <!-- *ngIf = "customer_edit_or_create == 'create" -->
                    <div
                      class="col-lg-12 col-sm-12 col-md-12"
                      style="
                        display: flex;
                        flex-direction: row;
                        justify-content: space-evenly;
                        margin-top: 1em;
                        padding-top: 1rem;
                      "
                      *ngIf="!is_set_customer"
                    >
                      <label
                        data-dismiss="modal"
                        class="btn btn-primary createjobcard"
                      >
                        Cancel
                      </label>

                      <button
                        type="button"
                        class="btn btn-primary"
                        [disabled]="
                          !entered_number_valid ||
                          !selectedVehicleCheck ||
                          CreateCustomerForm.pristine ||
                          CreateCustomerForm.invalid
                        "
                        (click)="createCustomerByAPI()"
                        style="
                          font-size: 12px;

                          background: linear-gradient(
                            to bottom,
                            #ff0000 0%,
                            #563b3b 100%
                          );
                          border-color: #c30707;
                          font-weight: bold;
                        "
                      >
                        Create
                      </button>
                      <!-- <div class="col-sm-6">
                    <button type="submit" class="btn btn-default">Cancel</button>
                  </div>
                  <div class="col-sm-6">
                    <button type="submit" class="btn btn-default">Submit</button>
                  </div> -->
                    </div>
                    <div
                      class="col-lg-12 col-sm-12 col-md-12"
                      style="
                        display: flex;
                        flex-direction: row;
                        justify-content: space-evenly;
                        padding-top: 1rem;
                      "
                      *ngIf="is_set_customer"
                    >
                      <label
                        class="btn btn-primary createjobcard"
                        data-dismiss="modal"
                      >
                        Cancel
                      </label>

                      <button
                        type="button"
                        class="btn btn-primary"
                        [disabled]="
                          !selectedVehicleCheck || !entered_number_valid
                        "
                        (click)="updatecustomerdetails()"
                        style="
                          font-size: 12px;

                          background: linear-gradient(
                            to bottom,
                            #ff0000 0%,
                            #563b3b 100%
                          );
                          border-color: #c30707;
                          font-weight: bold;
                        "
                      >
                        Update
                      </button>
                      <!-- <div class="col-sm-6">
                <button type="submit" class="btn btn-default">Cancel</button>
              </div>
              <div class="col-sm-6">
                <button type="submit" class="btn btn-default">Submit</button>
              </div> -->
                    </div>

                    <!-- </mat-card-footer>
        </mat-card> -->
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- ********************* -->

      <div
        class="modal inmodal"
        id="customer_voice_model"
        tabindex="-1"
        role="dialog"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content animated">
            <div
              class="modal-header"
              style="padding: 0px !important ; padding-top: 5px"
            >
              <div class="ibox-title popup-card-title">
                <div class="row">
                  <div class="col-lg-6 col-sm-6 col-md-6">
                    <h1 style="font-size: 22px; float: left">
                      {{ "Customer Voice" | translate }}
                    </h1>
                  </div>
                  <div class="col-lg-4" data-dismiss="modal">
                    <label
                      (click)="SaveCustomerVoice()"
                      class="btn btn-primary cir cir_btn customer-invoice"
                      >{{ "Save" | translate }}</label
                    >
                  </div>
                  <div
                    class="col-lg-2 col-sm-2 col-md-2"
                    style="margin-top: 1%; float: right"
                  >
                    <label
                      data-dismiss="modal"
                      class="btn btn-white cir mdl-close-btn"
                      ><i class="fa fa-times fa-2x" aria-hidden="true"></i
                    ></label>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-body">
              <div class="row">
                <!-- <div class="col-sm-2" style="width: 12%;margin-left: 5%;" *ngIf="showInput==true">
                                </div> -->
                <div class="col-sm-12">
                  <div class="input-group m-b" *ngIf="showInput == false">
                    <span class="input-group-addon cir" style="padding: 0 15px">
                      <i class="fa fa-search fa-1x" aria-hidden="true"></i>
                    </span>
                    <input
                      (ngModelChange)="checkSearch($event)"
                      type="text"
                      class="form-control cir"
                      style="border-left: none"
                      [(ngModel)]="term"
                      placeholder="Search Customer Voice"
                    />
                    <span
                      class="input-group-addon cir"
                      style="padding: 0 15px; cursor: pointer"
                      (click)="showInputField()"
                    >
                      <i class="fa fa-plus fa-2x" aria-hidden="true"></i>
                    </span>
                  </div>
                  <div class="input-group m-b" *ngIf="showInput == true">
                    <span
                      class="input-group-addon cir"
                      style="padding: 0 15px; cursor: pointer"
                      (click)="closeInputField()"
                    >
                      <i class="fa fa-times" aria-hidden="true"></i>
                    </span>

                    <input
                      type="text"
                      class="form-control cir"
                      [placeholder]="placeholder"
                      [style.border-color]="borderColor"
                      [(ngModel)]="value"
                    />
                    <span
                      class="input-group-addon cir"
                      style="padding: 0 15px; cursor: pointer"
                      (click)="addCutsomerVoice(value)"
                    >
                      <h6 style="font-size: 14px; font-weight: 600">
                        {{ "Add New" | translate }}
                      </h6>
                    </span>
                  </div>
                </div>
              </div>

              <div class="table-responsive">
                <table
                  class="table table-bordered"
                  style="background-color: #fff"
                >
                  <thead>
                    <tr>
                      <th style="width: 8%; padding: 0"></th>
                      <th>{{ "Name" | translate }}</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr
                      *ngFor="
                        let data of customervoicedata | filter: term;
                        let i = index
                      "
                    >
                      <td style="padding: 0">
                        <div class="radio">
                          <input
                            [disabled]="totalyclosethejobcard"
                            [(ngModel)]="data.selected"
                            type="checkbox"
                            id="radio1"
                          />
                          <!-- <label for="radio1" > </label> -->
                        </div>
                      </td>
                      <td
                        *ngIf="totalyclosethejobcard == false"
                        style="cursor: pointer"
                        (click)="checkcustomervoice(data, i)"
                      >
                        {{ data.voice }}
                      </td>
                      <td
                        *ngIf="totalyclosethejobcard == true"
                        style="cursor: pointer"
                      >
                        {{ data.voice }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div
        class="modal inmodal"
        id="add_spares"
        tabindex="-1"
        role="dialog"
        aria-hidden="true"
        style="background: rgba(0, 0, 0, 0.5)"
      >
        <div class="modal-dialog">
          <div class="modal-content animated">
            <div class="modal-header" style="padding: 0px">
              <div
                class="ibox-title"
                style="
                  background-color: #f1f1f1;
                  padding: 8px 23px 8px;
                  border: none;
                  border-bottom: 1px solid #4d4f5c;
                "
              >
                <div class="row">
                  <div class="col-lg-6 col-sm-6 col-md-6">
                    <h1 style="font-size: 22px; float: left">
                      {{ "Add Spare" | translate }}
                    </h1>
                  </div>

                  <div
                    class="col-lg-2 col-sm-2 col-md-2"
                    style="margin-top: 1%; float: right"
                  >
                    <label
                      data-dismiss="modal"
                      class="btn btn-white cir"
                      style="padding: 1px 4px; background: none; border: none"
                      ><i class="fa fa-times fa-2x" aria-hidden="true"></i
                    ></label>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-body" style="padding-top: 0">
              <div
                class="ibox-content"
                style="background-color: #f1f1f1; padding: 5px 3%"
              >
                <form
                  [formGroup]="CreateSpareForm"
                  novalidate
                  class="form-horizontal"
                >
                  <input type="hidden" formControlName="workshopiddata" />
                  <div class="row">
                    <div class="col-lg-9 col-sm-9 col-md-9">
                      <label
                        class="control-label"
                        style="
                          font-size: 16px;
                          border-bottom: 1px solid #ce0e17;
                          margin-bottom: 1%;
                        "
                        ><b>{{ "Part Details" | translate }}</b></label
                      >
                      <div class="form-group">
                        <div class="col-lg-5 col-sm-5 col-md-5">
                          <label class="control-label txt_lbl">{{
                            "Part Number" | translate
                          }}</label>
                          <div class="input-group m-b">
                            <!-- <span class="input-group-addon cir" style="padding: 5%;width: 20%;">
                                                            <i class="fa fa-search fa-1x" aria-hidden="true"></i>
                                                        </span>  -->
                            <span class="search_invenall">
                              <ng-autocomplete
                                [disabled]="showSpareUpdate"
                                formControlName="partnumber"
                                [(ngModel)]="sparemodelforcreate"
                                (scrolledToEnd)="loadMoreDatasparenew()"
                                placeHolder=""
                                [data]="searchSpareDatainven"
                                (selected)="
                                  addselectedSpareResultsearch($event)
                                "
                                (input)="
                                  searchSpareInputnew($event.target.value)
                                "
                                [itemTemplate]="itemTemplate"
                                [notFoundTemplate]="notFoundTemplate"
                              >
                              </ng-autocomplete>

                              <ng-template #itemTemplate let-item>
                                <a [innerHTML]="item"></a>
                              </ng-template>

                              <ng-template #notFoundTemplate let-notFound>
                                <div [innerHTML]="notFound"></div>
                              </ng-template>
                            </span>
                            <!-- <div *ngIf="CreateSpareForm.controls['partnumber'].invalid && (CreateSpareForm.controls['partnumber'].dirty || CreateSpareForm.controls['partnumber'].touched)" class="text-danger">
                                                                        <div *ngIf="CreateSpareForm.controls['partnumber'].errors.required">
                                                                        Part Number is required.
                                                                        </div>
                                                                    </div> -->
                          </div>
                        </div>
                        <div class="col-lg-5 col-sm-5 col-md-5">
                          <label class="control-label txt_lbl"
                            >{{ "Part Name" | translate
                            }}<span style="color: #c30707; font-weight: bold"
                              ><span style="color: #c30707; font-weight: bold"
                                >*</span
                              ></span
                            ></label
                          >
                          <input
                            type="text"
                            class="form-control cir"
                            formControlName="partname"
                          />
                          <div
                            *ngIf="CreateSpareForm.controls['partname'].invalid"
                            class="text-danger"
                          >
                            <div
                              *ngIf="
                                CreateSpareForm.controls['partname'].errors
                                  .required
                              "
                            >
                              {{ "Part Name is required" | translate }}.
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="form-group">
                        <div class="col-sm-6 jobcard">
                          <label class="control-label txt_lbl">{{
                            "Spare Company" | translate
                          }}</label>
                          <!-- <input type="text" class="form-control cir" formControlName="companynameSpare"> -->
                          <ng-autocomplete
                            formControlName="companynameSpare"
                            [(ngModel)]="sparecompanyname"
                            placeHolder="{{
                              'Search Spare Company' | translate
                            }}"
                            [data]="searchSpareCompany"
                            (selected)="selectedcomapny($event, 'spare')"
                            (input)="
                              searchBarForCompany($event.target.value, 'spare')
                            "
                            [itemTemplate]="itemTemplate"
                            [notFoundTemplate]="notFoundTemplate"
                          >
                          </ng-autocomplete>

                          <ng-template #itemTemplate let-item>
                            <a [innerHTML]="item"></a>
                          </ng-template>

                          <ng-template #notFoundTemplate let-notFound>
                            <div [innerHTML]="notFound"></div>
                          </ng-template>
                          <div
                            *ngIf="
                              CreateSpareForm.controls['companynameSpare']
                                .invalid
                            "
                            class="text-danger"
                          >
                            <div
                              *ngIf="
                                CreateSpareForm.controls['companynameSpare']
                                  .errors.required
                              "
                            >
                              {{ "Spare Company is required" | translate }}.
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="form-group">
                        <div class="col-lg-4 col-sm-4 col-md-4">
                          <label class="control-label txt_lbl">{{
                            "Unit" | translate
                          }}</label>
                          <select
                            class="form-control cir"
                            formControlName="unit"
                          >
                            <option
                              *ngFor="let data of units"
                              value="{{ data }}"
                            >
                              {{ data }}
                            </option>
                          </select>
                        </div>
                        <div class="col-lg-4 col-sm-4 col-md-4">
                          <label class="control-label txt_lbl">{{
                            "Sub Category" | translate
                          }}</label>
                          <select
                            class="form-control cir"
                            formControlName="subcategory"
                          >
                            <option
                              *ngFor="let data of spareCategory"
                              value="{{ data }}"
                            >
                              {{ data }}
                            </option>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div
                      class="col-lg-3 col-sm-3 col-md-3"
                      style="text-align: right"
                    >
                      <label class="control-label"
                        ><b>{{ "Total Amount" | translate }}</b></label
                      >
                      <br />
                      <label class="control-label"
                        ><h2
                          style="
                            color: #54545e;
                            padding-top: 0;
                            font-size: 20px;
                            margin: 0;
                          "
                        >
                          <b>{{ currency_symbol }} {{ totalamountonform }}</b>
                        </h2></label
                      >
                      <br />
                      <label
                        *ngIf="
                          allBillingData != undefined &&
                          allBillingData.gst_number != ''
                        "
                        class="control-label"
                        style="margin: 0; font-weight: 500; padding-top: 0"
                        >{{ "CGST" | translate }} {{ toShowcgst }}</label
                      >
                      <br />
                      <label
                        *ngIf="
                          allBillingData != undefined &&
                          allBillingData.gst_number != ''
                        "
                        class="control-label"
                        style="margin: 0; font-weight: 500; padding-top: 0"
                        >{{ "SGST" | translate }} {{ toShowsgst }}</label
                      >
                      <br />
                      <label
                        *ngIf="
                          allBillingData != undefined &&
                          allBillingData.gst_number != ''
                        "
                        class="control-label"
                        style="margin: 0; font-weight: 500; padding-top: 0"
                        >{{ "GST" | translate }} {{ toShowtotal_gst }}</label
                      >
                      <br />
                    </div>
                  </div>
                  <div class="col-lg-12 col-sm-12 col-md-12">
                    <label
                      class="control-label"
                      style="
                        font-size: 16px;
                        border-bottom: 1px solid #ce0e17;
                        margin-bottom: 1%;
                      "
                      ><b>{{ "Compatible For" | translate }}</b></label
                    >
                    <span class="for_all" style="margin-left: 43px">
                      <label class="control-label txt_lbl">{{
                        "For All Vehicles" | translate
                      }}</label>
                      <input
                        *ngIf="foralltrue == false"
                        style="margin-left: 6px"
                        type="checkbox"
                        data-toggle="toggle"
                        (change)="forAllVehicles($event)"
                      />
                      <input
                        *ngIf="foralltrue == true"
                        checked
                        style="margin-left: 6px"
                        type="checkbox"
                        data-toggle="toggle"
                        (change)="forAllVehicles($event)"
                      />
                    </span>
                  </div>
                  <div class="form-group">
                    <div class="col-sm-6" *ngIf="foralltrue == true">
                      <label class="control-label txt_lbl">{{
                        "Selected Vehicle" | translate
                      }}</label>
                      <span
                        class="form-control"
                        style="background: none; border: none; display: flex"
                      >
                        <label
                          style="
                            background: linear-gradient(
                              to bottom,
                              #ff0000 0%,
                              #563b3b 100%
                            );
                            width: 100px;
                            height: 26px;
                            text-align: center;
                            padding: 3px;
                            color: white;
                            border-top-left-radius: 5px;
                            border-bottom-left-radius: 5px;
                          "
                          >{{ "All" | translate }}</label
                        >
                        <label
                          style="
                            background-color: #52524f;
                            width: 90px;
                            height: 26px;
                            text-align: center;
                            padding: 3px;
                            color: white;
                          "
                          >{{ "All" | translate }}</label
                        >
                        <label
                          style="
                            background-color: #52524f;
                            width: auto;
                            height: 26px;
                            text-align: center;
                            padding: 3px;
                            color: white;
                            border-top-right-radius: 5px;
                            border-bottom-right-radius: 5px;
                          "
                          >{{ "All" | translate }}</label
                        >
                      </span>
                    </div>
                    <!-- <div class="col-sm-6 jobcard">
                                            <label class="control-label txt_lbl">Search and Select Vehicle<span style="color: #c30707; font-weight: bold;"><span style="color: #c30707; font-weight: bold;">*</span></span></label>
                                            <ng-autocomplete
                                                id="spare_search"
                                                formControlName="searchspareVehicle"
                                                [disabled]="foralltrue"
                                                [(ngModel)]="vehiclesearchmodelspl" 
                                                placeHolder	="Search Vehicle by Make, Model, Varraint"  
                                                [data]="searchVehicleDataSpl"
                                                (selected)='selectedResultForVechilespl($event)'
                                                (input)='searchBarForVechilespl($event.target.value)'
                                                [itemTemplate]="itemTemplate"
                                                [notFoundTemplate]="notFoundTemplate">                                 
                                                </ng-autocomplete>
                                                
                                                <ng-template #itemTemplate let-item>
                                                <a [innerHTML]="item"></a>
                                                </ng-template>
                                                
                                                <ng-template #notFoundTemplate let-notFound>
                                                <div [innerHTML]="notFound"></div>
                                                </ng-template>
                                        </div>
                                        <div class="col-sm-6" *ngIf="SelectedDataarrOfVehiclespl!=undefined">
                                            <label class="control-label txt_lbl">Selected Vehicle</label>
                                            <span class="form-control" style="background: none;border: none;">
                                                <label style="    background: linear-gradient(to bottom, #FF0000 0% , #563b3b 100%);
                                                width: 100px;
                                                height: 26px;
                                                text-align: center;
                                                padding: 3px;
                                                color: white;border-top-left-radius: 5px;border-bottom-left-radius: 5px">{{SelectedDataarrOfVehiclespl.make}}</label>
                                                <label style="background-color: #52524f;
                                                width: 90px;
                                                height: 26px;
                                                text-align: center;
                                                padding: 3px;
                                                color: white;">{{SelectedDataarrOfVehiclespl.model}}</label>
                                                <label *ngIf="SelectedDataarrOfVehiclespl.variant" style="background-color: #52524f;
                                                width: auto;
                                                height: 26px;
                                                text-align: center;
                                                padding: 3px;
                                                color: white;border-top-right-radius: 5px;border-bottom-right-radius: 5px">{{SelectedDataarrOfVehiclespl.variant}}</label>
                                            </span>
                                        </div> -->
                    <div class="col-sm-12" *ngIf="foralltrue == false">
                      <table
                        class="table table_left table-bordered"
                        style="background-color: #fff"
                      >
                        <thead>
                          <tr>
                            <th style="background-color: #61605d; color: #fff">
                              {{ "Make,Model & Variants" | translate }}
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>
                              <div>
                                <div style="display: flex">
                                  <span
                                    class="input-group-addon"
                                    style="
                                      padding: 0 15px 0 5px;
                                      border-top-left-radius: 5px;
                                      border-bottom-left-radius: 5px;
                                    "
                                  >
                                    <i
                                      style="
                                        margin-top: 9px;
                                        margin-right: 1rem;
                                      "
                                      class="fa fa-search fa-1x"
                                      aria-hidden="true"
                                    ></i>
                                  </span>
                                  <span style="width: 100%; text-align: left">
                                    <ng-select
                                      id="spare_search_make"
                                      style="
                                        width: 100%;
                                        text-align: left;
                                        margin-left: 1rem;
                                      "
                                      formControlName="searchspareVehicle"
                                      [closeOnSelect]="false"
                                      [virtualScroll]="true"
                                      [multiple]="true"
                                      placeHolder="Search & Add Model, Variants"
                                      (focus)="searchModelVariforCompfo($event)"
                                      (scrollToEnd)="loadMoreDataveh()"
                                      [items]="searchModelvari"
                                      (search)="searchModelVariforComp($event)"
                                      (add)="onAdd($event)"
                                      (remove)="onRemove($event)"
                                    >
                                      <ng-template
                                        ng-option-tmp
                                        let-item="item"
                                        let-item$="item$"
                                        let-index="index"
                                      >
                                        <input
                                          id="item-{{ index }}"
                                          type="checkbox"
                                          [ngModel]="item$.selected"
                                          [ngModelOptions]="{
                                            standalone: true
                                          }"
                                        />
                                        {{ item }}
                                      </ng-template>
                                    </ng-select>
                                  </span>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                  <label
                    class="control-label"
                    style="
                      font-size: 16px;
                      border-bottom: 1px solid #ce0e17;
                      margin-bottom: 1%;
                    "
                    ><b>{{ "Stock Details" | translate }}</b></label
                  >
                  <div class="form-group">
                    <div class="col-lg-4 col-sm-4 col-md-4">
                      <label class="control-label txt_lbl">{{
                        "Quantity" | translate
                      }}</label>
                      <input
                        type="text"
                        class="form-control cir"
                        formControlName="quantity"
                      />
                      <div
                        *ngIf="
                          CreateSpareForm.controls['quantity'].invalid &&
                          (CreateSpareForm.controls['quantity'].dirty ||
                            CreateSpareForm.controls['quantity'].touched)
                        "
                        class="text-danger"
                      >
                        <div
                          *ngIf="
                            CreateSpareForm.controls['quantity'].errors.pattern
                          "
                        >
                          {{ "Enter a Valid Quantity" | translate }}.
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-4 col-sm-4 col-md-4">
                      <label class="control-label txt_lbl">{{
                        "Lower Limit" | translate
                      }}</label>
                      <input
                        type="text"
                        class="form-control cir"
                        formControlName="lowerlimit"
                      />
                      <div
                        *ngIf="
                          CreateSpareForm.controls['lowerlimit'].invalid &&
                          (CreateSpareForm.controls['lowerlimit'].dirty ||
                            CreateSpareForm.controls['lowerlimit'].touched)
                        "
                        class="text-danger"
                      >
                        <div
                          *ngIf="
                            CreateSpareForm.controls['lowerlimit'].errors
                              .pattern
                          "
                        >
                          {{ "Enter a Valid Lower Limit" | translate }}.
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-4 col-sm-4 col-md-4">
                      <label class="control-label txt_lbl">{{
                        "Rack Number" | translate
                      }}</label>
                      <input
                        type="text"
                        class="form-control cir"
                        formControlName="rackno"
                      />
                    </div>
                  </div>
                  <label
                    class="control-label"
                    style="
                      font-size: 16px;
                      border-bottom: 1px solid #ce0e17;
                      margin-bottom: 1%;
                    "
                    ><b>{{ "Pricing Details" | translate }}</b></label
                  >
                  <div class="form-group">
                    <div class="col-lg-4 col-sm-4 col-md-4">
                      <label class="control-label txt_lbl">{{
                        "Purchase Price" | translate
                      }}</label>
                      <input
                        type="text"
                        class="form-control cir"
                        (input)="
                          checkpricefortotal(
                            CreateSpareForm.value.purchaseprice,
                            CreateSpareForm.value.gstslab,
                            CreateSpareForm.value.gsttype
                          )
                        "
                        formControlName="purchaseprice"
                      />
                      <div
                        *ngIf="
                          CreateSpareForm.controls['purchaseprice'].invalid &&
                          (CreateSpareForm.controls['purchaseprice'].dirty ||
                            CreateSpareForm.controls['purchaseprice'].touched)
                        "
                        class="text-danger"
                      >
                        <div
                          *ngIf="
                            CreateSpareForm.controls['purchaseprice'].errors
                              .pattern
                          "
                        >
                          {{ "Enter a Valid Purchase Price" | translate }}.
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-4 col-sm-4 col-md-4">
                      <label class="control-label txt_lbl"
                        >{{ "Selling Price" | translate
                        }}<span style="color: #c30707; font-weight: bold"
                          ><span style="color: #c30707; font-weight: bold"
                            >*</span
                          ></span
                        ></label
                      >
                      <input
                        type="text"
                        class="form-control cir"
                        formControlName="sellingprice"
                      />
                      <div
                        *ngIf="CreateSpareForm.controls['sellingprice'].invalid"
                        class="text-danger"
                      >
                        <div
                          *ngIf="
                            CreateSpareForm.controls['sellingprice'].errors
                              .required
                          "
                        >
                          {{ "Selling Price is required" | translate }}.
                        </div>
                        <div
                          *ngIf="
                            CreateSpareForm.controls['sellingprice'].errors
                              .pattern
                          "
                        >
                          {{ "Enter a Valid Selling Price" | translate }}.
                        </div>
                      </div>
                    </div>
                  </div>
                  <label
                    *ngIf="
                      allBillingData != undefined &&
                      allBillingData.gst_number != ''
                    "
                    class="control-label"
                    style="
                      font-size: 16px;
                      border-bottom: 1px solid #ce0e17;
                      margin-bottom: 1%;
                    "
                    ><b>{{ "Tax Details" | translate }}</b></label
                  >
                  <div
                    class="form-group"
                    *ngIf="
                      allBillingData != undefined &&
                      allBillingData.gst_number != ''
                    "
                  >
                    <div class="col-lg-4 col-sm-4 col-md-4">
                      <label class="control-label txt_lbl">{{
                        "HSN Number" | translate
                      }}</label>
                      <input
                        type="text"
                        class="form-control cir"
                        formControlName="hsnno"
                      />
                    </div>
                    <div
                      class="col-lg-4 col-sm-4 col-md-4"
                      *ngIf="
                        allBillingData != undefined &&
                        allBillingData.gst_number != ''
                      "
                    >
                      <label class="control-label txt_lbl">{{
                        "GST Slab" | translate
                      }}</label>
                      <select
                        class="form-control cir"
                        formControlName="gstslab"
                        (change)="
                          checkpricefortotal(
                            CreateSpareForm.value.purchaseprice,
                            CreateSpareForm.value.gstslab,
                            CreateSpareForm.value.gsttype
                          )
                        "
                      >
                        <option
                          *ngFor="let data of gstNumberArr"
                          value="{{ data }}"
                        >
                          {{ data }}
                        </option>
                      </select>
                    </div>
                    <div
                      class="col-lg-4 col-sm-4 col-md-4"
                      *ngIf="
                        allBillingData != undefined &&
                        allBillingData.gst_number != ''
                      "
                    >
                      <label class="control-label txt_lbl">{{
                        "GST Type" | translate
                      }}</label>
                      <select
                        class="form-control cir"
                        formControlName="gsttype"
                        (change)="
                          checkpricefortotal(
                            CreateSpareForm.value.purchaseprice,
                            CreateSpareForm.value.gstslab,
                            CreateSpareForm.value.gsttype
                          )
                        "
                      >
                        <option *ngFor="let data of gsttype" value="{{ data }}">
                          {{ data }}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-lg-offset-4 col-lg-4 col-sm-4 col-md-4">
                      <button
                        type="submit"
                        *ngIf="showSpareUpdate == false"
                        data-dismiss="modal"
                        [disabled]="
                          allSelectedMake == undefined ||
                          CreateSpareForm.pristine ||
                          CreateSpareForm.invalid
                        "
                        (click)="createSpareByAPI('create')"
                        class="btn btn-primary cir cir_btn"
                        style="
                          font-size: 12px;
                          margin: 7% 0 0 0;
                          background: linear-gradient(
                            to bottom,
                            #ff0000 0%,
                            #563b3b 100%
                          );
                          border-color: #c30707;
                          font-weight: bold;
                          width: 90%;
                        "
                      >
                        {{ "Create Spare" | translate }}
                      </button>
                      <button
                        type="submit"
                        *ngIf="showSpareUpdate == true"
                        data-dismiss="modal"
                        [disabled]="
                          allSelectedMake == undefined ||
                          CreateSpareForm.pristine ||
                          CreateSpareForm.invalid
                        "
                        (click)="createSpareByAPI('update')"
                        class="btn btn-primary cir cir_btn"
                        style="
                          font-size: 12px;
                          margin: 7% 0 0 0;
                          background: linear-gradient(
                            to bottom,
                            #ff0000 0%,
                            #563b3b 100%
                          );
                          border-color: #c30707;
                          font-weight: bold;
                          width: 90%;
                        "
                      >
                        {{ "Update Spare" | translate }}
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div
        class="modal inmodal"
        id="add_lubes"
        tabindex="-1"
        role="dialog"
        aria-hidden="true"
        style="background: rgba(0, 0, 0, 0.5)"
      >
        <div class="modal-dialog">
          <div class="modal-content animated">
            <div class="modal-header" style="padding: 0px">
              <div
                class="ibox-title"
                style="
                  background-color: #f1f1f1;
                  padding: 8px 23px 8px;
                  border: none;
                  border-bottom: 1px solid #4d4f5c;
                "
              >
                <div class="row">
                  <div class="col-lg-6 col-sm-6 col-md-6">
                    <h1 style="font-size: 22px; float: left; cursor: pointer">
                      {{ "Add Lubes" | translate }}
                    </h1>
                  </div>

                  <div
                    class="col-lg-2 col-sm-2 col-md-2"
                    style="margin-top: 1%; float: right"
                  >
                    <label
                      data-dismiss="modal"
                      class="btn btn-white cir"
                      style="padding: 1px 4px; background: none; border: none"
                      ><i class="fa fa-times fa-2x" aria-hidden="true"></i
                    ></label>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-body" style="padding-top: 0">
              <div
                class="ibox-content"
                style="background-color: #f1f1f1; padding: 5px 3%"
              >
                <form
                  [formGroup]="CreateLubeForm"
                  novalidate
                  class="form-horizontal"
                >
                  <input type="hidden" formControlName="workshopiddatalube" />
                  <div class="row">
                    <div class="col-lg-9 col-sm-9 col-md-9">
                      <label
                        class="control-label"
                        style="
                          font-size: 16px;
                          border-bottom: 1px solid #ce0e17;
                          margin-bottom: 1%;
                        "
                        ><b>{{ "Part Details" | translate }}</b></label
                      >
                      <div class="form-group">
                        <div class="col-lg-5 col-sm-5 col-md-5">
                          <label class="control-label txt_lbl">{{
                            "Lube Number" | translate
                          }}</label>
                          <div class="input-group m-b">
                            <!-- <span class="input-group-addon cir" style="padding: 5%;width: 20%;">
                                                    <i class="fa fa-search fa-1x" aria-hidden="true"></i>
                                                </span> 
                                                <input
                                                            type="text"
                                                            class="form-control cir"
                                                            style="border-left: none;"
                                                            placeholder="To Select Spare Search By Part Number"
                                                            formControlName="partnumber"
                                                            [(ngModel)]="lubemodelforcreate"
                                                            [ngbTypeahead]="searchLubeToCreate"
                                                            (ngModelChange)="addselectedLubeResult($event)"
                                                            #instance="ngbTypeahead"
                                                            disabled
                                                            (input)="searchLubeInputToCreate($event.target.value)"
                                                            /> -->
                            <span class="search_invenall">
                              <ng-autocomplete
                                [disabled]="showLubeUpdate"
                                formControlName="partnumber"
                                (scrolledToEnd)="loadMoreDatalubenew()"
                                [(ngModel)]="lubemodelforcreate"
                                placeHolder=""
                                [data]="searchLubeDatainven"
                                (selected)="addselectedLubeResultlube($event)"
                                (input)="
                                  searchLubeInputnew($event.target.value)
                                "
                                [itemTemplate]="itemTemplate"
                                [notFoundTemplate]="notFoundTemplate"
                              >
                              </ng-autocomplete>

                              <ng-template #itemTemplate let-item>
                                <a [innerHTML]="item"></a>
                              </ng-template>

                              <ng-template #notFoundTemplate let-notFound>
                                <div [innerHTML]="notFound"></div>
                              </ng-template>
                            </span>
                            <!-- <div *ngIf="CreateLubeForm.controls['partnumber'].invalid && (CreateLubeForm.controls['partnumber'].dirty || CreateLubeForm.controls['partnumber'].touched)" class="text-danger">
                                                                <div *ngIf="CreateLubeForm.controls['partnumber'].errors.required">
                                                                Part Number is required.
                                                                </div>
                                                            </div> -->
                          </div>
                        </div>
                        <div class="col-lg-5 col-sm-5 col-md-5">
                          <label class="control-label txt_lbl"
                            >{{ "Lube Name" | translate
                            }}<span style="color: #c30707; font-weight: bold"
                              ><span style="color: #c30707; font-weight: bold"
                                >*</span
                              ></span
                            ></label
                          >
                          <input
                            type="text"
                            class="form-control cir"
                            formControlName="partname"
                          />
                          <div
                            *ngIf="CreateLubeForm.controls['partname'].invalid"
                            class="text-danger"
                          >
                            <div
                              *ngIf="
                                CreateLubeForm.controls['partname'].errors
                                  .required
                              "
                            >
                              {{ "Part Name is required" | translate }}.
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="form-group">
                        <div class="col-sm-6 jobcard">
                          <label class="control-label txt_lbl">{{
                            "Lube Company" | translate
                          }}</label>
                          <!-- <input type="text" class="form-control cir" formControlName="companyname"> -->
                          <ng-autocomplete
                            formControlName="companynameLube"
                            [(ngModel)]="lubecompanyname"
                            placeHolder="{{
                              'Search Lube Company' | translate
                            }}"
                            [data]="searchLubeCompany"
                            (selected)="selectedcomapny($event, 'lube')"
                            (input)="
                              searchBarForCompanyLube(
                                $event.target.value,
                                'lube'
                              )
                            "
                            [itemTemplate]="itemTemplate"
                            [notFoundTemplate]="notFoundTemplate"
                          >
                          </ng-autocomplete>

                          <ng-template #itemTemplate let-item>
                            <a [innerHTML]="item"></a>
                          </ng-template>

                          <ng-template #notFoundTemplate let-notFound>
                            <div [innerHTML]="notFound"></div>
                          </ng-template>
                          <div
                            *ngIf="
                              CreateLubeForm.controls['companynameLube'].invalid
                            "
                            class="text-danger"
                          >
                            <div
                              *ngIf="
                                CreateLubeForm.controls['companynameLube']
                                  .errors.required
                              "
                            >
                              {{ "Lube Company is required" | translate }}.
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="form-group">
                        <div class="col-lg-8 col-sm-8 col-md-8">
                          <label class="control-label txt_lbl">{{
                            "Unit" | translate
                          }}</label>
                          <select
                            class="form-control cir"
                            formControlName="unit"
                          >
                            <option
                              *ngFor="let data of units"
                              value="{{ data }}"
                            >
                              {{ data }}
                            </option>
                          </select>
                        </div>
                        <!-- <div class="col-sm-4">
                                            <label class="control-label txt_lbl">Sub Category</label>
                                            <select class="form-control cir" formControlName="subcategory">
                                                <option *ngFor="let data of spareCategory" value="{{data}}">
                                                    {{data}}
                                                </option>
                                            </select>
                                        </div> -->
                      </div>
                    </div>
                    <div
                      class="col-lg-3 col-sm-3 col-md-3"
                      style="text-align: right"
                    >
                      <label class="control-label"
                        ><b>{{ "Total Amount" | translate }}</b></label
                      >
                      <br />
                      <label class="control-label"
                        ><h2
                          style="
                            color: #54545e;
                            padding-top: 0;
                            font-size: 20px;
                            margin: 0;
                          "
                        >
                          <b>{{ currency_symbol }} {{ totalamountonform }}</b>
                        </h2></label
                      >
                      <br />
                      <label
                        *ngIf="
                          allBillingData != undefined &&
                          allBillingData.gst_number != ''
                        "
                        class="control-label"
                        style="margin: 0; font-weight: 500; padding-top: 0"
                        >{{ "CGST" | translate }} {{ toShowcgst }}</label
                      >
                      <br />
                      <label
                        *ngIf="
                          allBillingData != undefined &&
                          allBillingData.gst_number != ''
                        "
                        class="control-label"
                        style="margin: 0; font-weight: 500; padding-top: 0"
                        >{{ "SGST" | translate }} {{ toShowsgst }}</label
                      >
                      <br />
                      <label
                        *ngIf="
                          allBillingData != undefined &&
                          allBillingData.gst_number != ''
                        "
                        class="control-label"
                        style="margin: 0; font-weight: 500; padding-top: 0"
                        >{{ "GST" | translate }} {{ toShowtotal_gst }}</label
                      >
                      <br />
                    </div>
                  </div>
                  <div class="col-lg-12 col-sm-12 col-md-12">
                    <label
                      class="control-label"
                      style="
                        font-size: 16px;
                        border-bottom: 1px solid #ce0e17;
                        margin-bottom: 1%;
                      "
                      ><b>{{ "Compatible For" | translate }}</b></label
                    >
                    <span class="for_all" style="margin-left: 43px">
                      <label class="control-label txt_lbl">{{
                        "For All Vehicles" | translate
                      }}</label>
                      <input
                        *ngIf="foralltrue == false"
                        style="margin-left: 6px"
                        type="checkbox"
                        data-toggle="toggle"
                        (change)="forAllVehicles($event)"
                      />
                      <input
                        *ngIf="foralltrue == true"
                        checked
                        style="margin-left: 6px"
                        type="checkbox"
                        data-toggle="toggle"
                        (change)="forAllVehicles($event)"
                      />
                    </span>
                  </div>
                  <div class="form-group">
                    <div class="col-sm-6" *ngIf="foralltrue == true">
                      <label class="control-label txt_lbl">{{
                        "Selected Vehicle" | translate
                      }}</label>
                      <span
                        class="form-control"
                        style="background: none; border: none; display: flex"
                      >
                        <label
                          style="
                            background: linear-gradient(
                              to bottom,
                              #ff0000 0%,
                              #563b3b 100%
                            );
                            width: 100px;
                            height: 26px;
                            text-align: center;
                            padding: 3px;
                            color: white;
                            border-top-left-radius: 5px;
                            border-bottom-left-radius: 5px;
                          "
                          >{{ "All" | translate }}</label
                        >
                        <label
                          style="
                            background-color: #52524f;
                            width: 90px;
                            height: 26px;
                            text-align: center;
                            padding: 3px;
                            color: white;
                          "
                          >{{ "All" | translate }}</label
                        >
                        <label
                          style="
                            background-color: #52524f;
                            width: auto;
                            height: 26px;
                            text-align: center;
                            padding: 3px;
                            color: white;
                            border-top-right-radius: 5px;
                            border-bottom-right-radius: 5px;
                          "
                          >{{ "All" | translate }}</label
                        >
                      </span>
                    </div>
                    <!-- <div class="col-sm-6 jobcard">
                                    <label class="control-label txt_lbl">Search and Select Vehicle<span style="color: #c30707; font-weight: bold;"><span style="color: #c30707; font-weight: bold;">*</span></span></label>
                                    <ng-autocomplete
                                        id="spare_search"
                                        formControlName="searchspareVehicle"
                                        [disabled]="foralltrue"
                                        [(ngModel)]="vehiclesearchmodelspl" 
                                        placeHolder	="Search Vehicle by Make, Model, Varraint"  
                                        [data]="searchVehicleDataSpl"
                                        (selected)='selectedResultForVechilespl($event)'
                                        (input)='searchBarForVechilespl($event.target.value)'
                                        [itemTemplate]="itemTemplate"
                                        [notFoundTemplate]="notFoundTemplate">                                 
                                        </ng-autocomplete>
                                        
                                        <ng-template #itemTemplate let-item>
                                        <a [innerHTML]="item"></a>
                                        </ng-template>
                                        
                                        <ng-template #notFoundTemplate let-notFound>
                                        <div [innerHTML]="notFound"></div>
                                        </ng-template>
                                </div>
                                <div class="col-sm-6" *ngIf="SelectedDataarrOfVehiclespl!=undefined">
                                    <label class="control-label txt_lbl">Selected Vehicle</label>
                                    <span class="form-control" style="background: none;border: none;">
                                        <label style="    background: linear-gradient(to bottom, #FF0000 0% , #563b3b 100%);
                                        width: 100px;
                                        height: 26px;
                                        text-align: center;
                                        padding: 3px;
                                        color: white;border-top-left-radius: 5px;border-bottom-left-radius: 5px">{{SelectedDataarrOfVehiclespl.make}}</label>
                                        <label style="background-color: #52524f;
                                        width: 90px;
                                        height: 26px;
                                        text-align: center;
                                        padding: 3px;
                                        color: white;">{{SelectedDataarrOfVehiclespl.model}}</label>
                                        <label *ngIf="SelectedDataarrOfVehiclespl.variant" style="background-color: #52524f;
                                        width: auto;
                                        height: 26px;
                                        text-align: center;
                                        padding: 3px;
                                        color: white;border-top-right-radius: 5px;border-bottom-right-radius: 5px">{{SelectedDataarrOfVehiclespl.variant}}</label>
                                    </span>
                                </div> -->
                    <div class="col-sm-12" *ngIf="foralltrue == false">
                      <table
                        class="table table_left table-bordered"
                        style="background-color: #fff"
                      >
                        <thead>
                          <tr>
                            <th style="background-color: #61605d; color: #fff">
                              {{ "Make,Model & Variants" | translate }}
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>
                              <div>
                                <div style="display: flex">
                                  <span
                                    class="input-group-addon"
                                    style="
                                      padding: 0 15px 0 5px;
                                      border-top-left-radius: 5px;
                                      border-bottom-left-radius: 5px;
                                    "
                                  >
                                    <i
                                      style="
                                        margin-top: 9px;
                                        margin-right: 1rem;
                                      "
                                      class="fa fa-search fa-1x"
                                      aria-hidden="true"
                                    ></i>
                                  </span>
                                  <span style="width: 100%; text-align: left">
                                    <ng-select
                                      id="spare_search_make"
                                      style="
                                        width: 100%;
                                        text-align: left;
                                        margin-left: 1rem;
                                      "
                                      formControlName="searchspareVehicle"
                                      [closeOnSelect]="false"
                                      [virtualScroll]="true"
                                      [multiple]="true"
                                      placeHolder="Search & Add Model, Variants"
                                      (focus)="searchModelVariforCompfo($event)"
                                      (scrollToEnd)="loadMoreDataveh()"
                                      [items]="searchModelvari"
                                      (search)="searchModelVariforComp($event)"
                                      (add)="onAdd($event)"
                                      (remove)="onRemove($event)"
                                    >
                                      <ng-template
                                        ng-option-tmp
                                        let-item="item"
                                        let-item$="item$"
                                        let-index="index"
                                      >
                                        <input
                                          id="item-{{ index }}"
                                          type="checkbox"
                                          [ngModel]="item$.selected"
                                          [ngModelOptions]="{
                                            standalone: true
                                          }"
                                        />
                                        {{ item }}
                                      </ng-template>
                                    </ng-select>
                                  </span>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                  <label
                    class="control-label"
                    style="
                      font-size: 16px;
                      border-bottom: 1px solid #ce0e17;
                      margin-bottom: 1%;
                    "
                    ><b>{{ "Stock Details" | translate }}</b></label
                  >
                  <div class="form-group">
                    <div class="col-lg-4 col-sm-4 col-md-4">
                      <label class="control-label txt_lbl">{{
                        "Quantity" | translate
                      }}</label>
                      <input
                        type="text"
                        class="form-control cir"
                        formControlName="quantity"
                      />
                      <div
                        *ngIf="
                          CreateLubeForm.controls['quantity'].invalid &&
                          (CreateLubeForm.controls['quantity'].dirty ||
                            CreateLubeForm.controls['quantity'].touched)
                        "
                        class="text-danger"
                      >
                        <div
                          *ngIf="
                            CreateLubeForm.controls['quantity'].errors.pattern
                          "
                        >
                          {{ "Enter a Valid Quantity" | translate }}.
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-4 col-sm-4 col-md-4">
                      <label class="control-label txt_lbl">{{
                        "Enter a Valid Quantity" | translate
                      }}</label>
                      <input
                        type="text"
                        class="form-control cir"
                        formControlName="lowerlimit"
                      />
                      <div
                        *ngIf="
                          CreateLubeForm.controls['lowerlimit'].invalid &&
                          (CreateLubeForm.controls['lowerlimit'].dirty ||
                            CreateLubeForm.controls['lowerlimit'].touched)
                        "
                        class="text-danger"
                      >
                        <div
                          *ngIf="
                            CreateLubeForm.controls['lowerlimit'].errors.pattern
                          "
                        >
                          {{ "Enter a Valid Lower Limit" | translate }}.
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-4 col-sm-4 col-md-4">
                      <label class="control-label txt_lbl">{{
                        "Rack Number" | translate
                      }}</label>
                      <input
                        type="text"
                        class="form-control cir"
                        formControlName="rackno"
                      />
                    </div>
                  </div>
                  <label
                    class="control-label"
                    style="
                      font-size: 16px;
                      border-bottom: 1px solid #ce0e17;
                      margin-bottom: 1%;
                    "
                    ><b>{{ "Pricing Details" | translate }}</b></label
                  >
                  <div class="form-group">
                    <div class="col-lg-4 col-sm-4 col-md-4">
                      <label class="control-label txt_lbl">{{
                        "Purchase Price" | translate
                      }}</label>
                      <input
                        type="text"
                        class="form-control cir"
                        (input)="
                          checkpricefortotal(
                            CreateLubeForm.value.purchaseprice,
                            CreateLubeForm.value.gstslab,
                            CreateLubeForm.value.gsttype
                          )
                        "
                        formControlName="purchaseprice"
                      />
                      <div
                        *ngIf="
                          CreateLubeForm.controls['purchaseprice'].invalid &&
                          (CreateLubeForm.controls['purchaseprice'].dirty ||
                            CreateLubeForm.controls['purchaseprice'].touched)
                        "
                        class="text-danger"
                      >
                        <div
                          *ngIf="
                            CreateLubeForm.controls['purchaseprice'].errors
                              .pattern
                          "
                        >
                          {{ "Enter a Valid Purchase Price" | translate }}.
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-4 col-sm-4 col-md-4">
                      <label class="control-label txt_lbl"
                        >Selling Price<span
                          style="color: #c30707; font-weight: bold"
                          ><span style="color: #c30707; font-weight: bold"
                            >*</span
                          ></span
                        ></label
                      >
                      <input
                        type="text"
                        class="form-control cir"
                        formControlName="sellingprice"
                      />
                      <div
                        *ngIf="CreateLubeForm.controls['sellingprice'].invalid"
                        class="text-danger"
                      >
                        <div
                          *ngIf="
                            CreateLubeForm.controls['sellingprice'].errors
                              .required
                          "
                        >
                          {{ "Selling Price is required" | translate }}.
                        </div>
                        <div
                          *ngIf="
                            CreateLubeForm.controls['sellingprice'].errors
                              .pattern
                          "
                        >
                          {{ "Enter a Valid Selling Price" | translate }}.
                        </div>
                      </div>
                    </div>
                  </div>
                  <label
                    *ngIf="
                      allBillingData != undefined &&
                      allBillingData.gst_number != ''
                    "
                    class="control-label"
                    style="
                      font-size: 16px;
                      border-bottom: 1px solid #ce0e17;
                      margin-bottom: 1%;
                    "
                    ><b>{{ "Tax Details" | translate }}</b></label
                  >
                  <div
                    class="form-group"
                    *ngIf="
                      allBillingData != undefined &&
                      allBillingData.gst_number != ''
                    "
                  >
                    <div class="col-lg-4 col-sm-4 col-md-4">
                      <label class="control-label txt_lbl">{{
                        "HSN Number" | translate
                      }}</label>
                      <input
                        type="text"
                        class="form-control cir"
                        formControlName="hsnno"
                      />
                    </div>
                    <div
                      class="col-lg-4 col-sm-4 col-md-4"
                      *ngIf="
                        allBillingData != undefined &&
                        allBillingData.gst_number != ''
                      "
                    >
                      <label class="control-label txt_lbl">{{
                        "GST Slab" | translate
                      }}</label>
                      <select
                        class="form-control cir"
                        formControlName="gstslab"
                        (change)="
                          checkpricefortotal(
                            CreateLubeForm.value.purchaseprice,
                            CreateLubeForm.value.gstslab,
                            CreateLubeForm.value.gsttype
                          )
                        "
                      >
                        <option
                          *ngFor="let data of gstNumberArr"
                          value="{{ data }}"
                        >
                          {{ data }}
                        </option>
                      </select>
                    </div>
                    <div
                      class="col-lg-4 col-sm-4 col-md-4"
                      *ngIf="
                        allBillingData != undefined &&
                        allBillingData.gst_number != ''
                      "
                    >
                      <label class="control-label txt_lbl">{{
                        "GST Type" | translate
                      }}</label>
                      <select
                        class="form-control cir"
                        formControlName="gsttype"
                        (change)="
                          checkpricefortotal(
                            CreateLubeForm.value.purchaseprice,
                            CreateLubeForm.value.gstslab,
                            CreateLubeForm.value.gsttype
                          )
                        "
                      >
                        <option *ngFor="let data of gsttype" value="{{ data }}">
                          {{ data }}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-lg-offset-4 col-lg-4 col-sm-4 col-md-4">
                      <button
                        type="submit"
                        *ngIf="showLubeUpdate == false"
                        data-dismiss="modal"
                        [disabled]="
                          allSelectedMake == undefined ||
                          CreateLubeForm.pristine ||
                          CreateLubeForm.invalid
                        "
                        (click)="createLubeByAPI('create')"
                        class="btn btn-primary cir cir_btn"
                        style="
                          font-size: 12px;
                          margin: 7% 0 0 0;
                          background: linear-gradient(
                            to bottom,
                            #ff0000 0%,
                            #563b3b 100%
                          );
                          border-color: #c30707;
                          font-weight: bold;
                          width: 90%;
                        "
                      >
                        {{ "Create Lube" | translate }}
                      </button>
                      <button
                        type="submit"
                        *ngIf="showLubeUpdate == true"
                        data-dismiss="modal"
                        [disabled]="
                          allSelectedMake == undefined ||
                          CreateLubeForm.pristine ||
                          CreateLubeForm.invalid
                        "
                        (click)="createLubeByAPI('update')"
                        class="btn btn-primary cir cir_btn"
                        style="
                          font-size: 12px;
                          margin: 7% 0 0 0;
                          background: linear-gradient(
                            to bottom,
                            #ff0000 0%,
                            #563b3b 100%
                          );
                          border-color: #c30707;
                          font-weight: bold;
                          width: 90%;
                        "
                      >
                        {{ "Update Lube" | translate }}
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div
        class="modal inmodal"
        id="add_jobs"
        tabindex="-1"
        role="dialog"
        aria-hidden="true"
        style="background: rgba(0, 0, 0, 0.5)"
      >
        <div class="modal-dialog">
          <div class="modal-content animated">
            <div class="modal-header" style="padding: 0px">
              <div
                class="ibox-title"
                style="
                  background-color: #f1f1f1;
                  padding: 8px 23px 8px;
                  border: none;
                  border-bottom: 1px solid #4d4f5c;
                "
              >
                <div class="row">
                  <div class="col-lg-6 col-sm-6 col-md-6">
                    <h1 style="font-size: 22px; float: left; cursor: pointer">
                      {{ "Add Jobs" | translate }}
                    </h1>
                  </div>

                  <div
                    class="col-lg-2 col-sm-2 col-md-2"
                    style="margin-top: 1%; float: right"
                  >
                    <label
                      data-dismiss="modal"
                      class="btn btn-white cir"
                      style="padding: 1px 4px; background: none; border: none"
                      ><i class="fa fa-times fa-2x" aria-hidden="true"></i
                    ></label>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-body" style="padding-top: 0">
              <div
                class="ibox-content"
                style="background-color: #f1f1f1; padding: 5px 3%"
              >
                <form
                  [formGroup]="CreateJobForm"
                  novalidate
                  class="form-horizontal"
                >
                  <div class="row">
                    <div class="col-lg-9 col-sm-9 col-md-9">
                      <label
                        class="control-label"
                        style="
                          font-size: 16px;
                          border-bottom: 1px solid #ce0e17;
                          margin-bottom: 1%;
                        "
                        ><b>{{ "Job Details" | translate }}</b></label
                      >
                      <div class="form-group">
                        <div class="col-lg-5 col-sm-5 col-md-5">
                          <label class="control-label txt_lbl">{{
                            "Job Code" | translate
                          }}</label>
                          <div class="input-group m-b">
                            <!-- <span class="input-group-addon cir" style="padding: 5%;width: 20%;">
                                                    <i class="fa fa-search fa-1x" aria-hidden="true"></i>
                                                </span>  -->
                            <!-- <input
                                                            type="text"
                                                            class="form-control cir"
                                                            style="border-left: none;"
                                                            placeholder="To Select Job Search By Part Number"
                                                            formControlName="partnumber"
                                                            [(ngModel)]="jobmodelforcreate"
                                                            [ngbTypeahead]="searchJobToCreate"
                                                            (ngModelChange)="addselectedJobResult($event)"
                                                            #instance="ngbTypeahead"
                                                            disabled
                                                            (input)="searchJobInputToCreate($event.target.value)"
                                                            /> -->
                            <span class="search_invenall">
                              <ng-autocomplete
                                [disabled]="showJobUpdate"
                                formControlName="partnumber"
                                (scrolledToEnd)="loadMoreDatajobsnew()"
                                [(ngModel)]="jobmodelforcreate"
                                placeHolder=""
                                [data]="searchJobDatainven"
                                (selected)="addselectedJobResultnew($event)"
                                (input)="searchJobInputnew($event.target.value)"
                                [itemTemplate]="itemTemplate"
                                [notFoundTemplate]="notFoundTemplate"
                              >
                              </ng-autocomplete>

                              <ng-template #itemTemplate let-item>
                                <a [innerHTML]="item"></a>
                              </ng-template>

                              <ng-template #notFoundTemplate let-notFound>
                                <div [innerHTML]="notFound"></div>
                              </ng-template>
                            </span>
                            <!-- <div *ngIf="CreateJobForm.controls['partnumber'].invalid && (CreateJobForm.controls['partnumber'].dirty || CreateJobForm.controls['partnumber'].touched)" class="text-danger">
                                                                <div *ngIf="CreateJobForm.controls['partnumber'].errors.required">
                                                                Part Number is required.
                                                                </div>
                                                            </div> -->
                          </div>
                        </div>
                        <div class="col-lg-5 col-sm-5 col-md-5">
                          <label class="control-label txt_lbl"
                            >{{ "Job Name" | translate
                            }}<span style="color: #c30707; font-weight: bold"
                              ><span style="color: #c30707; font-weight: bold"
                                >*</span
                              ></span
                            ></label
                          >
                          <input
                            type="text"
                            class="form-control cir"
                            formControlName="partname"
                          />
                          <div
                            *ngIf="CreateJobForm.controls['partname'].invalid"
                            class="text-danger"
                          >
                            <div
                              *ngIf="
                                CreateJobForm.controls['partname'].errors
                                  .required
                              "
                            >
                              {{ "Part Name is required" | translate }}.
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- <div class="form-group">
                                        <div class="col-sm-5">
                                            <label class="control-label txt_lbl">Company Name</label>
                                            <input type="text" class="form-control cir" formControlName="companynameJob">
                                        </div>
                                    </div> -->
                      <div class="form-group">
                        <div class="col-sm-4">
                          <label class="control-label txt_lbl">{{
                            "Unit" | translate
                          }}</label>
                          <select
                            class="form-control cir"
                            formControlName="unit"
                          >
                            <option
                              *ngFor="let data of unitsjob"
                              value="{{ data }}"
                            >
                              {{ data }}
                            </option>
                          </select>
                        </div>
                        <div class="col-lg-8 col-sm-8 col-md-8">
                          <label class="control-label txt_lbl">{{
                            "Sub Category" | translate
                          }}</label>
                          <select
                            class="form-control cir"
                            formControlName="subcategory"
                          >
                            <option
                              *ngFor="let data of JobCategory"
                              value="{{ data }}"
                            >
                              {{ data }}
                            </option>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div
                      class="col-lg-3 col-sm-3 col-md-3"
                      style="text-align: right"
                    >
                      <label class="control-label"
                        ><b>{{ "Total Amount" | translate }}</b></label
                      >
                      <br />
                      <label class="control-label"
                        ><h2
                          style="
                            color: #54545e;
                            padding-top: 0;
                            font-size: 20px;
                            margin: 0;
                          "
                        >
                          <b>{{ currency_symbol }} {{ totalamountonform }}</b>
                        </h2></label
                      >
                      <br />
                      <label
                        *ngIf="
                          allBillingData != undefined &&
                          allBillingData.gst_number != ''
                        "
                        class="control-label"
                        style="margin: 0; font-weight: 500; padding-top: 0"
                        >{{ "CGST" | translate }} {{ toShowcgst }}</label
                      >
                      <br />
                      <label
                        *ngIf="
                          allBillingData != undefined &&
                          allBillingData.gst_number != ''
                        "
                        class="control-label"
                        style="margin: 0; font-weight: 500; padding-top: 0"
                        >{{ "SGST" | translate }} {{ toShowsgst }}</label
                      >
                      <br />
                      <label
                        *ngIf="
                          allBillingData != undefined &&
                          allBillingData.gst_number != ''
                        "
                        class="control-label"
                        style="margin: 0; font-weight: 500; padding-top: 0"
                        >{{ "GST" | translate }} {{ toShowtotal_gst }}</label
                      >
                      <br />
                    </div>
                  </div>
                  <div class="col-lg-12 col-sm-12 col-md-12">
                    <label
                      class="control-label"
                      style="
                        font-size: 16px;
                        border-bottom: 1px solid #ce0e17;
                        margin-bottom: 1%;
                      "
                      ><b>{{ "Compatible For" | translate }}</b></label
                    >
                    <span class="for_all" style="margin-left: 43px">
                      <label class="control-label txt_lbl">{{
                        "For All Vehicles" | translate
                      }}</label>
                      <input
                        *ngIf="foralltrue == false"
                        style="margin-left: 6px"
                        type="checkbox"
                        data-toggle="toggle"
                        (change)="forAllVehicles($event)"
                      />
                      <input
                        *ngIf="foralltrue == true"
                        checked
                        style="margin-left: 6px"
                        type="checkbox"
                        data-toggle="toggle"
                        (change)="forAllVehicles($event)"
                      />
                    </span>
                  </div>
                  <div class="form-group">
                    <div class="col-sm-6" *ngIf="foralltrue == true">
                      <label class="control-label txt_lbl">{{
                        "Selected Vehicle" | translate
                      }}</label>
                      <span
                        class="form-control"
                        style="background: none; border: none; display: flex"
                      >
                        <label
                          style="
                            background: linear-gradient(
                              to bottom,
                              #ff0000 0%,
                              #563b3b 100%
                            );
                            width: 100px;
                            height: 26px;
                            text-align: center;
                            padding: 3px;
                            color: white;
                            border-top-left-radius: 5px;
                            border-bottom-left-radius: 5px;
                          "
                          >{{ "All" | translate }}</label
                        >
                        <label
                          style="
                            background-color: #52524f;
                            width: 90px;
                            height: 26px;
                            text-align: center;
                            padding: 3px;
                            color: white;
                          "
                          >{{ "All" | translate }}</label
                        >
                        <label
                          style="
                            background-color: #52524f;
                            width: auto;
                            height: 26px;
                            text-align: center;
                            padding: 3px;
                            color: white;
                            border-top-right-radius: 5px;
                            border-bottom-right-radius: 5px;
                          "
                          >{{ "All" | translate }}</label
                        >
                      </span>
                    </div>
                    <!-- <div class="col-sm-6 jobcard">
                                    <label class="control-label txt_lbl">Search and Select Vehicle<span style="color: #c30707; font-weight: bold;"><span style="color: #c30707; font-weight: bold;">*</span></span></label>
                                    <ng-autocomplete
                                        id="spare_search"
                                        formControlName="searchspareVehicle"
                                        [disabled]="foralltrue"
                                        [(ngModel)]="vehiclesearchmodelspl" 
                                        placeHolder	="Search Vehicle by Make, Model, Varraint"  
                                        [data]="searchVehicleDataSpl"
                                        (selected)='selectedResultForVechilespl($event)'
                                        (input)='searchBarForVechilespl($event.target.value)'
                                        [itemTemplate]="itemTemplate"
                                        [notFoundTemplate]="notFoundTemplate">                                 
                                        </ng-autocomplete>
                                        
                                        <ng-template #itemTemplate let-item>
                                        <a [innerHTML]="item"></a>
                                        </ng-template>
                                        
                                        <ng-template #notFoundTemplate let-notFound>
                                        <div [innerHTML]="notFound"></div>
                                        </ng-template>
                                </div>
                                <div class="col-sm-6" *ngIf="SelectedDataarrOfVehiclespl!=undefined">
                                    <label class="control-label txt_lbl">Selected Vehicle</label>
                                    <span class="form-control" style="background: none;border: none;">
                                        <label style="    background: linear-gradient(to bottom, #FF0000 0% , #563b3b 100%);
                                        width: 100px;
                                        height: 26px;
                                        text-align: center;
                                        padding: 3px;
                                        color: white;border-top-left-radius: 5px;border-bottom-left-radius: 5px">{{SelectedDataarrOfVehiclespl.make}}</label>
                                        <label style="background-color: #52524f;
                                        width: 90px;
                                        height: 26px;
                                        text-align: center;
                                        padding: 3px;
                                        color: white;">{{SelectedDataarrOfVehiclespl.model}}</label>
                                        <label *ngIf="SelectedDataarrOfVehiclespl.variant" style="background-color: #52524f;
                                        width: auto;
                                        height: 26px;
                                        text-align: center;
                                        padding: 3px;
                                        color: white;border-top-right-radius: 5px;border-bottom-right-radius: 5px">{{SelectedDataarrOfVehiclespl.variant}}</label>
                                    </span>
                                </div> -->
                    <div class="col-sm-12" *ngIf="foralltrue == false">
                      <table
                        class="table table_left table-bordered"
                        style="background-color: #fff"
                      >
                        <thead>
                          <tr>
                            <th style="background-color: #61605d; color: #fff">
                              {{ "Make,Model & Variants" | translate }}
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>
                              <div>
                                <div style="display: flex">
                                  <span
                                    class="input-group-addon"
                                    style="
                                      padding: 0 15px 0 5px;
                                      border-top-left-radius: 5px;
                                      border-bottom-left-radius: 5px;
                                    "
                                  >
                                    <i
                                      style="
                                        margin-top: 9px;
                                        margin-right: 1rem;
                                      "
                                      class="fa fa-search fa-1x"
                                      aria-hidden="true"
                                    ></i>
                                  </span>
                                  <span style="width: 100%; text-align: left">
                                    <ng-select
                                      id="spare_search_make"
                                      style="
                                        width: 100%;
                                        text-align: left;
                                        margin-left: 1rem;
                                      "
                                      formControlName="searchspareVehicle"
                                      [closeOnSelect]="false"
                                      [virtualScroll]="true"
                                      [multiple]="true"
                                      placeHolder="Search & Add Model, Variants"
                                      (focus)="searchModelVariforCompfo($event)"
                                      (scrollToEnd)="loadMoreDataveh()"
                                      [items]="searchModelvari"
                                      (search)="searchModelVariforComp($event)"
                                      (add)="onAdd($event)"
                                      (remove)="onRemove($event)"
                                    >
                                      <ng-template
                                        ng-option-tmp
                                        let-item="item"
                                        let-item$="item$"
                                        let-index="index"
                                      >
                                        <input
                                          id="item-{{ index }}"
                                          type="checkbox"
                                          [ngModel]="item$.selected"
                                          [ngModelOptions]="{
                                            standalone: true
                                          }"
                                        />
                                        {{ item }}
                                      </ng-template>
                                    </ng-select>
                                  </span>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                  <label
                    class="control-label"
                    style="
                      font-size: 16px;
                      border-bottom: 1px solid #ce0e17;
                      margin-bottom: 1%;
                    "
                    ><b>{{ "Pricing Details" | translate }}</b></label
                  >
                  <div class="form-group">
                    <!-- <div class="col-sm-4">
                                    <label class="control-label txt_lbl">Purchase Price</label>
                                    <input type="text" class="form-control cir" formControlName="purchaseprice">
                                    <div *ngIf="CreateJobForm.controls['purchaseprice'].invalid && (CreateJobForm.controls['purchaseprice'].dirty || CreateJobForm.controls['purchaseprice'].touched)" class="text-danger">
                                        <div *ngIf="CreateJobForm.controls['purchaseprice'].errors.pattern">
                                        Enter a Valid Purchase Price.
                                        </div>
                                    </div>
                                </div> -->
                    <div class="col-lg-4 col-sm-4 col-md-4">
                      <label class="control-label txt_lbl"
                        >{{ "Job Price" | translate
                        }}<span style="color: #c30707; font-weight: bold"
                          ><span style="color: #c30707; font-weight: bold"
                            >*</span
                          ></span
                        ></label
                      >
                      <input
                        type="text"
                        class="form-control cir"
                        (input)="
                          checkpricefortotal(
                            CreateJobForm.value.sellingprice,
                            CreateJobForm.value.gstslab,
                            CreateJobForm.value.gsttype
                          )
                        "
                        formControlName="sellingprice"
                      />
                      <div
                        *ngIf="CreateJobForm.controls['sellingprice'].invalid"
                        class="text-danger"
                      >
                        <div
                          *ngIf="
                            CreateJobForm.controls['sellingprice'].errors
                              .required
                          "
                        >
                          {{ "Job Price is required" | translate }}.
                        </div>
                        <div
                          *ngIf="
                            CreateJobForm.controls['sellingprice'].errors
                              .pattern
                          "
                        >
                          {{ "Enter a Valid Job Price" | translate }}.
                        </div>
                      </div>
                    </div>
                  </div>
                  <label
                    *ngIf="
                      allBillingData != undefined &&
                      allBillingData.gst_number != ''
                    "
                    class="control-label"
                    style="
                      font-size: 16px;
                      border-bottom: 1px solid #ce0e17;
                      margin-bottom: 1%;
                    "
                    ><b>{{ "Tax Details" | translate }}</b></label
                  >
                  <div
                    class="form-group"
                    *ngIf="
                      allBillingData != undefined &&
                      allBillingData.gst_number != ''
                    "
                  >
                    <div class="col-lg-4 col-sm-4 col-md-4">
                      <label class="control-label txt_lbl">{{
                        "HSN Number" | translate
                      }}</label>
                      <input
                        type="text"
                        class="form-control cir"
                        formControlName="hsnno"
                      />
                    </div>
                    <div
                      class="col-lg-4 col-sm-4 col-md-4"
                      *ngIf="
                        allBillingData != undefined &&
                        allBillingData.gst_number != ''
                      "
                    >
                      <label class="control-label txt_lbl">{{
                        "GST Slab" | translate
                      }}</label>
                      <select
                        class="form-control cir"
                        formControlName="gstslab"
                        (change)="
                          checkpricefortotal(
                            CreateJobForm.value.sellingprice,
                            CreateJobForm.value.gstslab,
                            CreateJobForm.value.gsttype
                          )
                        "
                      >
                        <option
                          *ngFor="let data of gstNumberArr"
                          value="{{ data }}"
                        >
                          {{ data }}
                        </option>
                      </select>
                    </div>
                    <div
                      class="col-lg-4 col-sm-4 col-md-4"
                      *ngIf="
                        allBillingData != undefined &&
                        allBillingData.gst_number != ''
                      "
                    >
                      <label class="control-label txt_lbl">{{
                        "GST Type" | translate
                      }}</label>
                      <select
                        class="form-control cir"
                        formControlName="gsttype"
                        (change)="
                          checkpricefortotal(
                            CreateJobForm.value.sellingprice,
                            CreateJobForm.value.gstslab,
                            CreateJobForm.value.gsttype
                          )
                        "
                      >
                        <option *ngFor="let data of gsttype" value="{{ data }}">
                          {{ data }}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-lg-offset-4 col-lg-4 col-sm-4 col-md-4">
                      <button
                        type="submit"
                        *ngIf="showJobUpdate == false"
                        data-dismiss="modal"
                        [disabled]="
                          allSelectedMake == undefined ||
                          CreateJobForm.pristine ||
                          CreateJobForm.invalid
                        "
                        (click)="createJobByAPI('create')"
                        class="btn btn-primary cir cir_btn"
                        style="
                          font-size: 12px;
                          margin: 7% 0 0 0;
                          background: linear-gradient(
                            to bottom,
                            #ff0000 0%,
                            #563b3b 100%
                          );
                          border-color: #c30707;
                          font-weight: bold;
                          width: 90%;
                        "
                      >
                        {{ "Create Job" | translate }}
                      </button>
                      <button
                        type="submit"
                        *ngIf="showJobUpdate == true"
                        data-dismiss="modal"
                        [disabled]="
                          allSelectedMake == undefined ||
                          CreateJobForm.pristine ||
                          CreateJobForm.invalid
                        "
                        (click)="createJobByAPI('update')"
                        class="btn btn-primary cir cir_btn"
                        style="
                          font-size: 12px;
                          margin: 7% 0 0 0;
                          background: linear-gradient(
                            to bottom,
                            #ff0000 0%,
                            #563b3b 100%
                          );
                          border-color: #c30707;
                          font-weight: bold;
                          width: 90%;
                        "
                      >
                        {{ "Update Job" | translate }}
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div
        class="modal"
        id="history"
        tabindex="-1"
        role="dialog"
        aria-hidden="true"
        style="background: rgba(0, 0, 0, 0.5); padding: 3px 2px"
      >
        <div class="modal-dialog">
          <div class="modal-content animated">
            <div
              class="modal-header"
              style="padding: 0px !important ; padding-top: 5px"
            >
              <div class="ibox-title popup-card-title">
                <div class="row">
                  <div class="col-lg-4">
                    <h1 style="font-size: 21px; float: left">
                      {{ "Last History" | translate
                      }}<span
                        *ngIf="alldates != undefined"
                        data-toggle="tooltip"
                        title="Total Jobcards Count"
                        style="color: #c30707; font-weight: bold"
                        >({{ alldates.length }})</span
                      >
                    </h1>
                  </div>
                  <div
                    class="col-lg-6 col-sm-6 col-md-6"
                    style="padding: 6px; display: flex"
                    *ngIf="selectedDate != 'none'"
                  >
                    <i
                      *ngIf="ShoePreviousDate == true"
                      (click)="getPreviousDate(selectedDateIndex)"
                      class="fa fa-angle-double-left"
                      style="
                        cursor: pointer;
                        color: #c30707;
                        font-weight: bold;
                        font-size: 35px;
                        position: fixed;
                      "
                    ></i>
                    <div style="margin-top: 10px">
                      <span
                        style="
                          font-size: 13px;
                          padding: 44px;
                          font-weight: bold;
                        "
                        >{{ selectedDate | date: "d MMM  y h:mm a" }}</span
                      >
                    </div>
                    <i
                      *ngIf="ShoeNextDate == true"
                      (click)="getNextDate(selectedDateIndex)"
                      class="fa fa-angle-double-right"
                      style="
                        cursor: pointer;
                        color: #c30707;
                        font-weight: bold;
                        font-size: 35px;
                        position: fixed;
                        margin-left: 192px;
                      "
                    ></i>
                  </div>
                  <div
                    class="col-lg-2 col-sm-2 col-md-2"
                    style="margin-top: 1%; float: right"
                  >
                    <label
                      data-dismiss="modal"
                      class="btn btn-white cir"
                      style="padding: 1px 4px; background: none; border: none"
                      ><i class="fa fa-times fa-2x" aria-hidden="true"></i
                    ></label>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-body" style="padding-top: 0">
              <div
                class="ibox-content"
                style="background-color: #f1f1f1; padding: 5px 0%"
              >
                <div class="row">
                  <div class="col-lg-12 col-sm-12 col-md-12">
                    <div class="row">
                      <div class="col-lg-6 col-sm-6 col-md-6">
                        <table class="table">
                          <tbody class="history">
                            <tr>
                              <th>{{ "Running Km" | translate }}:</th>
                              <!-- <td>{{kmHistory}} (10% Fuel Level)</td> -->
                              <td *ngIf="historyData != undefined">
                                {{ kmHistory }}
                              </td>
                            </tr>
                            <tr>
                              <th *ngIf="historyData != undefined">
                                {{ "Next Service Due" | translate }}:
                              </th>
                              <td *ngIf="historyData != undefined">
                                {{ remiderforsameday | date: "d MMM  y" }}/ On
                                {{ reminderKMForHistory }} Km
                              </td>
                            </tr>
                            <tr>
                              <th
                                *ngIf="
                                  historyData != undefined &&
                                  historyData.cost_estimate != null &&
                                  historyData.cost_estimate != ''
                                "
                              >
                                {{ "Estimate" | translate }}:
                              </th>
                              <td
                                *ngIf="
                                  historyData != undefined &&
                                  historyData.cost_estimate != null &&
                                  historyData.cost_estimate != ''
                                "
                              >
                                {{ historyData.cost_estimate }}
                              </td>
                            </tr>
                            <tr>
                              <th
                                *ngIf="
                                  historyData != undefined &&
                                  historyData.advance != '0.0' &&
                                  historyData.advance != ''
                                "
                              >
                                {{ "Advance" | translate }} :
                              </th>
                              <td
                                *ngIf="
                                  historyData != undefined &&
                                  historyData.advance != '0.0' &&
                                  historyData.advance != ''
                                "
                              >
                                {{ currency_symbol }} {{ historyData.advance }}
                              </td>
                            </tr>
                            <tr>
                              <th
                                *ngIf="
                                  historyData != undefined &&
                                  historyData.jobcard_mechanic != '' &&
                                  historyData.jobcard_mechanic != '[]'
                                "
                              >
                                {{ "Mechanic" | translate }}:
                              </th>
                              <td
                                *ngIf="
                                  historyData != undefined &&
                                  historyData.jobcard_mechanic != '' &&
                                  historyData.jobcard_mechanic != '[]'
                                "
                              >
                                {{ mechanicData }}
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div class="col-lg-6 col-sm-6 col-md-6">
                        <table class="table">
                          <tbody class="history">
                            <tr>
                              <th *ngIf="historyData != undefined">
                                {{ "Invoice No" | translate }}.:
                              </th>
                              <td *ngIf="historyData != undefined">
                                {{ historyData.jobcard_number }}
                              </td>
                            </tr>
                            <tr>
                              <th *ngIf="historyData != undefined">
                                {{ "Invoice Amount" | translate }}:
                              </th>
                              <td *ngIf="historyData != undefined">
                                {{ currency_symbol }}
                                {{
                                  ConvertToInt(historyData.paid_amount) +
                                    ConvertToInt(historyData.advance) +
                                    ConvertToInt(historyData.balance_amount)
                                }}
                              </td>
                            </tr>
                            <tr>
                              <th
                                *ngIf="
                                  historyData != undefined &&
                                  historyData.paid_amount != '0.0' &&
                                  historyData.paid_amount != ''
                                "
                              >
                                {{ "Paid" | translate }}:
                              </th>
                              <td
                                *ngIf="
                                  historyData != undefined &&
                                  historyData.paid_amount != '0.0' &&
                                  historyData.paid_amount != ''
                                "
                              >
                                {{ currency_symbol }}
                                {{ ConvertToInt(historyData.paid_amount) }}
                              </td>
                            </tr>
                            <tr>
                              <th
                                *ngIf="
                                  historyData != undefined &&
                                  historyData.balance_amount != '0.0' &&
                                  historyData.balance_amount != ''
                                "
                              >
                                {{ "Balance" | translate }}:
                              </th>
                              <td
                                *ngIf="
                                  historyData != undefined &&
                                  historyData.balance_amount != '0.0' &&
                                  historyData.balance_amount != ''
                                "
                                style="color: #c30707; font-weight: bold"
                              >
                                {{ currency_symbol }}
                                {{ ConvertToInt(historyData.balance_amount) }}
                              </td>
                            </tr>
                            <tr>
                              <th
                                *ngIf="
                                  historyData != undefined &&
                                  historyData.payment_mode != ''
                                "
                              >
                                {{ "Payment Mode" | translate }}:
                              </th>
                              <td
                                *ngIf="
                                  historyData != undefined &&
                                  historyData.payment_mode != ''
                                "
                              >
                                {{ historyData.payment_mode
                                }}<span
                                  *ngIf="
                                    historyData != undefined &&
                                    historyData.cheque != ''
                                  "
                                >
                                  ({{ historyData.cheque }})
                                </span>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                  <div
                    class="col-lg-12 col-sm-12 col-md-12"
                    style="margin-top: 10px"
                  ></div>
                  <div
                    class="col-lg-12 col-sm-12 col-md-12"
                    style="margin-left: 8px"
                  >
                    <span style="font-weight: bold; font-size: 13px">
                      {{ "Invoice Details" | translate }}
                    </span>
                  </div>
                  <div
                    class="col-lg-12 col-sm-12 col-md-12"
                    style="margin-top: 10px"
                  ></div>
                  <div
                    class="col-lg-12 col-sm-12 col-md-12 inventory-data"
                    *ngIf="
                      historyData != undefined &&
                      historyData.jobcard_spare_items != '[]'
                    "
                  >
                    <span style="font-weight: bold; font-size: 13px">{{
                      "Spare Details" | translate
                    }}</span>
                    <table class="table inventory">
                      <thead>
                        <tr>
                          <th scope="col" style="width: 1px">#</th>
                          <th scope="col">{{ "Perticulars" | translate }}</th>
                          <th scope="col">{{ "Quantity" | translate }}</th>
                          <th scope="col">{{ "Unit Price" | translate }}</th>
                          <th
                            *ngIf="
                              historyData != undefined &&
                              jobcardSettingHistory.gst_number != ''
                            "
                            scope="col"
                          >
                            {{ "GST" | translate }}
                          </th>
                          <th scope="col">{{ "Amount" | translate }}</th>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container
                          *ngFor="let data of spareHistoryData; let i = index"
                        >
                          <tr>
                            <th scope="row">{{ i + 1 }}</th>
                            <td>{{ data.part_name }}</td>
                            <td>{{ data.quantity }}</td>
                            <td>
                              {{ currency_symbol }} {{ data.unit_sale_price }}
                            </td>
                            <td
                              *ngIf="
                                historyData != undefined &&
                                jobcardSettingHistory.gst_number != ''
                              "
                            >
                              {{ currency_symbol }} {{ data.sale_total_gst }}({{
                                data.sale_gst_rate
                              }}
                              {{ data.sale_tax_type | slice: 0:4 }}.)
                            </td>
                            <td style="font-weight: bold">
                              {{ currency_symbol }} {{ data.amount }}
                            </td>
                          </tr>
                        </ng-container>
                        <tr>
                          <th></th>
                          <td></td>
                          <td></td>
                          <td
                            *ngIf="
                              historyData != undefined &&
                              jobcardSettingHistory.gst_number != ''
                            "
                          ></td>
                          <td style="font-weight: bold">
                            {{ "Spare Total" | translate }}
                          </td>
                          <td style="font-weight: bold">
                            {{ currency_symbol }} {{ spareHistoryTotal }}
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <div
                    class="col-lg-12 col-sm-12 col-md-12"
                    style="margin-top: 10px"
                  ></div>
                  <div
                    class="col-lg-12 col-sm-12 col-md-12 inventory-data"
                    *ngIf="
                      historyData != undefined &&
                      historyData.jobcard_lubes_items != '[]'
                    "
                  >
                    <span style="font-weight: bold; font-size: 13px">{{
                      "Lube Details" | translate
                    }}</span>
                    <table class="table inventory">
                      <thead>
                        <tr>
                          <th scope="col" style="width: 1px">#</th>
                          <th scope="col">{{ "Perticulars" | translate }}</th>
                          <th scope="col">{{ "Quantity" | translate }}</th>
                          <th scope="col">{{ "Unit Price" | translate }}</th>
                          <th
                            *ngIf="
                              historyData != undefined &&
                              jobcardSettingHistory.gst_number != ''
                            "
                            scope="col"
                          >
                            {{ "GST" | translate }}
                          </th>
                          <th scope="col">{{ "Amount" | translate }}</th>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container
                          *ngFor="let data of lubesHistoryData; let i = index"
                        >
                          <tr>
                            <th scope="row">{{ i + 1 }}</th>
                            <td>{{ data.part_name }}</td>
                            <td>{{ data.quantity }}</td>
                            <td>
                              {{ currency_symbol }} {{ data.unit_sale_price }}
                            </td>
                            <td
                              *ngIf="
                                historyData != undefined &&
                                jobcardSettingHistory.gst_number != ''
                              "
                            >
                              {{ currency_symbol }} {{ data.sale_total_gst }}({{
                                data.sale_gst_rate
                              }}
                              {{ data.sale_tax_type | slice: 0:4 }}.)
                            </td>
                            <td style="font-weight: bold">
                              {{ currency_symbol }} {{ data.amount }}
                            </td>
                          </tr>
                        </ng-container>
                        <tr>
                          <th></th>
                          <td></td>
                          <td></td>
                          <td
                            *ngIf="
                              historyData != undefined &&
                              jobcardSettingHistory.gst_number != ''
                            "
                          ></td>
                          <td style="font-weight: bold">
                            {{ "Lube Total" | translate }}
                          </td>
                          <td style="font-weight: bold">
                            {{ currency_symbol }} {{ lubeHistoryTotal }}
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <div
                    class="col-lg-12 col-sm-12 col-md-12"
                    style="margin-top: 10px"
                  ></div>
                  <div
                    class="col-lg-12 col-sm-12 col-md-12 inventory-data"
                    *ngIf="
                      historyData != undefined &&
                      historyData.jobcard_job_items != '[]'
                    "
                  >
                    <span style="font-weight: bold; font-size: 13px">{{
                      "Jobs Details" | translate
                    }}</span>
                    <table class="table inventory">
                      <thead>
                        <tr>
                          <th scope="col" style="width: 1px">#</th>
                          <th scope="col">{{ "Perticulars" | translate }}</th>
                          <th scope="col">{{ "Quantity" | translate }}</th>
                          <th scope="col">{{ "Unit Price" | translate }}</th>
                          <th
                            *ngIf="
                              historyData != undefined &&
                              jobcardSettingHistory.gst_number != ''
                            "
                            scope="col"
                          >
                            {{ "GST" | translate }}
                          </th>
                          <th scope="col">{{ "Amount" | translate }}</th>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container
                          *ngFor="let data of jobHistoryData; let i = index"
                        >
                          <tr>
                            <th scope="row">{{ i + 1 }}</th>
                            <td>{{ data.part_name }}</td>
                            <td>{{ data.quantity }}</td>
                            <td>
                              {{ currency_symbol }} {{ data.unit_sale_price }}
                            </td>
                            <td
                              *ngIf="
                                historyData != undefined &&
                                jobcardSettingHistory.gst_number != ''
                              "
                            >
                              {{ currency_symbol }} {{ data.sale_total_gst }}({{
                                data.sale_gst_rate
                              }}
                              {{ data.sale_tax_type | slice: 0:4 }}.)
                            </td>
                            <td style="font-weight: bold">
                              {{ currency_symbol }} {{ data.amount }}
                            </td>
                          </tr>
                        </ng-container>

                        <tr>
                          <th></th>
                          <td></td>
                          <td></td>
                          <td
                            *ngIf="
                              historyData != undefined &&
                              jobcardSettingHistory.gst_number != ''
                            "
                          ></td>
                          <td style="font-weight: bold">
                            {{ "Job Total" | translate }}
                          </td>
                          <td style="font-weight: bold">
                            {{ currency_symbol }} {{ jobHistoryTotal }}
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <div
                    class="col-lg-12 col-sm-12 col-md-12"
                    style="margin-top: 12px"
                  >
                    <table class="table">
                      <tbody class="history">
                        <tr>
                          <th
                            *ngIf="
                              historyData != undefined &&
                              historyData.jobcard_customer_voice != '' &&
                              historyData.jobcard_customer_voice != '[]'
                            "
                          >
                            {{ "Customer Voice" | translate }}:
                          </th>
                          <td
                            *ngIf="
                              historyData != undefined &&
                              historyData.jobcard_customer_voice != '' &&
                              historyData.jobcard_customer_voice != '[]'
                            "
                          >
                            {{ CustomerVoice }}
                          </td>
                        </tr>
                        <tr>
                          <th
                            *ngIf="
                              historyData != undefined &&
                              historyData.work_note != '' &&
                              historyData.work_note != '[]'
                            "
                          >
                            {{ "Work Notes" | translate }}:
                          </th>
                          <td
                            *ngIf="
                              historyData != undefined &&
                              historyData.work_note != '' &&
                              historyData.work_note != '[]'
                            "
                          >
                            {{ Worknotes }}
                          </td>
                        </tr>
                        <tr>
                          <th
                            *ngIf="
                              historyData != undefined &&
                              historyData.exit_note != ''
                            "
                          >
                            {{ "Exit Notes" | translate }}:
                          </th>
                          <td
                            *ngIf="
                              historyData != undefined &&
                              historyData.exit_note != ''
                            "
                          >
                            {{ historyData.exit_note }}
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="col-lg-12 col-sm-12 col-md-12">
                    <div class="row">
                      <div class="col-lg-6 col-sm-6 col-md-6">
                        <table class="table">
                          <tbody class="history">
                            <tr>
                              <th>{{ "Create Time" | translate }}:</th>
                              <td *ngIf="historyData != undefined">
                                {{
                                  historyData.created_at
                                    | date: "h:mm a d MMM yy"
                                }}({{ "Delivered" | translate }})
                              </td>
                            </tr>
                            <tr>
                              <th
                                *ngIf="
                                  historyData != undefined &&
                                  historyData.complete_date != ''
                                "
                              >
                                {{ "Complete Time" | translate }}:
                              </th>
                              <td
                                *ngIf="
                                  historyData != undefined &&
                                  historyData.complete_date != ''
                                "
                              >
                                {{
                                  historyData.complete_date
                                    | date: "h:mm a d MMM yy"
                                }}({{ "Delivered" | translate }})
                              </td>
                            </tr>
                            <tr>
                              <th>{{ "Delivery Time" | translate }}:</th>
                              <td *ngIf="historyData != undefined">
                                {{
                                  historyData.estimated_delivery_datetime
                                    | date: "h:mm a d MMM yy"
                                }}
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div class="col-lg-6 col-sm-6 col-md-6">
                        <table
                          class="table"
                          *ngIf="
                            historyData != undefined && smsHistory != 'nodata'
                          "
                        >
                          <tbody class="history">
                            <tr>
                              <th>{{ "Reminder" | translate }} 1:</th>
                              <td>
                                {{
                                  smsHistory[0].date | date: "h:mm a d MMM yy"
                                }}
                                ({{ smsHistory[0].status }})
                              </td>
                            </tr>
                            <tr>
                              <th *ngIf="smsHistory[1] != undefined">
                                {{ "Reminder" | translate }} 2:
                              </th>
                              <td *ngIf="smsHistory[1] != undefined">
                                {{
                                  smsHistory[1].date | date: "h:mm a d MMM yy"
                                }}
                                ({{ smsHistory[0].status }})
                              </td>
                            </tr>
                            <tr>
                              <th *ngIf="smsHistory[2] != undefined">
                                {{ "Reminder" | translate }} 3:
                              </th>
                              <td *ngIf="smsHistory[2] != undefined">
                                {{
                                  smsHistory[2].date | date: "h:mm a d MMM yy"
                                }}
                                ({{ smsHistory[0].status }})
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div
        class="modal inmodal"
        id="add_satff"
        tabindex="-1"
        role="dialog"
        aria-hidden="true"
        style="background: rgba(0, 0, 0, 0.5)"
      >
        <div class="modal-dialog" style="margin-right: -18px">
          <div class="modal-content animated">
            <div class="modal-header" style="padding: 0px">
              <div
                class="ibox-title"
                style="
                  background-color: #f1f1f1;
                  padding: 8px 23px 8px;
                  border: none;
                  border-bottom: 1px solid #4d4f5c;
                "
              >
                <div class="row">
                  <div class="col-lg-6 col-sm-6 col-md-6">
                    <h1 style="font-size: 22px; float: left">
                      {{ "Add Satff" | translate }}
                    </h1>
                  </div>

                  <div
                    class="col-lg-2 col-sm-2 col-md-2"
                    style="margin-top: 1%; float: right"
                  >
                    <label
                      data-dismiss="modal"
                      class="btn btn-white cir"
                      style="padding: 1px 4px; background: none; border: none"
                      ><i class="fa fa-times fa-2x" aria-hidden="true"></i
                    ></label>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-body" style="padding-top: 0">
              <div
                class="ibox-content"
                style="background-color: #f1f1f1; padding: 5px 3%"
              >
                <form
                  novalidate
                  class="form-horizontal"
                  [formGroup]="satffForm"
                >
                  <div class="row">
                    <div class="col-lg-12 col-sm-12 col-md-12">
                      <label
                        class="control-label"
                        style="
                          font-size: 16px;
                          border-bottom: 1px solid #ce0e17;
                          margin-bottom: 1%;
                        "
                        ><b>{{ "User Details" | translate }}</b></label
                      >
                      <div class="form-group">
                        <div class="col-lg-3 col-sm-3 col-md-3">
                          <label class="control-label txt_lbl">{{
                            "Select Staff Type" | translate
                          }}</label>
                          <select
                            class="form-control cir"
                            formControlName="stafftype"
                            [value]="satffForm.value.stafftype"
                          >
                            <option value="Mechanic">
                              {{ "Mechanic" | translate }}
                            </option>
                            <option value="Supervisor">
                              {{ "Supervisor" | translate }}
                            </option>
                            <option value="Admin">
                              {{ "Admin" | translate }}
                            </option>
                            <option value="Staff">
                              {{ "Staff" | translate }}
                            </option>
                            <option value="Denter">
                              {{ "Denter" | translate }}
                            </option>
                            <option value="Painter">
                              {{ "Painter" | translate }}
                            </option>
                            <option value="Electrician">
                              {{ "Electrician" | translate }}
                            </option>
                          </select>
                        </div>
                      </div>
                      <div class="form-group">
                        <div class="col-lg-9 col-sm-9 col-md-9">
                          <label class="control-label txt_lbl"
                            >{{ "Name" | translate
                            }}<span style="color: #c30707; font-weight: bold"
                              >*</span
                            ></label
                          >
                          <input
                            type="text"
                            class="form-control cir"
                            formControlName="name"
                          />
                          <div
                            *ngIf="
                              satffForm.controls['name'].invalid &&
                              (satffForm.controls['name'].dirty ||
                                satffForm.controls['name'].touched)
                            "
                            class="text-danger"
                          >
                            <div
                              *ngIf="satffForm.controls['name'].errors.required"
                            >
                              {{ "Staff Name is required" | translate }}.
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="form-group">
                        <div class="col-lg-4 col-sm-4 col-md-4">
                          <label class="control-label txt_lbl"
                            >{{ "Mobile Number" | translate
                            }}<span style="color: #c30707; font-weight: bold"
                              >*</span
                            ></label
                          >
                          <input
                            type="text"
                            maxlength="10"
                            class="form-control cir"
                            formControlName="mobile1"
                          />
                          <div
                            *ngIf="
                              satffForm.controls['mobile1'].invalid &&
                              (satffForm.controls['mobile1'].dirty ||
                                satffForm.controls['mobile1'].touched)
                            "
                            class="text-danger"
                          >
                            <div
                              *ngIf="
                                satffForm.controls['mobile1'].errors.required
                              "
                            >
                              {{ "Mobile Number is required" | translate }}.
                            </div>
                            <div
                              *ngIf="
                                satffForm.controls['mobile1'].errors.pattern
                              "
                            >
                              {{ "Enter a Valid Number" | translate }}
                            </div>
                          </div>
                        </div>
                        <div class="col-lg-4 col-sm-4 col-md-4">
                          <label class="control-label txt_lbl"
                            >{{ "Mobile Number" | translate }} 2</label
                          >
                          <input
                            type="text"
                            maxlength="10"
                            class="form-control cir"
                            formControlName="mobile2"
                          />
                          <div
                            *ngIf="
                              satffForm.controls['mobile2'].invalid &&
                              (satffForm.controls['mobile2'].dirty ||
                                satffForm.controls['mobile2'].touched)
                            "
                            class="text-danger"
                          >
                            <div
                              *ngIf="
                                satffForm.controls['mobile2'].errors.pattern
                              "
                            >
                              {{ "Enter a Valid Number" | translate }}
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="form-group">
                        <div class="col-lg-4 col-sm-4 col-md-4">
                          <label class="control-label txt_lbl">{{
                            "Email" | translate
                          }}</label>
                          <input
                            type="text"
                            class="form-control cir"
                            formControlName="email"
                          />
                          <div
                            *ngIf="
                              satffForm.controls['email'].invalid &&
                              (satffForm.controls['email'].dirty ||
                                satffForm.controls['email'].touched)
                            "
                            class="text-danger"
                          >
                            <div
                              *ngIf="satffForm.controls['email'].errors.email"
                            >
                              {{ "Enter a Valid Email" | translate }}
                            </div>
                          </div>
                        </div>
                        <div class="col-lg-4 col-sm-4 col-md-4">
                          <label class="control-label txt_lbl">{{
                            "Joining Date" | translate
                          }}</label>
                          <input
                            class="form-control cir"
                            formControlName="joindate"
                            (click)="d.toggle()"
                            ngbDatepicker
                            #d="ngbDatepicker"
                            style="background-color: #fff"
                            readonly
                          />
                          <div
                            *ngIf="
                              satffForm.controls['joindate'].invalid &&
                              (satffForm.controls['joindate'].dirty ||
                                satffForm.controls['joindate'].touched)
                            "
                            class="text-danger"
                          >
                            <div
                              *ngIf="
                                satffForm.controls['joindate'].errors.required
                              "
                            >
                              {{ "Enter a valid Date" | translate }}.
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="form-group">
                        <div class="col-lg-4 col-sm-4 col-md-4">
                          <label class="control-label txt_lbl"
                            >{{ "Salary" | translate }}({{
                              currency_symbol
                            }})</label
                          >
                          <input
                            type="text"
                            class="form-control cir"
                            formControlName="salary"
                          />
                          <div
                            *ngIf="
                              satffForm.controls['salary'].invalid &&
                              (satffForm.controls['salary'].dirty ||
                                satffForm.controls['salary'].touched)
                            "
                            class="text-danger"
                          >
                            <div
                              *ngIf="
                                satffForm.controls['salary'].errors.pattern
                              "
                            >
                              {{ "Enter a Valid Salary" | translate }}
                            </div>
                          </div>
                        </div>
                        <div class="col-lg-4 col-sm-4 col-md-4">
                          <label class="control-label txt_lbl"
                            >{{ "Incentives" | translate }} (%)</label
                          >
                          <input
                            type="text"
                            class="form-control cir"
                            formControlName="incentive"
                          />
                          <div
                            *ngIf="
                              satffForm.controls['incentive'].invalid &&
                              (satffForm.controls['incentive'].dirty ||
                                satffForm.controls['incentive'].touched)
                            "
                            class="text-danger"
                          >
                            <div
                              *ngIf="
                                satffForm.controls['incentive'].errors.pattern
                              "
                            >
                              {{ "Enter a Valid Incentive" | translate }}
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <div
                      class="col-lg-offset-4 col-lg-4"
                      style="display: flex; margin-left: 90px"
                    >
                      <button
                        type="submit"
                        [disabled]="
                          satffForm.getRawValue().name == '' ||
                          satffForm.getRawValue().mobile1 == ''
                        "
                        class="btn btn-primary cir cir_btn"
                        style="
                          font-size: 12px;
                          margin: 7% 0 0 0;
                          background: linear-gradient(
                            to bottom,
                            #ff0000 0%,
                            #563b3b 100%
                          );
                          border-color: #c30707;
                          font-weight: bold;
                          width: 90%;
                          margin-right: 24px;
                        "
                        (click)="addstaff('create', 'new')"
                      >
                        {{ "Save&New" | translate }}
                      </button>
                      <button
                        type="submit"
                        data-dismiss="modal"
                        [disabled]="
                          satffForm.getRawValue().name == '' ||
                          satffForm.getRawValue().mobile1 == ''
                        "
                        class="btn btn-primary cir cir_btn"
                        style="
                          font-size: 12px;
                          margin: 7% 0 0 0;
                          background: linear-gradient(
                            to bottom,
                            #ff0000 0%,
                            #563b3b 100%
                          );
                          border-color: #c30707;
                          font-weight: bold;
                          width: 90%;
                        "
                        (click)="addstaff('create', 'nonew')"
                      >
                        {{ "Save" | translate }}
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
