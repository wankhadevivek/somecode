<app-spinlogin></app-spinlogin>
<div class="closepoup" style="float: right; margin-bottom: 8px; margin-top: 7px; margin-right: 10px;">
    <label (click)="closePopup(false)" class="btn btn-white cir btn-close-top"><i class="fa fa-times fa-2x" aria-hidden="true"></i></label>
</div>

<div class="row">
    <div class="col-lg-12 btn-rgb-col">
        <div class="yellow">
            <span class="dottra trd-title-yellow"> </span>
            <span class="trd-title-yellow-text"> {{'READY FOR SETTLEMENT' | translate}}</span>
        </div>

        <div class="green" style="padding: 0px 20px 0px 20px;">
            <span class="dottra trd-title-green"> </span>
            <span class="trd-title-green-text"> {{'SETTLED' | translate}}</span>
        </div>

        <div class="red">
            <span class="dottra trd-title-red"> </span>
            <span class="trd-title-red-text"> {{'ISSUE IN SETTLEMENT' | translate}}</span>
        </div>
    </div>
</div>

<ng-container *ngFor="let item of showalltarns; index as i;">
    <div class="row" style="padding: 11px;">
        <div class="col-sm-12">
            <mat-accordion>
                <mat-expansion-panel (afterExpand)="showtransaction(item.transid,i)">
                    <mat-expansion-panel-header>
                        <mat-panel-title id="mat-panel-title-id">
                            {{item.transid}}
                        </mat-panel-title>
                        <mat-panel-description id="mat-panel-description-id" *ngIf='item.status=="SUCCESS"||item.status!=""'>
                            {{currency_symbol}} {{item.amount}} &nbsp;
                                <span >
                                <p *ngIf='item.status=="SUCCESS"' style="color: rgb(144, 233, 10);line-height: 1.3;font-weight: bold;" >{{'Payment Successful' | translate}}</p>
                                <p *ngIf='item.status!=""&&item.status!="SUCCESS"' style="color: #c30707;line-height: 1.3;font-weight: bold;">{{'Payment Failed' | translate}}</p>
                                </span>
                        </mat-panel-description>
                        <mat-panel-description id="mat-panel-description-id" style="margin-left: 157px;" *ngIf='item.status==""'>
                            {{currency_symbol}} {{item.amount}} &nbsp;
                            <span >
                                <p *ngIf='item.status==""' style="color: #c30707;line-height: 1.3; font-weight: bold;">{{'No Payment Yet' | translate}}</p>
                                </span>
                        </mat-panel-description>
                    </mat-expansion-panel-header>
                    <div class="row" *ngIf='item.status!=""&&item.stausfree!="Fail"'>
                        <div class="col-sm-12" style="padding: 14px;">
                            <span >
                                {{item.requestedat | date:'MMM, d'}} {{'Requested' | translate}}
                            </span>
                            <span class="dottra" style="margin-bottom: -25px; margin-left: -126px;"></span>
                                <div class="line"></div>
                                <span class="dottra" style="margin-bottom: -25px;
                                margin-left: 260px;"></span>
                            <span style="margin-left: -33px;">
                                {{item.receviedat | date:'MMM, d'}} {{'Received' | translate}}
                            </span>
                            
                            <span style="margin-left: 162px;">
                                {{item.receviedat | date:'MMM, d'}} {{'Settled' | translate}}
                            </span>
                            <div class="line"></div>
                            <span *ngIf='item.payfree=="READY_FOR_SETTLEMENT"' class="dottra" style="margin-left: -18px;
                            margin-bottom: -25px; background-color: yellow ;"></span>
                            <span *ngIf='item.payfree=="SETTLED"' class="dottra" style="margin-left: -18px;
                            margin-bottom: -25px;"></span>
                            <span *ngIf='item.payfree=="PG_UNPAID"' class="dottra" style="margin-left: -18px;
                            margin-bottom: -25px;background-color: #c30707 ;" ></span>
                            <span *ngIf='item.payfree=="PG_SETTLEMENT_PENDING"' class="dottra" style="margin-left: -18px;
                                                        margin-bottom: -25px;background-color: #c30707 ;" ></span>
                        </div>
                    </div>
                    <div class="row" *ngIf='item.status==""'>
                        <div class="col-sm-12" style="padding: 14px;">
                            <span >
                                {{item.requestedat | date:'MMM, d'}} {{'Requested' | translate}}
                            </span>
                            <span class="dottra" style="margin-bottom: -25px; margin-left: -126px;     
                            background-color: #c30707;"></span>
                                <!-- <div class="line" style="    width: 268px;
                                border-bottom: 2px solid #c30707;"></div> -->
                        </div>
                    </div>
                    <div class="row" *ngIf='item.status!=""&&item.stausfree=="Fail"'>
                        <div class="col-sm-12" style="padding: 14px;">
                            <span >
                                {{item.requestedat | date:'MMM, d'}} {{'Requested' | translate}}
                            </span>
                            <span class="dottra" style="margin-bottom: -25px; margin-left: -180px;"></span>
                                <div class="line"></div>
                                <span class="dottra" style="margin-bottom: -25px;
                                margin-left: 260px;"></span>
                            <span style="margin-left: -33px;">
                                {{item.receviedat | date:'MMM, d'}} {{'Received' | translate}}
                            </span>
                        </div>
                    </div>
                </mat-expansion-panel>
            </mat-accordion>
        </div>
    </div>
</ng-container>

